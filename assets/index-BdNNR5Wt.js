(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function e(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(i){if(i.ep)return;i.ep=!0;const r=e(i);fetch(i.href,r)}})();function wv(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var jm={exports:{}},Bl={},Wm={exports:{}},J={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wo=Symbol.for("react.element"),Mv=Symbol.for("react.portal"),Sv=Symbol.for("react.fragment"),Tv=Symbol.for("react.strict_mode"),_v=Symbol.for("react.profiler"),Cv=Symbol.for("react.provider"),Av=Symbol.for("react.context"),zv=Symbol.for("react.forward_ref"),Ev=Symbol.for("react.suspense"),Rv=Symbol.for("react.memo"),kv=Symbol.for("react.lazy"),fp=Symbol.iterator;function Vv(n){return n===null||typeof n!="object"?null:(n=fp&&n[fp]||n["@@iterator"],typeof n=="function"?n:null)}var Hm={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},$m=Object.assign,Gm={};function _r(n,t,e){this.props=n,this.context=t,this.refs=Gm,this.updater=e||Hm}_r.prototype.isReactComponent={};_r.prototype.setState=function(n,t){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,t,"setState")};_r.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function qm(){}qm.prototype=_r.prototype;function Yh(n,t,e){this.props=n,this.context=t,this.refs=Gm,this.updater=e||Hm}var Zh=Yh.prototype=new qm;Zh.constructor=Yh;$m(Zh,_r.prototype);Zh.isPureReactComponent=!0;var mp=Array.isArray,Xm=Object.prototype.hasOwnProperty,Qh={current:null},Ym={key:!0,ref:!0,__self:!0,__source:!0};function Zm(n,t,e){var s,i={},r=null,o=null;if(t!=null)for(s in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(r=""+t.key),t)Xm.call(t,s)&&!Ym.hasOwnProperty(s)&&(i[s]=t[s]);var a=arguments.length-2;if(a===1)i.children=e;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(n&&n.defaultProps)for(s in a=n.defaultProps,a)i[s]===void 0&&(i[s]=a[s]);return{$$typeof:Wo,type:n,key:r,ref:o,props:i,_owner:Qh.current}}function Lv(n,t){return{$$typeof:Wo,type:n.type,key:t,ref:n.ref,props:n.props,_owner:n._owner}}function Jh(n){return typeof n=="object"&&n!==null&&n.$$typeof===Wo}function Iv(n){var t={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(e){return t[e]})}var gp=/\/+/g;function Nu(n,t){return typeof n=="object"&&n!==null&&n.key!=null?Iv(""+n.key):t.toString(36)}function ja(n,t,e,s,i){var r=typeof n;(r==="undefined"||r==="boolean")&&(n=null);var o=!1;if(n===null)o=!0;else switch(r){case"string":case"number":o=!0;break;case"object":switch(n.$$typeof){case Wo:case Mv:o=!0}}if(o)return o=n,i=i(o),n=s===""?"."+Nu(o,0):s,mp(i)?(e="",n!=null&&(e=n.replace(gp,"$&/")+"/"),ja(i,t,e,"",function(u){return u})):i!=null&&(Jh(i)&&(i=Lv(i,e+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(gp,"$&/")+"/")+n)),t.push(i)),1;if(o=0,s=s===""?".":s+":",mp(n))for(var a=0;a<n.length;a++){r=n[a];var l=s+Nu(r,a);o+=ja(r,t,e,l,i)}else if(l=Vv(n),typeof l=="function")for(n=l.call(n),a=0;!(r=n.next()).done;)r=r.value,l=s+Nu(r,a++),o+=ja(r,t,e,l,i);else if(r==="object")throw t=String(n),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function sa(n,t,e){if(n==null)return n;var s=[],i=0;return ja(n,s,"","",function(r){return t.call(e,r,i++)}),s}function Fv(n){if(n._status===-1){var t=n._result;t=t(),t.then(function(e){(n._status===0||n._status===-1)&&(n._status=1,n._result=e)},function(e){(n._status===0||n._status===-1)&&(n._status=2,n._result=e)}),n._status===-1&&(n._status=0,n._result=t)}if(n._status===1)return n._result.default;throw n._result}var xe={current:null},Wa={transition:null},Pv={ReactCurrentDispatcher:xe,ReactCurrentBatchConfig:Wa,ReactCurrentOwner:Qh};function Qm(){throw Error("act(...) is not supported in production builds of React.")}J.Children={map:sa,forEach:function(n,t,e){sa(n,function(){t.apply(this,arguments)},e)},count:function(n){var t=0;return sa(n,function(){t++}),t},toArray:function(n){return sa(n,function(t){return t})||[]},only:function(n){if(!Jh(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};J.Component=_r;J.Fragment=Sv;J.Profiler=_v;J.PureComponent=Yh;J.StrictMode=Tv;J.Suspense=Ev;J.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Pv;J.act=Qm;J.cloneElement=function(n,t,e){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var s=$m({},n.props),i=n.key,r=n.ref,o=n._owner;if(t!=null){if(t.ref!==void 0&&(r=t.ref,o=Qh.current),t.key!==void 0&&(i=""+t.key),n.type&&n.type.defaultProps)var a=n.type.defaultProps;for(l in t)Xm.call(t,l)&&!Ym.hasOwnProperty(l)&&(s[l]=t[l]===void 0&&a!==void 0?a[l]:t[l])}var l=arguments.length-2;if(l===1)s.children=e;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];s.children=a}return{$$typeof:Wo,type:n.type,key:i,ref:r,props:s,_owner:o}};J.createContext=function(n){return n={$$typeof:Av,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:Cv,_context:n},n.Consumer=n};J.createElement=Zm;J.createFactory=function(n){var t=Zm.bind(null,n);return t.type=n,t};J.createRef=function(){return{current:null}};J.forwardRef=function(n){return{$$typeof:zv,render:n}};J.isValidElement=Jh;J.lazy=function(n){return{$$typeof:kv,_payload:{_status:-1,_result:n},_init:Fv}};J.memo=function(n,t){return{$$typeof:Rv,type:n,compare:t===void 0?null:t}};J.startTransition=function(n){var t=Wa.transition;Wa.transition={};try{n()}finally{Wa.transition=t}};J.unstable_act=Qm;J.useCallback=function(n,t){return xe.current.useCallback(n,t)};J.useContext=function(n){return xe.current.useContext(n)};J.useDebugValue=function(){};J.useDeferredValue=function(n){return xe.current.useDeferredValue(n)};J.useEffect=function(n,t){return xe.current.useEffect(n,t)};J.useId=function(){return xe.current.useId()};J.useImperativeHandle=function(n,t,e){return xe.current.useImperativeHandle(n,t,e)};J.useInsertionEffect=function(n,t){return xe.current.useInsertionEffect(n,t)};J.useLayoutEffect=function(n,t){return xe.current.useLayoutEffect(n,t)};J.useMemo=function(n,t){return xe.current.useMemo(n,t)};J.useReducer=function(n,t,e){return xe.current.useReducer(n,t,e)};J.useRef=function(n){return xe.current.useRef(n)};J.useState=function(n){return xe.current.useState(n)};J.useSyncExternalStore=function(n,t,e){return xe.current.useSyncExternalStore(n,t,e)};J.useTransition=function(){return xe.current.useTransition()};J.version="18.3.1";Wm.exports=J;var Ul=Wm.exports;const Ov=wv(Ul);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dv=Ul,bv=Symbol.for("react.element"),Bv=Symbol.for("react.fragment"),Uv=Object.prototype.hasOwnProperty,jv=Dv.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Wv={key:!0,ref:!0,__self:!0,__source:!0};function Jm(n,t,e){var s,i={},r=null,o=null;e!==void 0&&(r=""+e),t.key!==void 0&&(r=""+t.key),t.ref!==void 0&&(o=t.ref);for(s in t)Uv.call(t,s)&&!Wv.hasOwnProperty(s)&&(i[s]=t[s]);if(n&&n.defaultProps)for(s in t=n.defaultProps,t)i[s]===void 0&&(i[s]=t[s]);return{$$typeof:bv,type:n,key:r,ref:o,props:i,_owner:jv.current}}Bl.Fragment=Bv;Bl.jsx=Jm;Bl.jsxs=Jm;jm.exports=Bl;var X=jm.exports,Vc={},Km={exports:{}},Ue={},t0={exports:{}},e0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function t(b,G){var Y=b.length;b.push(G);t:for(;0<Y;){var ht=Y-1>>>1,Wt=b[ht];if(0<i(Wt,G))b[ht]=G,b[Y]=Wt,Y=ht;else break t}}function e(b){return b.length===0?null:b[0]}function s(b){if(b.length===0)return null;var G=b[0],Y=b.pop();if(Y!==G){b[0]=Y;t:for(var ht=0,Wt=b.length,ea=Wt>>>1;ht<ea;){var js=2*(ht+1)-1,vu=b[js],Ws=js+1,na=b[Ws];if(0>i(vu,Y))Ws<Wt&&0>i(na,vu)?(b[ht]=na,b[Ws]=Y,ht=Ws):(b[ht]=vu,b[js]=Y,ht=js);else if(Ws<Wt&&0>i(na,Y))b[ht]=na,b[Ws]=Y,ht=Ws;else break t}}return G}function i(b,G){var Y=b.sortIndex-G.sortIndex;return Y!==0?Y:b.id-G.id}if(typeof performance=="object"&&typeof performance.now=="function"){var r=performance;n.unstable_now=function(){return r.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],u=[],c=1,h=null,d=3,p=!1,f=!1,y=!1,M=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(b){for(var G=e(u);G!==null;){if(G.callback===null)s(u);else if(G.startTime<=b)s(u),G.sortIndex=G.expirationTime,t(l,G);else break;G=e(u)}}function S(b){if(y=!1,x(b),!f)if(e(l)!==null)f=!0,is(E);else{var G=e(u);G!==null&&rs(S,G.startTime-b)}}function E(b,G){f=!1,y&&(y=!1,m(V),V=-1),p=!0;var Y=d;try{for(x(G),h=e(l);h!==null&&(!(h.expirationTime>G)||b&&!et());){var ht=h.callback;if(typeof ht=="function"){h.callback=null,d=h.priorityLevel;var Wt=ht(h.expirationTime<=G);G=n.unstable_now(),typeof Wt=="function"?h.callback=Wt:h===e(l)&&s(l),x(G)}else s(l);h=e(l)}if(h!==null)var ea=!0;else{var js=e(u);js!==null&&rs(S,js.startTime-G),ea=!1}return ea}finally{h=null,d=Y,p=!1}}var L=!1,A=null,V=-1,W=5,H=-1;function et(){return!(n.unstable_now()-H<W)}function Et(){if(A!==null){var b=n.unstable_now();H=b;var G=!0;try{G=A(!0,b)}finally{G?gt():(L=!1,A=null)}}else L=!1}var gt;if(typeof g=="function")gt=function(){g(Et)};else if(typeof MessageChannel<"u"){var Ke=new MessageChannel,Si=Ke.port2;Ke.port1.onmessage=Et,gt=function(){Si.postMessage(null)}}else gt=function(){M(Et,0)};function is(b){A=b,L||(L=!0,gt())}function rs(b,G){V=M(function(){b(n.unstable_now())},G)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(b){b.callback=null},n.unstable_continueExecution=function(){f||p||(f=!0,is(E))},n.unstable_forceFrameRate=function(b){0>b||125<b?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):W=0<b?Math.floor(1e3/b):5},n.unstable_getCurrentPriorityLevel=function(){return d},n.unstable_getFirstCallbackNode=function(){return e(l)},n.unstable_next=function(b){switch(d){case 1:case 2:case 3:var G=3;break;default:G=d}var Y=d;d=G;try{return b()}finally{d=Y}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(b,G){switch(b){case 1:case 2:case 3:case 4:case 5:break;default:b=3}var Y=d;d=b;try{return G()}finally{d=Y}},n.unstable_scheduleCallback=function(b,G,Y){var ht=n.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?ht+Y:ht):Y=ht,b){case 1:var Wt=-1;break;case 2:Wt=250;break;case 5:Wt=1073741823;break;case 4:Wt=1e4;break;default:Wt=5e3}return Wt=Y+Wt,b={id:c++,callback:G,priorityLevel:b,startTime:Y,expirationTime:Wt,sortIndex:-1},Y>ht?(b.sortIndex=Y,t(u,b),e(l)===null&&b===e(u)&&(y?(m(V),V=-1):y=!0,rs(S,Y-ht))):(b.sortIndex=Wt,t(l,b),f||p||(f=!0,is(E))),b},n.unstable_shouldYield=et,n.unstable_wrapCallback=function(b){var G=d;return function(){var Y=d;d=G;try{return b.apply(this,arguments)}finally{d=Y}}}})(e0);t0.exports=e0;var Hv=t0.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $v=Ul,De=Hv;function F(n){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+n,e=1;e<arguments.length;e++)t+="&args[]="+encodeURIComponent(arguments[e]);return"Minified React error #"+n+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n0=new Set,yo={};function gi(n,t){mr(n,t),mr(n+"Capture",t)}function mr(n,t){for(yo[n]=t,n=0;n<t.length;n++)n0.add(t[n])}var Kn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Lc=Object.prototype.hasOwnProperty,Gv=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,yp={},xp={};function qv(n){return Lc.call(xp,n)?!0:Lc.call(yp,n)?!1:Gv.test(n)?xp[n]=!0:(yp[n]=!0,!1)}function Xv(n,t,e,s){if(e!==null&&e.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return s?!1:e!==null?!e.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function Yv(n,t,e,s){if(t===null||typeof t>"u"||Xv(n,t,e,s))return!0;if(s)return!1;if(e!==null)switch(e.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function ve(n,t,e,s,i,r,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=s,this.attributeNamespace=i,this.mustUseProperty=e,this.propertyName=n,this.type=t,this.sanitizeURL=r,this.removeEmptyString=o}var se={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){se[n]=new ve(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var t=n[0];se[t]=new ve(t,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){se[n]=new ve(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){se[n]=new ve(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){se[n]=new ve(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){se[n]=new ve(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){se[n]=new ve(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){se[n]=new ve(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){se[n]=new ve(n,5,!1,n.toLowerCase(),null,!1,!1)});var Kh=/[\-:]([a-z])/g;function td(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var t=n.replace(Kh,td);se[t]=new ve(t,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var t=n.replace(Kh,td);se[t]=new ve(t,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var t=n.replace(Kh,td);se[t]=new ve(t,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){se[n]=new ve(n,1,!1,n.toLowerCase(),null,!1,!1)});se.xlinkHref=new ve("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){se[n]=new ve(n,1,!1,n.toLowerCase(),null,!0,!0)});function ed(n,t,e,s){var i=se.hasOwnProperty(t)?se[t]:null;(i!==null?i.type!==0:s||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Yv(t,e,i,s)&&(e=null),s||i===null?qv(t)&&(e===null?n.removeAttribute(t):n.setAttribute(t,""+e)):i.mustUseProperty?n[i.propertyName]=e===null?i.type===3?!1:"":e:(t=i.attributeName,s=i.attributeNamespace,e===null?n.removeAttribute(t):(i=i.type,e=i===3||i===4&&e===!0?"":""+e,s?n.setAttributeNS(s,t,e):n.setAttribute(t,e))))}var ss=$v.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ia=Symbol.for("react.element"),bi=Symbol.for("react.portal"),Bi=Symbol.for("react.fragment"),nd=Symbol.for("react.strict_mode"),Ic=Symbol.for("react.profiler"),s0=Symbol.for("react.provider"),i0=Symbol.for("react.context"),sd=Symbol.for("react.forward_ref"),Fc=Symbol.for("react.suspense"),Pc=Symbol.for("react.suspense_list"),id=Symbol.for("react.memo"),ps=Symbol.for("react.lazy"),r0=Symbol.for("react.offscreen"),vp=Symbol.iterator;function Or(n){return n===null||typeof n!="object"?null:(n=vp&&n[vp]||n["@@iterator"],typeof n=="function"?n:null)}var Ct=Object.assign,wu;function Kr(n){if(wu===void 0)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);wu=t&&t[1]||""}return`
`+wu+n}var Mu=!1;function Su(n,t){if(!n||Mu)return"";Mu=!0;var e=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var s=u}Reflect.construct(n,[],t)}else{try{t.call()}catch(u){s=u}n.call(t.prototype)}else{try{throw Error()}catch(u){s=u}n()}}catch(u){if(u&&s&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),r=s.stack.split(`
`),o=i.length-1,a=r.length-1;1<=o&&0<=a&&i[o]!==r[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==r[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==r[a]){var l=`
`+i[o].replace(" at new "," at ");return n.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",n.displayName)),l}while(1<=o&&0<=a);break}}}finally{Mu=!1,Error.prepareStackTrace=e}return(n=n?n.displayName||n.name:"")?Kr(n):""}function Zv(n){switch(n.tag){case 5:return Kr(n.type);case 16:return Kr("Lazy");case 13:return Kr("Suspense");case 19:return Kr("SuspenseList");case 0:case 2:case 15:return n=Su(n.type,!1),n;case 11:return n=Su(n.type.render,!1),n;case 1:return n=Su(n.type,!0),n;default:return""}}function Oc(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case Bi:return"Fragment";case bi:return"Portal";case Ic:return"Profiler";case nd:return"StrictMode";case Fc:return"Suspense";case Pc:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case i0:return(n.displayName||"Context")+".Consumer";case s0:return(n._context.displayName||"Context")+".Provider";case sd:var t=n.render;return n=n.displayName,n||(n=t.displayName||t.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case id:return t=n.displayName||null,t!==null?t:Oc(n.type)||"Memo";case ps:t=n._payload,n=n._init;try{return Oc(n(t))}catch{}}return null}function Qv(n){var t=n.type;switch(n.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=t.render,n=n.displayName||n.name||"",t.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Oc(t);case 8:return t===nd?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function ks(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function o0(n){var t=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Jv(n){var t=o0(n)?"checked":"value",e=Object.getOwnPropertyDescriptor(n.constructor.prototype,t),s=""+n[t];if(!n.hasOwnProperty(t)&&typeof e<"u"&&typeof e.get=="function"&&typeof e.set=="function"){var i=e.get,r=e.set;return Object.defineProperty(n,t,{configurable:!0,get:function(){return i.call(this)},set:function(o){s=""+o,r.call(this,o)}}),Object.defineProperty(n,t,{enumerable:e.enumerable}),{getValue:function(){return s},setValue:function(o){s=""+o},stopTracking:function(){n._valueTracker=null,delete n[t]}}}}function ra(n){n._valueTracker||(n._valueTracker=Jv(n))}function a0(n){if(!n)return!1;var t=n._valueTracker;if(!t)return!0;var e=t.getValue(),s="";return n&&(s=o0(n)?n.checked?"true":"false":n.value),n=s,n!==e?(t.setValue(n),!0):!1}function sl(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function Dc(n,t){var e=t.checked;return Ct({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:e??n._wrapperState.initialChecked})}function Np(n,t){var e=t.defaultValue==null?"":t.defaultValue,s=t.checked!=null?t.checked:t.defaultChecked;e=ks(t.value!=null?t.value:e),n._wrapperState={initialChecked:s,initialValue:e,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function l0(n,t){t=t.checked,t!=null&&ed(n,"checked",t,!1)}function bc(n,t){l0(n,t);var e=ks(t.value),s=t.type;if(e!=null)s==="number"?(e===0&&n.value===""||n.value!=e)&&(n.value=""+e):n.value!==""+e&&(n.value=""+e);else if(s==="submit"||s==="reset"){n.removeAttribute("value");return}t.hasOwnProperty("value")?Bc(n,t.type,e):t.hasOwnProperty("defaultValue")&&Bc(n,t.type,ks(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(n.defaultChecked=!!t.defaultChecked)}function wp(n,t,e){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var s=t.type;if(!(s!=="submit"&&s!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+n._wrapperState.initialValue,e||t===n.value||(n.value=t),n.defaultValue=t}e=n.name,e!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,e!==""&&(n.name=e)}function Bc(n,t,e){(t!=="number"||sl(n.ownerDocument)!==n)&&(e==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+e&&(n.defaultValue=""+e))}var to=Array.isArray;function er(n,t,e,s){if(n=n.options,t){t={};for(var i=0;i<e.length;i++)t["$"+e[i]]=!0;for(e=0;e<n.length;e++)i=t.hasOwnProperty("$"+n[e].value),n[e].selected!==i&&(n[e].selected=i),i&&s&&(n[e].defaultSelected=!0)}else{for(e=""+ks(e),t=null,i=0;i<n.length;i++){if(n[i].value===e){n[i].selected=!0,s&&(n[i].defaultSelected=!0);return}t!==null||n[i].disabled||(t=n[i])}t!==null&&(t.selected=!0)}}function Uc(n,t){if(t.dangerouslySetInnerHTML!=null)throw Error(F(91));return Ct({},t,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function Mp(n,t){var e=t.value;if(e==null){if(e=t.children,t=t.defaultValue,e!=null){if(t!=null)throw Error(F(92));if(to(e)){if(1<e.length)throw Error(F(93));e=e[0]}t=e}t==null&&(t=""),e=t}n._wrapperState={initialValue:ks(e)}}function u0(n,t){var e=ks(t.value),s=ks(t.defaultValue);e!=null&&(e=""+e,e!==n.value&&(n.value=e),t.defaultValue==null&&n.defaultValue!==e&&(n.defaultValue=e)),s!=null&&(n.defaultValue=""+s)}function Sp(n){var t=n.textContent;t===n._wrapperState.initialValue&&t!==""&&t!==null&&(n.value=t)}function c0(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function jc(n,t){return n==null||n==="http://www.w3.org/1999/xhtml"?c0(t):n==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var oa,h0=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,e,s,i){MSApp.execUnsafeLocalFunction(function(){return n(t,e,s,i)})}:n}(function(n,t){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=t;else{for(oa=oa||document.createElement("div"),oa.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=oa.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;t.firstChild;)n.appendChild(t.firstChild)}});function xo(n,t){if(t){var e=n.firstChild;if(e&&e===n.lastChild&&e.nodeType===3){e.nodeValue=t;return}}n.textContent=t}var io={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Kv=["Webkit","ms","Moz","O"];Object.keys(io).forEach(function(n){Kv.forEach(function(t){t=t+n.charAt(0).toUpperCase()+n.substring(1),io[t]=io[n]})});function d0(n,t,e){return t==null||typeof t=="boolean"||t===""?"":e||typeof t!="number"||t===0||io.hasOwnProperty(n)&&io[n]?(""+t).trim():t+"px"}function p0(n,t){n=n.style;for(var e in t)if(t.hasOwnProperty(e)){var s=e.indexOf("--")===0,i=d0(e,t[e],s);e==="float"&&(e="cssFloat"),s?n.setProperty(e,i):n[e]=i}}var tN=Ct({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Wc(n,t){if(t){if(tN[n]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(F(137,n));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(F(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(F(61))}if(t.style!=null&&typeof t.style!="object")throw Error(F(62))}}function Hc(n,t){if(n.indexOf("-")===-1)return typeof t.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var $c=null;function rd(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Gc=null,nr=null,sr=null;function Tp(n){if(n=Go(n)){if(typeof Gc!="function")throw Error(F(280));var t=n.stateNode;t&&(t=Gl(t),Gc(n.stateNode,n.type,t))}}function f0(n){nr?sr?sr.push(n):sr=[n]:nr=n}function m0(){if(nr){var n=nr,t=sr;if(sr=nr=null,Tp(n),t)for(n=0;n<t.length;n++)Tp(t[n])}}function g0(n,t){return n(t)}function y0(){}var Tu=!1;function x0(n,t,e){if(Tu)return n(t,e);Tu=!0;try{return g0(n,t,e)}finally{Tu=!1,(nr!==null||sr!==null)&&(y0(),m0())}}function vo(n,t){var e=n.stateNode;if(e===null)return null;var s=Gl(e);if(s===null)return null;e=s[t];t:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(n=n.type,s=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!s;break t;default:n=!1}if(n)return null;if(e&&typeof e!="function")throw Error(F(231,t,typeof e));return e}var qc=!1;if(Kn)try{var Dr={};Object.defineProperty(Dr,"passive",{get:function(){qc=!0}}),window.addEventListener("test",Dr,Dr),window.removeEventListener("test",Dr,Dr)}catch{qc=!1}function eN(n,t,e,s,i,r,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(e,u)}catch(c){this.onError(c)}}var ro=!1,il=null,rl=!1,Xc=null,nN={onError:function(n){ro=!0,il=n}};function sN(n,t,e,s,i,r,o,a,l){ro=!1,il=null,eN.apply(nN,arguments)}function iN(n,t,e,s,i,r,o,a,l){if(sN.apply(this,arguments),ro){if(ro){var u=il;ro=!1,il=null}else throw Error(F(198));rl||(rl=!0,Xc=u)}}function yi(n){var t=n,e=n;if(n.alternate)for(;t.return;)t=t.return;else{n=t;do t=n,t.flags&4098&&(e=t.return),n=t.return;while(n)}return t.tag===3?e:null}function v0(n){if(n.tag===13){var t=n.memoizedState;if(t===null&&(n=n.alternate,n!==null&&(t=n.memoizedState)),t!==null)return t.dehydrated}return null}function _p(n){if(yi(n)!==n)throw Error(F(188))}function rN(n){var t=n.alternate;if(!t){if(t=yi(n),t===null)throw Error(F(188));return t!==n?null:n}for(var e=n,s=t;;){var i=e.return;if(i===null)break;var r=i.alternate;if(r===null){if(s=i.return,s!==null){e=s;continue}break}if(i.child===r.child){for(r=i.child;r;){if(r===e)return _p(i),n;if(r===s)return _p(i),t;r=r.sibling}throw Error(F(188))}if(e.return!==s.return)e=i,s=r;else{for(var o=!1,a=i.child;a;){if(a===e){o=!0,e=i,s=r;break}if(a===s){o=!0,s=i,e=r;break}a=a.sibling}if(!o){for(a=r.child;a;){if(a===e){o=!0,e=r,s=i;break}if(a===s){o=!0,s=r,e=i;break}a=a.sibling}if(!o)throw Error(F(189))}}if(e.alternate!==s)throw Error(F(190))}if(e.tag!==3)throw Error(F(188));return e.stateNode.current===e?n:t}function N0(n){return n=rN(n),n!==null?w0(n):null}function w0(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var t=w0(n);if(t!==null)return t;n=n.sibling}return null}var M0=De.unstable_scheduleCallback,Cp=De.unstable_cancelCallback,oN=De.unstable_shouldYield,aN=De.unstable_requestPaint,Rt=De.unstable_now,lN=De.unstable_getCurrentPriorityLevel,od=De.unstable_ImmediatePriority,S0=De.unstable_UserBlockingPriority,ol=De.unstable_NormalPriority,uN=De.unstable_LowPriority,T0=De.unstable_IdlePriority,jl=null,En=null;function cN(n){if(En&&typeof En.onCommitFiberRoot=="function")try{En.onCommitFiberRoot(jl,n,void 0,(n.current.flags&128)===128)}catch{}}var dn=Math.clz32?Math.clz32:pN,hN=Math.log,dN=Math.LN2;function pN(n){return n>>>=0,n===0?32:31-(hN(n)/dN|0)|0}var aa=64,la=4194304;function eo(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function al(n,t){var e=n.pendingLanes;if(e===0)return 0;var s=0,i=n.suspendedLanes,r=n.pingedLanes,o=e&268435455;if(o!==0){var a=o&~i;a!==0?s=eo(a):(r&=o,r!==0&&(s=eo(r)))}else o=e&~i,o!==0?s=eo(o):r!==0&&(s=eo(r));if(s===0)return 0;if(t!==0&&t!==s&&!(t&i)&&(i=s&-s,r=t&-t,i>=r||i===16&&(r&4194240)!==0))return t;if(s&4&&(s|=e&16),t=n.entangledLanes,t!==0)for(n=n.entanglements,t&=s;0<t;)e=31-dn(t),i=1<<e,s|=n[e],t&=~i;return s}function fN(n,t){switch(n){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function mN(n,t){for(var e=n.suspendedLanes,s=n.pingedLanes,i=n.expirationTimes,r=n.pendingLanes;0<r;){var o=31-dn(r),a=1<<o,l=i[o];l===-1?(!(a&e)||a&s)&&(i[o]=fN(a,t)):l<=t&&(n.expiredLanes|=a),r&=~a}}function Yc(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function _0(){var n=aa;return aa<<=1,!(aa&4194240)&&(aa=64),n}function _u(n){for(var t=[],e=0;31>e;e++)t.push(n);return t}function Ho(n,t,e){n.pendingLanes|=t,t!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,t=31-dn(t),n[t]=e}function gN(n,t){var e=n.pendingLanes&~t;n.pendingLanes=t,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=t,n.mutableReadLanes&=t,n.entangledLanes&=t,t=n.entanglements;var s=n.eventTimes;for(n=n.expirationTimes;0<e;){var i=31-dn(e),r=1<<i;t[i]=0,s[i]=-1,n[i]=-1,e&=~r}}function ad(n,t){var e=n.entangledLanes|=t;for(n=n.entanglements;e;){var s=31-dn(e),i=1<<s;i&t|n[s]&t&&(n[s]|=t),e&=~i}}var at=0;function C0(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var A0,ld,z0,E0,R0,Zc=!1,ua=[],Ms=null,Ss=null,Ts=null,No=new Map,wo=new Map,gs=[],yN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ap(n,t){switch(n){case"focusin":case"focusout":Ms=null;break;case"dragenter":case"dragleave":Ss=null;break;case"mouseover":case"mouseout":Ts=null;break;case"pointerover":case"pointerout":No.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":wo.delete(t.pointerId)}}function br(n,t,e,s,i,r){return n===null||n.nativeEvent!==r?(n={blockedOn:t,domEventName:e,eventSystemFlags:s,nativeEvent:r,targetContainers:[i]},t!==null&&(t=Go(t),t!==null&&ld(t)),n):(n.eventSystemFlags|=s,t=n.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),n)}function xN(n,t,e,s,i){switch(t){case"focusin":return Ms=br(Ms,n,t,e,s,i),!0;case"dragenter":return Ss=br(Ss,n,t,e,s,i),!0;case"mouseover":return Ts=br(Ts,n,t,e,s,i),!0;case"pointerover":var r=i.pointerId;return No.set(r,br(No.get(r)||null,n,t,e,s,i)),!0;case"gotpointercapture":return r=i.pointerId,wo.set(r,br(wo.get(r)||null,n,t,e,s,i)),!0}return!1}function k0(n){var t=ei(n.target);if(t!==null){var e=yi(t);if(e!==null){if(t=e.tag,t===13){if(t=v0(e),t!==null){n.blockedOn=t,R0(n.priority,function(){z0(e)});return}}else if(t===3&&e.stateNode.current.memoizedState.isDehydrated){n.blockedOn=e.tag===3?e.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Ha(n){if(n.blockedOn!==null)return!1;for(var t=n.targetContainers;0<t.length;){var e=Qc(n.domEventName,n.eventSystemFlags,t[0],n.nativeEvent);if(e===null){e=n.nativeEvent;var s=new e.constructor(e.type,e);$c=s,e.target.dispatchEvent(s),$c=null}else return t=Go(e),t!==null&&ld(t),n.blockedOn=e,!1;t.shift()}return!0}function zp(n,t,e){Ha(n)&&e.delete(t)}function vN(){Zc=!1,Ms!==null&&Ha(Ms)&&(Ms=null),Ss!==null&&Ha(Ss)&&(Ss=null),Ts!==null&&Ha(Ts)&&(Ts=null),No.forEach(zp),wo.forEach(zp)}function Br(n,t){n.blockedOn===t&&(n.blockedOn=null,Zc||(Zc=!0,De.unstable_scheduleCallback(De.unstable_NormalPriority,vN)))}function Mo(n){function t(i){return Br(i,n)}if(0<ua.length){Br(ua[0],n);for(var e=1;e<ua.length;e++){var s=ua[e];s.blockedOn===n&&(s.blockedOn=null)}}for(Ms!==null&&Br(Ms,n),Ss!==null&&Br(Ss,n),Ts!==null&&Br(Ts,n),No.forEach(t),wo.forEach(t),e=0;e<gs.length;e++)s=gs[e],s.blockedOn===n&&(s.blockedOn=null);for(;0<gs.length&&(e=gs[0],e.blockedOn===null);)k0(e),e.blockedOn===null&&gs.shift()}var ir=ss.ReactCurrentBatchConfig,ll=!0;function NN(n,t,e,s){var i=at,r=ir.transition;ir.transition=null;try{at=1,ud(n,t,e,s)}finally{at=i,ir.transition=r}}function wN(n,t,e,s){var i=at,r=ir.transition;ir.transition=null;try{at=4,ud(n,t,e,s)}finally{at=i,ir.transition=r}}function ud(n,t,e,s){if(ll){var i=Qc(n,t,e,s);if(i===null)Fu(n,t,s,ul,e),Ap(n,s);else if(xN(i,n,t,e,s))s.stopPropagation();else if(Ap(n,s),t&4&&-1<yN.indexOf(n)){for(;i!==null;){var r=Go(i);if(r!==null&&A0(r),r=Qc(n,t,e,s),r===null&&Fu(n,t,s,ul,e),r===i)break;i=r}i!==null&&s.stopPropagation()}else Fu(n,t,s,null,e)}}var ul=null;function Qc(n,t,e,s){if(ul=null,n=rd(s),n=ei(n),n!==null)if(t=yi(n),t===null)n=null;else if(e=t.tag,e===13){if(n=v0(t),n!==null)return n;n=null}else if(e===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;n=null}else t!==n&&(n=null);return ul=n,null}function V0(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(lN()){case od:return 1;case S0:return 4;case ol:case uN:return 16;case T0:return 536870912;default:return 16}default:return 16}}var xs=null,cd=null,$a=null;function L0(){if($a)return $a;var n,t=cd,e=t.length,s,i="value"in xs?xs.value:xs.textContent,r=i.length;for(n=0;n<e&&t[n]===i[n];n++);var o=e-n;for(s=1;s<=o&&t[e-s]===i[r-s];s++);return $a=i.slice(n,1<s?1-s:void 0)}function Ga(n){var t=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&t===13&&(n=13)):n=t,n===10&&(n=13),32<=n||n===13?n:0}function ca(){return!0}function Ep(){return!1}function je(n){function t(e,s,i,r,o){this._reactName=e,this._targetInst=i,this.type=s,this.nativeEvent=r,this.target=o,this.currentTarget=null;for(var a in n)n.hasOwnProperty(a)&&(e=n[a],this[a]=e?e(r):r[a]);return this.isDefaultPrevented=(r.defaultPrevented!=null?r.defaultPrevented:r.returnValue===!1)?ca:Ep,this.isPropagationStopped=Ep,this}return Ct(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():typeof e.returnValue!="unknown"&&(e.returnValue=!1),this.isDefaultPrevented=ca)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():typeof e.cancelBubble!="unknown"&&(e.cancelBubble=!0),this.isPropagationStopped=ca)},persist:function(){},isPersistent:ca}),t}var Cr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},hd=je(Cr),$o=Ct({},Cr,{view:0,detail:0}),MN=je($o),Cu,Au,Ur,Wl=Ct({},$o,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:dd,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Ur&&(Ur&&n.type==="mousemove"?(Cu=n.screenX-Ur.screenX,Au=n.screenY-Ur.screenY):Au=Cu=0,Ur=n),Cu)},movementY:function(n){return"movementY"in n?n.movementY:Au}}),Rp=je(Wl),SN=Ct({},Wl,{dataTransfer:0}),TN=je(SN),_N=Ct({},$o,{relatedTarget:0}),zu=je(_N),CN=Ct({},Cr,{animationName:0,elapsedTime:0,pseudoElement:0}),AN=je(CN),zN=Ct({},Cr,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),EN=je(zN),RN=Ct({},Cr,{data:0}),kp=je(RN),kN={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},VN={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},LN={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function IN(n){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(n):(n=LN[n])?!!t[n]:!1}function dd(){return IN}var FN=Ct({},$o,{key:function(n){if(n.key){var t=kN[n.key]||n.key;if(t!=="Unidentified")return t}return n.type==="keypress"?(n=Ga(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?VN[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:dd,charCode:function(n){return n.type==="keypress"?Ga(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Ga(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),PN=je(FN),ON=Ct({},Wl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Vp=je(ON),DN=Ct({},$o,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:dd}),bN=je(DN),BN=Ct({},Cr,{propertyName:0,elapsedTime:0,pseudoElement:0}),UN=je(BN),jN=Ct({},Wl,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),WN=je(jN),HN=[9,13,27,32],pd=Kn&&"CompositionEvent"in window,oo=null;Kn&&"documentMode"in document&&(oo=document.documentMode);var $N=Kn&&"TextEvent"in window&&!oo,I0=Kn&&(!pd||oo&&8<oo&&11>=oo),Lp=" ",Ip=!1;function F0(n,t){switch(n){case"keyup":return HN.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function P0(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Ui=!1;function GN(n,t){switch(n){case"compositionend":return P0(t);case"keypress":return t.which!==32?null:(Ip=!0,Lp);case"textInput":return n=t.data,n===Lp&&Ip?null:n;default:return null}}function qN(n,t){if(Ui)return n==="compositionend"||!pd&&F0(n,t)?(n=L0(),$a=cd=xs=null,Ui=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return I0&&t.locale!=="ko"?null:t.data;default:return null}}var XN={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Fp(n){var t=n&&n.nodeName&&n.nodeName.toLowerCase();return t==="input"?!!XN[n.type]:t==="textarea"}function O0(n,t,e,s){f0(s),t=cl(t,"onChange"),0<t.length&&(e=new hd("onChange","change",null,e,s),n.push({event:e,listeners:t}))}var ao=null,So=null;function YN(n){X0(n,0)}function Hl(n){var t=Hi(n);if(a0(t))return n}function ZN(n,t){if(n==="change")return t}var D0=!1;if(Kn){var Eu;if(Kn){var Ru="oninput"in document;if(!Ru){var Pp=document.createElement("div");Pp.setAttribute("oninput","return;"),Ru=typeof Pp.oninput=="function"}Eu=Ru}else Eu=!1;D0=Eu&&(!document.documentMode||9<document.documentMode)}function Op(){ao&&(ao.detachEvent("onpropertychange",b0),So=ao=null)}function b0(n){if(n.propertyName==="value"&&Hl(So)){var t=[];O0(t,So,n,rd(n)),x0(YN,t)}}function QN(n,t,e){n==="focusin"?(Op(),ao=t,So=e,ao.attachEvent("onpropertychange",b0)):n==="focusout"&&Op()}function JN(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Hl(So)}function KN(n,t){if(n==="click")return Hl(t)}function t2(n,t){if(n==="input"||n==="change")return Hl(t)}function e2(n,t){return n===t&&(n!==0||1/n===1/t)||n!==n&&t!==t}var yn=typeof Object.is=="function"?Object.is:e2;function To(n,t){if(yn(n,t))return!0;if(typeof n!="object"||n===null||typeof t!="object"||t===null)return!1;var e=Object.keys(n),s=Object.keys(t);if(e.length!==s.length)return!1;for(s=0;s<e.length;s++){var i=e[s];if(!Lc.call(t,i)||!yn(n[i],t[i]))return!1}return!0}function Dp(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function bp(n,t){var e=Dp(n);n=0;for(var s;e;){if(e.nodeType===3){if(s=n+e.textContent.length,n<=t&&s>=t)return{node:e,offset:t-n};n=s}t:{for(;e;){if(e.nextSibling){e=e.nextSibling;break t}e=e.parentNode}e=void 0}e=Dp(e)}}function B0(n,t){return n&&t?n===t?!0:n&&n.nodeType===3?!1:t&&t.nodeType===3?B0(n,t.parentNode):"contains"in n?n.contains(t):n.compareDocumentPosition?!!(n.compareDocumentPosition(t)&16):!1:!1}function U0(){for(var n=window,t=sl();t instanceof n.HTMLIFrameElement;){try{var e=typeof t.contentWindow.location.href=="string"}catch{e=!1}if(e)n=t.contentWindow;else break;t=sl(n.document)}return t}function fd(n){var t=n&&n.nodeName&&n.nodeName.toLowerCase();return t&&(t==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||t==="textarea"||n.contentEditable==="true")}function n2(n){var t=U0(),e=n.focusedElem,s=n.selectionRange;if(t!==e&&e&&e.ownerDocument&&B0(e.ownerDocument.documentElement,e)){if(s!==null&&fd(e)){if(t=s.start,n=s.end,n===void 0&&(n=t),"selectionStart"in e)e.selectionStart=t,e.selectionEnd=Math.min(n,e.value.length);else if(n=(t=e.ownerDocument||document)&&t.defaultView||window,n.getSelection){n=n.getSelection();var i=e.textContent.length,r=Math.min(s.start,i);s=s.end===void 0?r:Math.min(s.end,i),!n.extend&&r>s&&(i=s,s=r,r=i),i=bp(e,r);var o=bp(e,s);i&&o&&(n.rangeCount!==1||n.anchorNode!==i.node||n.anchorOffset!==i.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),n.removeAllRanges(),r>s?(n.addRange(t),n.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),n.addRange(t)))}}for(t=[],n=e;n=n.parentNode;)n.nodeType===1&&t.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof e.focus=="function"&&e.focus(),e=0;e<t.length;e++)n=t[e],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var s2=Kn&&"documentMode"in document&&11>=document.documentMode,ji=null,Jc=null,lo=null,Kc=!1;function Bp(n,t,e){var s=e.window===e?e.document:e.nodeType===9?e:e.ownerDocument;Kc||ji==null||ji!==sl(s)||(s=ji,"selectionStart"in s&&fd(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),lo&&To(lo,s)||(lo=s,s=cl(Jc,"onSelect"),0<s.length&&(t=new hd("onSelect","select",null,t,e),n.push({event:t,listeners:s}),t.target=ji)))}function ha(n,t){var e={};return e[n.toLowerCase()]=t.toLowerCase(),e["Webkit"+n]="webkit"+t,e["Moz"+n]="moz"+t,e}var Wi={animationend:ha("Animation","AnimationEnd"),animationiteration:ha("Animation","AnimationIteration"),animationstart:ha("Animation","AnimationStart"),transitionend:ha("Transition","TransitionEnd")},ku={},j0={};Kn&&(j0=document.createElement("div").style,"AnimationEvent"in window||(delete Wi.animationend.animation,delete Wi.animationiteration.animation,delete Wi.animationstart.animation),"TransitionEvent"in window||delete Wi.transitionend.transition);function $l(n){if(ku[n])return ku[n];if(!Wi[n])return n;var t=Wi[n],e;for(e in t)if(t.hasOwnProperty(e)&&e in j0)return ku[n]=t[e];return n}var W0=$l("animationend"),H0=$l("animationiteration"),$0=$l("animationstart"),G0=$l("transitionend"),q0=new Map,Up="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ds(n,t){q0.set(n,t),gi(t,[n])}for(var Vu=0;Vu<Up.length;Vu++){var Lu=Up[Vu],i2=Lu.toLowerCase(),r2=Lu[0].toUpperCase()+Lu.slice(1);Ds(i2,"on"+r2)}Ds(W0,"onAnimationEnd");Ds(H0,"onAnimationIteration");Ds($0,"onAnimationStart");Ds("dblclick","onDoubleClick");Ds("focusin","onFocus");Ds("focusout","onBlur");Ds(G0,"onTransitionEnd");mr("onMouseEnter",["mouseout","mouseover"]);mr("onMouseLeave",["mouseout","mouseover"]);mr("onPointerEnter",["pointerout","pointerover"]);mr("onPointerLeave",["pointerout","pointerover"]);gi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));gi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));gi("onBeforeInput",["compositionend","keypress","textInput","paste"]);gi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));gi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));gi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var no="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),o2=new Set("cancel close invalid load scroll toggle".split(" ").concat(no));function jp(n,t,e){var s=n.type||"unknown-event";n.currentTarget=e,iN(s,t,void 0,n),n.currentTarget=null}function X0(n,t){t=(t&4)!==0;for(var e=0;e<n.length;e++){var s=n[e],i=s.event;s=s.listeners;t:{var r=void 0;if(t)for(var o=s.length-1;0<=o;o--){var a=s[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==r&&i.isPropagationStopped())break t;jp(i,a,u),r=l}else for(o=0;o<s.length;o++){if(a=s[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==r&&i.isPropagationStopped())break t;jp(i,a,u),r=l}}}if(rl)throw n=Xc,rl=!1,Xc=null,n}function yt(n,t){var e=t[ih];e===void 0&&(e=t[ih]=new Set);var s=n+"__bubble";e.has(s)||(Y0(t,n,2,!1),e.add(s))}function Iu(n,t,e){var s=0;t&&(s|=4),Y0(e,n,s,t)}var da="_reactListening"+Math.random().toString(36).slice(2);function _o(n){if(!n[da]){n[da]=!0,n0.forEach(function(e){e!=="selectionchange"&&(o2.has(e)||Iu(e,!1,n),Iu(e,!0,n))});var t=n.nodeType===9?n:n.ownerDocument;t===null||t[da]||(t[da]=!0,Iu("selectionchange",!1,t))}}function Y0(n,t,e,s){switch(V0(t)){case 1:var i=NN;break;case 4:i=wN;break;default:i=ud}e=i.bind(null,t,e,n),i=void 0,!qc||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),s?i!==void 0?n.addEventListener(t,e,{capture:!0,passive:i}):n.addEventListener(t,e,!0):i!==void 0?n.addEventListener(t,e,{passive:i}):n.addEventListener(t,e,!1)}function Fu(n,t,e,s,i){var r=s;if(!(t&1)&&!(t&2)&&s!==null)t:for(;;){if(s===null)return;var o=s.tag;if(o===3||o===4){var a=s.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=s.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=ei(a),o===null)return;if(l=o.tag,l===5||l===6){s=r=o;continue t}a=a.parentNode}}s=s.return}x0(function(){var u=r,c=rd(e),h=[];t:{var d=q0.get(n);if(d!==void 0){var p=hd,f=n;switch(n){case"keypress":if(Ga(e)===0)break t;case"keydown":case"keyup":p=PN;break;case"focusin":f="focus",p=zu;break;case"focusout":f="blur",p=zu;break;case"beforeblur":case"afterblur":p=zu;break;case"click":if(e.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=Rp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=TN;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=bN;break;case W0:case H0:case $0:p=AN;break;case G0:p=UN;break;case"scroll":p=MN;break;case"wheel":p=WN;break;case"copy":case"cut":case"paste":p=EN;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=Vp}var y=(t&4)!==0,M=!y&&n==="scroll",m=y?d!==null?d+"Capture":null:d;y=[];for(var g=u,x;g!==null;){x=g;var S=x.stateNode;if(x.tag===5&&S!==null&&(x=S,m!==null&&(S=vo(g,m),S!=null&&y.push(Co(g,S,x)))),M)break;g=g.return}0<y.length&&(d=new p(d,f,null,e,c),h.push({event:d,listeners:y}))}}if(!(t&7)){t:{if(d=n==="mouseover"||n==="pointerover",p=n==="mouseout"||n==="pointerout",d&&e!==$c&&(f=e.relatedTarget||e.fromElement)&&(ei(f)||f[ts]))break t;if((p||d)&&(d=c.window===c?c:(d=c.ownerDocument)?d.defaultView||d.parentWindow:window,p?(f=e.relatedTarget||e.toElement,p=u,f=f?ei(f):null,f!==null&&(M=yi(f),f!==M||f.tag!==5&&f.tag!==6)&&(f=null)):(p=null,f=u),p!==f)){if(y=Rp,S="onMouseLeave",m="onMouseEnter",g="mouse",(n==="pointerout"||n==="pointerover")&&(y=Vp,S="onPointerLeave",m="onPointerEnter",g="pointer"),M=p==null?d:Hi(p),x=f==null?d:Hi(f),d=new y(S,g+"leave",p,e,c),d.target=M,d.relatedTarget=x,S=null,ei(c)===u&&(y=new y(m,g+"enter",f,e,c),y.target=x,y.relatedTarget=M,S=y),M=S,p&&f)e:{for(y=p,m=f,g=0,x=y;x;x=Ti(x))g++;for(x=0,S=m;S;S=Ti(S))x++;for(;0<g-x;)y=Ti(y),g--;for(;0<x-g;)m=Ti(m),x--;for(;g--;){if(y===m||m!==null&&y===m.alternate)break e;y=Ti(y),m=Ti(m)}y=null}else y=null;p!==null&&Wp(h,d,p,y,!1),f!==null&&M!==null&&Wp(h,M,f,y,!0)}}t:{if(d=u?Hi(u):window,p=d.nodeName&&d.nodeName.toLowerCase(),p==="select"||p==="input"&&d.type==="file")var E=ZN;else if(Fp(d))if(D0)E=t2;else{E=JN;var L=QN}else(p=d.nodeName)&&p.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(E=KN);if(E&&(E=E(n,u))){O0(h,E,e,c);break t}L&&L(n,d,u),n==="focusout"&&(L=d._wrapperState)&&L.controlled&&d.type==="number"&&Bc(d,"number",d.value)}switch(L=u?Hi(u):window,n){case"focusin":(Fp(L)||L.contentEditable==="true")&&(ji=L,Jc=u,lo=null);break;case"focusout":lo=Jc=ji=null;break;case"mousedown":Kc=!0;break;case"contextmenu":case"mouseup":case"dragend":Kc=!1,Bp(h,e,c);break;case"selectionchange":if(s2)break;case"keydown":case"keyup":Bp(h,e,c)}var A;if(pd)t:{switch(n){case"compositionstart":var V="onCompositionStart";break t;case"compositionend":V="onCompositionEnd";break t;case"compositionupdate":V="onCompositionUpdate";break t}V=void 0}else Ui?F0(n,e)&&(V="onCompositionEnd"):n==="keydown"&&e.keyCode===229&&(V="onCompositionStart");V&&(I0&&e.locale!=="ko"&&(Ui||V!=="onCompositionStart"?V==="onCompositionEnd"&&Ui&&(A=L0()):(xs=c,cd="value"in xs?xs.value:xs.textContent,Ui=!0)),L=cl(u,V),0<L.length&&(V=new kp(V,n,null,e,c),h.push({event:V,listeners:L}),A?V.data=A:(A=P0(e),A!==null&&(V.data=A)))),(A=$N?GN(n,e):qN(n,e))&&(u=cl(u,"onBeforeInput"),0<u.length&&(c=new kp("onBeforeInput","beforeinput",null,e,c),h.push({event:c,listeners:u}),c.data=A))}X0(h,t)})}function Co(n,t,e){return{instance:n,listener:t,currentTarget:e}}function cl(n,t){for(var e=t+"Capture",s=[];n!==null;){var i=n,r=i.stateNode;i.tag===5&&r!==null&&(i=r,r=vo(n,e),r!=null&&s.unshift(Co(n,r,i)),r=vo(n,t),r!=null&&s.push(Co(n,r,i))),n=n.return}return s}function Ti(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function Wp(n,t,e,s,i){for(var r=t._reactName,o=[];e!==null&&e!==s;){var a=e,l=a.alternate,u=a.stateNode;if(l!==null&&l===s)break;a.tag===5&&u!==null&&(a=u,i?(l=vo(e,r),l!=null&&o.unshift(Co(e,l,a))):i||(l=vo(e,r),l!=null&&o.push(Co(e,l,a)))),e=e.return}o.length!==0&&n.push({event:t,listeners:o})}var a2=/\r\n?/g,l2=/\u0000|\uFFFD/g;function Hp(n){return(typeof n=="string"?n:""+n).replace(a2,`
`).replace(l2,"")}function pa(n,t,e){if(t=Hp(t),Hp(n)!==t&&e)throw Error(F(425))}function hl(){}var th=null,eh=null;function nh(n,t){return n==="textarea"||n==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var sh=typeof setTimeout=="function"?setTimeout:void 0,u2=typeof clearTimeout=="function"?clearTimeout:void 0,$p=typeof Promise=="function"?Promise:void 0,c2=typeof queueMicrotask=="function"?queueMicrotask:typeof $p<"u"?function(n){return $p.resolve(null).then(n).catch(h2)}:sh;function h2(n){setTimeout(function(){throw n})}function Pu(n,t){var e=t,s=0;do{var i=e.nextSibling;if(n.removeChild(e),i&&i.nodeType===8)if(e=i.data,e==="/$"){if(s===0){n.removeChild(i),Mo(t);return}s--}else e!=="$"&&e!=="$?"&&e!=="$!"||s++;e=i}while(e);Mo(t)}function _s(n){for(;n!=null;n=n.nextSibling){var t=n.nodeType;if(t===1||t===3)break;if(t===8){if(t=n.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return n}function Gp(n){n=n.previousSibling;for(var t=0;n;){if(n.nodeType===8){var e=n.data;if(e==="$"||e==="$!"||e==="$?"){if(t===0)return n;t--}else e==="/$"&&t++}n=n.previousSibling}return null}var Ar=Math.random().toString(36).slice(2),Cn="__reactFiber$"+Ar,Ao="__reactProps$"+Ar,ts="__reactContainer$"+Ar,ih="__reactEvents$"+Ar,d2="__reactListeners$"+Ar,p2="__reactHandles$"+Ar;function ei(n){var t=n[Cn];if(t)return t;for(var e=n.parentNode;e;){if(t=e[ts]||e[Cn]){if(e=t.alternate,t.child!==null||e!==null&&e.child!==null)for(n=Gp(n);n!==null;){if(e=n[Cn])return e;n=Gp(n)}return t}n=e,e=n.parentNode}return null}function Go(n){return n=n[Cn]||n[ts],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Hi(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(F(33))}function Gl(n){return n[Ao]||null}var rh=[],$i=-1;function bs(n){return{current:n}}function xt(n){0>$i||(n.current=rh[$i],rh[$i]=null,$i--)}function pt(n,t){$i++,rh[$i]=n.current,n.current=t}var Vs={},de=bs(Vs),Te=bs(!1),ai=Vs;function gr(n,t){var e=n.type.contextTypes;if(!e)return Vs;var s=n.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===t)return s.__reactInternalMemoizedMaskedChildContext;var i={},r;for(r in e)i[r]=t[r];return s&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=t,n.__reactInternalMemoizedMaskedChildContext=i),i}function _e(n){return n=n.childContextTypes,n!=null}function dl(){xt(Te),xt(de)}function qp(n,t,e){if(de.current!==Vs)throw Error(F(168));pt(de,t),pt(Te,e)}function Z0(n,t,e){var s=n.stateNode;if(t=t.childContextTypes,typeof s.getChildContext!="function")return e;s=s.getChildContext();for(var i in s)if(!(i in t))throw Error(F(108,Qv(n)||"Unknown",i));return Ct({},e,s)}function pl(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Vs,ai=de.current,pt(de,n),pt(Te,Te.current),!0}function Xp(n,t,e){var s=n.stateNode;if(!s)throw Error(F(169));e?(n=Z0(n,t,ai),s.__reactInternalMemoizedMergedChildContext=n,xt(Te),xt(de),pt(de,n)):xt(Te),pt(Te,e)}var Hn=null,ql=!1,Ou=!1;function Q0(n){Hn===null?Hn=[n]:Hn.push(n)}function f2(n){ql=!0,Q0(n)}function Bs(){if(!Ou&&Hn!==null){Ou=!0;var n=0,t=at;try{var e=Hn;for(at=1;n<e.length;n++){var s=e[n];do s=s(!0);while(s!==null)}Hn=null,ql=!1}catch(i){throw Hn!==null&&(Hn=Hn.slice(n+1)),M0(od,Bs),i}finally{at=t,Ou=!1}}return null}var Gi=[],qi=0,fl=null,ml=0,Ge=[],qe=0,li=null,Gn=1,qn="";function Zs(n,t){Gi[qi++]=ml,Gi[qi++]=fl,fl=n,ml=t}function J0(n,t,e){Ge[qe++]=Gn,Ge[qe++]=qn,Ge[qe++]=li,li=n;var s=Gn;n=qn;var i=32-dn(s)-1;s&=~(1<<i),e+=1;var r=32-dn(t)+i;if(30<r){var o=i-i%5;r=(s&(1<<o)-1).toString(32),s>>=o,i-=o,Gn=1<<32-dn(t)+i|e<<i|s,qn=r+n}else Gn=1<<r|e<<i|s,qn=n}function md(n){n.return!==null&&(Zs(n,1),J0(n,1,0))}function gd(n){for(;n===fl;)fl=Gi[--qi],Gi[qi]=null,ml=Gi[--qi],Gi[qi]=null;for(;n===li;)li=Ge[--qe],Ge[qe]=null,qn=Ge[--qe],Ge[qe]=null,Gn=Ge[--qe],Ge[qe]=null}var Pe=null,Le=null,Nt=!1,un=null;function K0(n,t){var e=Xe(5,null,null,0);e.elementType="DELETED",e.stateNode=t,e.return=n,t=n.deletions,t===null?(n.deletions=[e],n.flags|=16):t.push(e)}function Yp(n,t){switch(n.tag){case 5:var e=n.type;return t=t.nodeType!==1||e.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(n.stateNode=t,Pe=n,Le=_s(t.firstChild),!0):!1;case 6:return t=n.pendingProps===""||t.nodeType!==3?null:t,t!==null?(n.stateNode=t,Pe=n,Le=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(e=li!==null?{id:Gn,overflow:qn}:null,n.memoizedState={dehydrated:t,treeContext:e,retryLane:1073741824},e=Xe(18,null,null,0),e.stateNode=t,e.return=n,n.child=e,Pe=n,Le=null,!0):!1;default:return!1}}function oh(n){return(n.mode&1)!==0&&(n.flags&128)===0}function ah(n){if(Nt){var t=Le;if(t){var e=t;if(!Yp(n,t)){if(oh(n))throw Error(F(418));t=_s(e.nextSibling);var s=Pe;t&&Yp(n,t)?K0(s,e):(n.flags=n.flags&-4097|2,Nt=!1,Pe=n)}}else{if(oh(n))throw Error(F(418));n.flags=n.flags&-4097|2,Nt=!1,Pe=n}}}function Zp(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Pe=n}function fa(n){if(n!==Pe)return!1;if(!Nt)return Zp(n),Nt=!0,!1;var t;if((t=n.tag!==3)&&!(t=n.tag!==5)&&(t=n.type,t=t!=="head"&&t!=="body"&&!nh(n.type,n.memoizedProps)),t&&(t=Le)){if(oh(n))throw tg(),Error(F(418));for(;t;)K0(n,t),t=_s(t.nextSibling)}if(Zp(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(F(317));t:{for(n=n.nextSibling,t=0;n;){if(n.nodeType===8){var e=n.data;if(e==="/$"){if(t===0){Le=_s(n.nextSibling);break t}t--}else e!=="$"&&e!=="$!"&&e!=="$?"||t++}n=n.nextSibling}Le=null}}else Le=Pe?_s(n.stateNode.nextSibling):null;return!0}function tg(){for(var n=Le;n;)n=_s(n.nextSibling)}function yr(){Le=Pe=null,Nt=!1}function yd(n){un===null?un=[n]:un.push(n)}var m2=ss.ReactCurrentBatchConfig;function jr(n,t,e){if(n=e.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(e._owner){if(e=e._owner,e){if(e.tag!==1)throw Error(F(309));var s=e.stateNode}if(!s)throw Error(F(147,n));var i=s,r=""+n;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===r?t.ref:(t=function(o){var a=i.refs;o===null?delete a[r]:a[r]=o},t._stringRef=r,t)}if(typeof n!="string")throw Error(F(284));if(!e._owner)throw Error(F(290,n))}return n}function ma(n,t){throw n=Object.prototype.toString.call(t),Error(F(31,n==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":n))}function Qp(n){var t=n._init;return t(n._payload)}function eg(n){function t(m,g){if(n){var x=m.deletions;x===null?(m.deletions=[g],m.flags|=16):x.push(g)}}function e(m,g){if(!n)return null;for(;g!==null;)t(m,g),g=g.sibling;return null}function s(m,g){for(m=new Map;g!==null;)g.key!==null?m.set(g.key,g):m.set(g.index,g),g=g.sibling;return m}function i(m,g){return m=Es(m,g),m.index=0,m.sibling=null,m}function r(m,g,x){return m.index=x,n?(x=m.alternate,x!==null?(x=x.index,x<g?(m.flags|=2,g):x):(m.flags|=2,g)):(m.flags|=1048576,g)}function o(m){return n&&m.alternate===null&&(m.flags|=2),m}function a(m,g,x,S){return g===null||g.tag!==6?(g=Hu(x,m.mode,S),g.return=m,g):(g=i(g,x),g.return=m,g)}function l(m,g,x,S){var E=x.type;return E===Bi?c(m,g,x.props.children,S,x.key):g!==null&&(g.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===ps&&Qp(E)===g.type)?(S=i(g,x.props),S.ref=jr(m,g,x),S.return=m,S):(S=Ka(x.type,x.key,x.props,null,m.mode,S),S.ref=jr(m,g,x),S.return=m,S)}function u(m,g,x,S){return g===null||g.tag!==4||g.stateNode.containerInfo!==x.containerInfo||g.stateNode.implementation!==x.implementation?(g=$u(x,m.mode,S),g.return=m,g):(g=i(g,x.children||[]),g.return=m,g)}function c(m,g,x,S,E){return g===null||g.tag!==7?(g=oi(x,m.mode,S,E),g.return=m,g):(g=i(g,x),g.return=m,g)}function h(m,g,x){if(typeof g=="string"&&g!==""||typeof g=="number")return g=Hu(""+g,m.mode,x),g.return=m,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case ia:return x=Ka(g.type,g.key,g.props,null,m.mode,x),x.ref=jr(m,null,g),x.return=m,x;case bi:return g=$u(g,m.mode,x),g.return=m,g;case ps:var S=g._init;return h(m,S(g._payload),x)}if(to(g)||Or(g))return g=oi(g,m.mode,x,null),g.return=m,g;ma(m,g)}return null}function d(m,g,x,S){var E=g!==null?g.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return E!==null?null:a(m,g,""+x,S);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case ia:return x.key===E?l(m,g,x,S):null;case bi:return x.key===E?u(m,g,x,S):null;case ps:return E=x._init,d(m,g,E(x._payload),S)}if(to(x)||Or(x))return E!==null?null:c(m,g,x,S,null);ma(m,x)}return null}function p(m,g,x,S,E){if(typeof S=="string"&&S!==""||typeof S=="number")return m=m.get(x)||null,a(g,m,""+S,E);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case ia:return m=m.get(S.key===null?x:S.key)||null,l(g,m,S,E);case bi:return m=m.get(S.key===null?x:S.key)||null,u(g,m,S,E);case ps:var L=S._init;return p(m,g,x,L(S._payload),E)}if(to(S)||Or(S))return m=m.get(x)||null,c(g,m,S,E,null);ma(g,S)}return null}function f(m,g,x,S){for(var E=null,L=null,A=g,V=g=0,W=null;A!==null&&V<x.length;V++){A.index>V?(W=A,A=null):W=A.sibling;var H=d(m,A,x[V],S);if(H===null){A===null&&(A=W);break}n&&A&&H.alternate===null&&t(m,A),g=r(H,g,V),L===null?E=H:L.sibling=H,L=H,A=W}if(V===x.length)return e(m,A),Nt&&Zs(m,V),E;if(A===null){for(;V<x.length;V++)A=h(m,x[V],S),A!==null&&(g=r(A,g,V),L===null?E=A:L.sibling=A,L=A);return Nt&&Zs(m,V),E}for(A=s(m,A);V<x.length;V++)W=p(A,m,V,x[V],S),W!==null&&(n&&W.alternate!==null&&A.delete(W.key===null?V:W.key),g=r(W,g,V),L===null?E=W:L.sibling=W,L=W);return n&&A.forEach(function(et){return t(m,et)}),Nt&&Zs(m,V),E}function y(m,g,x,S){var E=Or(x);if(typeof E!="function")throw Error(F(150));if(x=E.call(x),x==null)throw Error(F(151));for(var L=E=null,A=g,V=g=0,W=null,H=x.next();A!==null&&!H.done;V++,H=x.next()){A.index>V?(W=A,A=null):W=A.sibling;var et=d(m,A,H.value,S);if(et===null){A===null&&(A=W);break}n&&A&&et.alternate===null&&t(m,A),g=r(et,g,V),L===null?E=et:L.sibling=et,L=et,A=W}if(H.done)return e(m,A),Nt&&Zs(m,V),E;if(A===null){for(;!H.done;V++,H=x.next())H=h(m,H.value,S),H!==null&&(g=r(H,g,V),L===null?E=H:L.sibling=H,L=H);return Nt&&Zs(m,V),E}for(A=s(m,A);!H.done;V++,H=x.next())H=p(A,m,V,H.value,S),H!==null&&(n&&H.alternate!==null&&A.delete(H.key===null?V:H.key),g=r(H,g,V),L===null?E=H:L.sibling=H,L=H);return n&&A.forEach(function(Et){return t(m,Et)}),Nt&&Zs(m,V),E}function M(m,g,x,S){if(typeof x=="object"&&x!==null&&x.type===Bi&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case ia:t:{for(var E=x.key,L=g;L!==null;){if(L.key===E){if(E=x.type,E===Bi){if(L.tag===7){e(m,L.sibling),g=i(L,x.props.children),g.return=m,m=g;break t}}else if(L.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===ps&&Qp(E)===L.type){e(m,L.sibling),g=i(L,x.props),g.ref=jr(m,L,x),g.return=m,m=g;break t}e(m,L);break}else t(m,L);L=L.sibling}x.type===Bi?(g=oi(x.props.children,m.mode,S,x.key),g.return=m,m=g):(S=Ka(x.type,x.key,x.props,null,m.mode,S),S.ref=jr(m,g,x),S.return=m,m=S)}return o(m);case bi:t:{for(L=x.key;g!==null;){if(g.key===L)if(g.tag===4&&g.stateNode.containerInfo===x.containerInfo&&g.stateNode.implementation===x.implementation){e(m,g.sibling),g=i(g,x.children||[]),g.return=m,m=g;break t}else{e(m,g);break}else t(m,g);g=g.sibling}g=$u(x,m.mode,S),g.return=m,m=g}return o(m);case ps:return L=x._init,M(m,g,L(x._payload),S)}if(to(x))return f(m,g,x,S);if(Or(x))return y(m,g,x,S);ma(m,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,g!==null&&g.tag===6?(e(m,g.sibling),g=i(g,x),g.return=m,m=g):(e(m,g),g=Hu(x,m.mode,S),g.return=m,m=g),o(m)):e(m,g)}return M}var xr=eg(!0),ng=eg(!1),gl=bs(null),yl=null,Xi=null,xd=null;function vd(){xd=Xi=yl=null}function Nd(n){var t=gl.current;xt(gl),n._currentValue=t}function lh(n,t,e){for(;n!==null;){var s=n.alternate;if((n.childLanes&t)!==t?(n.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),n===e)break;n=n.return}}function rr(n,t){yl=n,xd=Xi=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&t&&(Me=!0),n.firstContext=null)}function Ze(n){var t=n._currentValue;if(xd!==n)if(n={context:n,memoizedValue:t,next:null},Xi===null){if(yl===null)throw Error(F(308));Xi=n,yl.dependencies={lanes:0,firstContext:n}}else Xi=Xi.next=n;return t}var ni=null;function wd(n){ni===null?ni=[n]:ni.push(n)}function sg(n,t,e,s){var i=t.interleaved;return i===null?(e.next=e,wd(t)):(e.next=i.next,i.next=e),t.interleaved=e,es(n,s)}function es(n,t){n.lanes|=t;var e=n.alternate;for(e!==null&&(e.lanes|=t),e=n,n=n.return;n!==null;)n.childLanes|=t,e=n.alternate,e!==null&&(e.childLanes|=t),e=n,n=n.return;return e.tag===3?e.stateNode:null}var fs=!1;function Md(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ig(n,t){n=n.updateQueue,t.updateQueue===n&&(t.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Zn(n,t){return{eventTime:n,lane:t,tag:0,payload:null,callback:null,next:null}}function Cs(n,t,e){var s=n.updateQueue;if(s===null)return null;if(s=s.shared,nt&2){var i=s.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),s.pending=t,es(n,e)}return i=s.interleaved,i===null?(t.next=t,wd(s)):(t.next=i.next,i.next=t),s.interleaved=t,es(n,e)}function qa(n,t,e){if(t=t.updateQueue,t!==null&&(t=t.shared,(e&4194240)!==0)){var s=t.lanes;s&=n.pendingLanes,e|=s,t.lanes=e,ad(n,e)}}function Jp(n,t){var e=n.updateQueue,s=n.alternate;if(s!==null&&(s=s.updateQueue,e===s)){var i=null,r=null;if(e=e.firstBaseUpdate,e!==null){do{var o={eventTime:e.eventTime,lane:e.lane,tag:e.tag,payload:e.payload,callback:e.callback,next:null};r===null?i=r=o:r=r.next=o,e=e.next}while(e!==null);r===null?i=r=t:r=r.next=t}else i=r=t;e={baseState:s.baseState,firstBaseUpdate:i,lastBaseUpdate:r,shared:s.shared,effects:s.effects},n.updateQueue=e;return}n=e.lastBaseUpdate,n===null?e.firstBaseUpdate=t:n.next=t,e.lastBaseUpdate=t}function xl(n,t,e,s){var i=n.updateQueue;fs=!1;var r=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?r=u:o.next=u,o=l;var c=n.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(r!==null){var h=i.baseState;o=0,c=u=l=null,a=r;do{var d=a.lane,p=a.eventTime;if((s&d)===d){c!==null&&(c=c.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});t:{var f=n,y=a;switch(d=t,p=e,y.tag){case 1:if(f=y.payload,typeof f=="function"){h=f.call(p,h,d);break t}h=f;break t;case 3:f.flags=f.flags&-65537|128;case 0:if(f=y.payload,d=typeof f=="function"?f.call(p,h,d):f,d==null)break t;h=Ct({},h,d);break t;case 2:fs=!0}}a.callback!==null&&a.lane!==0&&(n.flags|=64,d=i.effects,d===null?i.effects=[a]:d.push(a))}else p={eventTime:p,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(u=c=p,l=h):c=c.next=p,o|=d;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;d=a,a=d.next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}while(!0);if(c===null&&(l=h),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,t=i.shared.interleaved,t!==null){i=t;do o|=i.lane,i=i.next;while(i!==t)}else r===null&&(i.shared.lanes=0);ci|=o,n.lanes=o,n.memoizedState=h}}function Kp(n,t,e){if(n=t.effects,t.effects=null,n!==null)for(t=0;t<n.length;t++){var s=n[t],i=s.callback;if(i!==null){if(s.callback=null,s=e,typeof i!="function")throw Error(F(191,i));i.call(s)}}}var qo={},Rn=bs(qo),zo=bs(qo),Eo=bs(qo);function si(n){if(n===qo)throw Error(F(174));return n}function Sd(n,t){switch(pt(Eo,t),pt(zo,n),pt(Rn,qo),n=t.nodeType,n){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:jc(null,"");break;default:n=n===8?t.parentNode:t,t=n.namespaceURI||null,n=n.tagName,t=jc(t,n)}xt(Rn),pt(Rn,t)}function vr(){xt(Rn),xt(zo),xt(Eo)}function rg(n){si(Eo.current);var t=si(Rn.current),e=jc(t,n.type);t!==e&&(pt(zo,n),pt(Rn,e))}function Td(n){zo.current===n&&(xt(Rn),xt(zo))}var Mt=bs(0);function vl(n){for(var t=n;t!==null;){if(t.tag===13){var e=t.memoizedState;if(e!==null&&(e=e.dehydrated,e===null||e.data==="$?"||e.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===n)break;for(;t.sibling===null;){if(t.return===null||t.return===n)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Du=[];function _d(){for(var n=0;n<Du.length;n++)Du[n]._workInProgressVersionPrimary=null;Du.length=0}var Xa=ss.ReactCurrentDispatcher,bu=ss.ReactCurrentBatchConfig,ui=0,_t=null,Dt=null,$t=null,Nl=!1,uo=!1,Ro=0,g2=0;function re(){throw Error(F(321))}function Cd(n,t){if(t===null)return!1;for(var e=0;e<t.length&&e<n.length;e++)if(!yn(n[e],t[e]))return!1;return!0}function Ad(n,t,e,s,i,r){if(ui=r,_t=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Xa.current=n===null||n.memoizedState===null?N2:w2,n=e(s,i),uo){r=0;do{if(uo=!1,Ro=0,25<=r)throw Error(F(301));r+=1,$t=Dt=null,t.updateQueue=null,Xa.current=M2,n=e(s,i)}while(uo)}if(Xa.current=wl,t=Dt!==null&&Dt.next!==null,ui=0,$t=Dt=_t=null,Nl=!1,t)throw Error(F(300));return n}function zd(){var n=Ro!==0;return Ro=0,n}function Mn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return $t===null?_t.memoizedState=$t=n:$t=$t.next=n,$t}function Qe(){if(Dt===null){var n=_t.alternate;n=n!==null?n.memoizedState:null}else n=Dt.next;var t=$t===null?_t.memoizedState:$t.next;if(t!==null)$t=t,Dt=n;else{if(n===null)throw Error(F(310));Dt=n,n={memoizedState:Dt.memoizedState,baseState:Dt.baseState,baseQueue:Dt.baseQueue,queue:Dt.queue,next:null},$t===null?_t.memoizedState=$t=n:$t=$t.next=n}return $t}function ko(n,t){return typeof t=="function"?t(n):t}function Bu(n){var t=Qe(),e=t.queue;if(e===null)throw Error(F(311));e.lastRenderedReducer=n;var s=Dt,i=s.baseQueue,r=e.pending;if(r!==null){if(i!==null){var o=i.next;i.next=r.next,r.next=o}s.baseQueue=i=r,e.pending=null}if(i!==null){r=i.next,s=s.baseState;var a=o=null,l=null,u=r;do{var c=u.lane;if((ui&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),s=u.hasEagerState?u.eagerState:n(s,u.action);else{var h={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=h,o=s):l=l.next=h,_t.lanes|=c,ci|=c}u=u.next}while(u!==null&&u!==r);l===null?o=s:l.next=a,yn(s,t.memoizedState)||(Me=!0),t.memoizedState=s,t.baseState=o,t.baseQueue=l,e.lastRenderedState=s}if(n=e.interleaved,n!==null){i=n;do r=i.lane,_t.lanes|=r,ci|=r,i=i.next;while(i!==n)}else i===null&&(e.lanes=0);return[t.memoizedState,e.dispatch]}function Uu(n){var t=Qe(),e=t.queue;if(e===null)throw Error(F(311));e.lastRenderedReducer=n;var s=e.dispatch,i=e.pending,r=t.memoizedState;if(i!==null){e.pending=null;var o=i=i.next;do r=n(r,o.action),o=o.next;while(o!==i);yn(r,t.memoizedState)||(Me=!0),t.memoizedState=r,t.baseQueue===null&&(t.baseState=r),e.lastRenderedState=r}return[r,s]}function og(){}function ag(n,t){var e=_t,s=Qe(),i=t(),r=!yn(s.memoizedState,i);if(r&&(s.memoizedState=i,Me=!0),s=s.queue,Ed(cg.bind(null,e,s,n),[n]),s.getSnapshot!==t||r||$t!==null&&$t.memoizedState.tag&1){if(e.flags|=2048,Vo(9,ug.bind(null,e,s,i,t),void 0,null),Xt===null)throw Error(F(349));ui&30||lg(e,t,i)}return i}function lg(n,t,e){n.flags|=16384,n={getSnapshot:t,value:e},t=_t.updateQueue,t===null?(t={lastEffect:null,stores:null},_t.updateQueue=t,t.stores=[n]):(e=t.stores,e===null?t.stores=[n]:e.push(n))}function ug(n,t,e,s){t.value=e,t.getSnapshot=s,hg(t)&&dg(n)}function cg(n,t,e){return e(function(){hg(t)&&dg(n)})}function hg(n){var t=n.getSnapshot;n=n.value;try{var e=t();return!yn(n,e)}catch{return!0}}function dg(n){var t=es(n,1);t!==null&&pn(t,n,1,-1)}function tf(n){var t=Mn();return typeof n=="function"&&(n=n()),t.memoizedState=t.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ko,lastRenderedState:n},t.queue=n,n=n.dispatch=v2.bind(null,_t,n),[t.memoizedState,n]}function Vo(n,t,e,s){return n={tag:n,create:t,destroy:e,deps:s,next:null},t=_t.updateQueue,t===null?(t={lastEffect:null,stores:null},_t.updateQueue=t,t.lastEffect=n.next=n):(e=t.lastEffect,e===null?t.lastEffect=n.next=n:(s=e.next,e.next=n,n.next=s,t.lastEffect=n)),n}function pg(){return Qe().memoizedState}function Ya(n,t,e,s){var i=Mn();_t.flags|=n,i.memoizedState=Vo(1|t,e,void 0,s===void 0?null:s)}function Xl(n,t,e,s){var i=Qe();s=s===void 0?null:s;var r=void 0;if(Dt!==null){var o=Dt.memoizedState;if(r=o.destroy,s!==null&&Cd(s,o.deps)){i.memoizedState=Vo(t,e,r,s);return}}_t.flags|=n,i.memoizedState=Vo(1|t,e,r,s)}function ef(n,t){return Ya(8390656,8,n,t)}function Ed(n,t){return Xl(2048,8,n,t)}function fg(n,t){return Xl(4,2,n,t)}function mg(n,t){return Xl(4,4,n,t)}function gg(n,t){if(typeof t=="function")return n=n(),t(n),function(){t(null)};if(t!=null)return n=n(),t.current=n,function(){t.current=null}}function yg(n,t,e){return e=e!=null?e.concat([n]):null,Xl(4,4,gg.bind(null,t,n),e)}function Rd(){}function xg(n,t){var e=Qe();t=t===void 0?null:t;var s=e.memoizedState;return s!==null&&t!==null&&Cd(t,s[1])?s[0]:(e.memoizedState=[n,t],n)}function vg(n,t){var e=Qe();t=t===void 0?null:t;var s=e.memoizedState;return s!==null&&t!==null&&Cd(t,s[1])?s[0]:(n=n(),e.memoizedState=[n,t],n)}function Ng(n,t,e){return ui&21?(yn(e,t)||(e=_0(),_t.lanes|=e,ci|=e,n.baseState=!0),t):(n.baseState&&(n.baseState=!1,Me=!0),n.memoizedState=e)}function y2(n,t){var e=at;at=e!==0&&4>e?e:4,n(!0);var s=bu.transition;bu.transition={};try{n(!1),t()}finally{at=e,bu.transition=s}}function wg(){return Qe().memoizedState}function x2(n,t,e){var s=zs(n);if(e={lane:s,action:e,hasEagerState:!1,eagerState:null,next:null},Mg(n))Sg(t,e);else if(e=sg(n,t,e,s),e!==null){var i=ye();pn(e,n,s,i),Tg(e,t,s)}}function v2(n,t,e){var s=zs(n),i={lane:s,action:e,hasEagerState:!1,eagerState:null,next:null};if(Mg(n))Sg(t,i);else{var r=n.alternate;if(n.lanes===0&&(r===null||r.lanes===0)&&(r=t.lastRenderedReducer,r!==null))try{var o=t.lastRenderedState,a=r(o,e);if(i.hasEagerState=!0,i.eagerState=a,yn(a,o)){var l=t.interleaved;l===null?(i.next=i,wd(t)):(i.next=l.next,l.next=i),t.interleaved=i;return}}catch{}finally{}e=sg(n,t,i,s),e!==null&&(i=ye(),pn(e,n,s,i),Tg(e,t,s))}}function Mg(n){var t=n.alternate;return n===_t||t!==null&&t===_t}function Sg(n,t){uo=Nl=!0;var e=n.pending;e===null?t.next=t:(t.next=e.next,e.next=t),n.pending=t}function Tg(n,t,e){if(e&4194240){var s=t.lanes;s&=n.pendingLanes,e|=s,t.lanes=e,ad(n,e)}}var wl={readContext:Ze,useCallback:re,useContext:re,useEffect:re,useImperativeHandle:re,useInsertionEffect:re,useLayoutEffect:re,useMemo:re,useReducer:re,useRef:re,useState:re,useDebugValue:re,useDeferredValue:re,useTransition:re,useMutableSource:re,useSyncExternalStore:re,useId:re,unstable_isNewReconciler:!1},N2={readContext:Ze,useCallback:function(n,t){return Mn().memoizedState=[n,t===void 0?null:t],n},useContext:Ze,useEffect:ef,useImperativeHandle:function(n,t,e){return e=e!=null?e.concat([n]):null,Ya(4194308,4,gg.bind(null,t,n),e)},useLayoutEffect:function(n,t){return Ya(4194308,4,n,t)},useInsertionEffect:function(n,t){return Ya(4,2,n,t)},useMemo:function(n,t){var e=Mn();return t=t===void 0?null:t,n=n(),e.memoizedState=[n,t],n},useReducer:function(n,t,e){var s=Mn();return t=e!==void 0?e(t):t,s.memoizedState=s.baseState=t,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:t},s.queue=n,n=n.dispatch=x2.bind(null,_t,n),[s.memoizedState,n]},useRef:function(n){var t=Mn();return n={current:n},t.memoizedState=n},useState:tf,useDebugValue:Rd,useDeferredValue:function(n){return Mn().memoizedState=n},useTransition:function(){var n=tf(!1),t=n[0];return n=y2.bind(null,n[1]),Mn().memoizedState=n,[t,n]},useMutableSource:function(){},useSyncExternalStore:function(n,t,e){var s=_t,i=Mn();if(Nt){if(e===void 0)throw Error(F(407));e=e()}else{if(e=t(),Xt===null)throw Error(F(349));ui&30||lg(s,t,e)}i.memoizedState=e;var r={value:e,getSnapshot:t};return i.queue=r,ef(cg.bind(null,s,r,n),[n]),s.flags|=2048,Vo(9,ug.bind(null,s,r,e,t),void 0,null),e},useId:function(){var n=Mn(),t=Xt.identifierPrefix;if(Nt){var e=qn,s=Gn;e=(s&~(1<<32-dn(s)-1)).toString(32)+e,t=":"+t+"R"+e,e=Ro++,0<e&&(t+="H"+e.toString(32)),t+=":"}else e=g2++,t=":"+t+"r"+e.toString(32)+":";return n.memoizedState=t},unstable_isNewReconciler:!1},w2={readContext:Ze,useCallback:xg,useContext:Ze,useEffect:Ed,useImperativeHandle:yg,useInsertionEffect:fg,useLayoutEffect:mg,useMemo:vg,useReducer:Bu,useRef:pg,useState:function(){return Bu(ko)},useDebugValue:Rd,useDeferredValue:function(n){var t=Qe();return Ng(t,Dt.memoizedState,n)},useTransition:function(){var n=Bu(ko)[0],t=Qe().memoizedState;return[n,t]},useMutableSource:og,useSyncExternalStore:ag,useId:wg,unstable_isNewReconciler:!1},M2={readContext:Ze,useCallback:xg,useContext:Ze,useEffect:Ed,useImperativeHandle:yg,useInsertionEffect:fg,useLayoutEffect:mg,useMemo:vg,useReducer:Uu,useRef:pg,useState:function(){return Uu(ko)},useDebugValue:Rd,useDeferredValue:function(n){var t=Qe();return Dt===null?t.memoizedState=n:Ng(t,Dt.memoizedState,n)},useTransition:function(){var n=Uu(ko)[0],t=Qe().memoizedState;return[n,t]},useMutableSource:og,useSyncExternalStore:ag,useId:wg,unstable_isNewReconciler:!1};function on(n,t){if(n&&n.defaultProps){t=Ct({},t),n=n.defaultProps;for(var e in n)t[e]===void 0&&(t[e]=n[e]);return t}return t}function uh(n,t,e,s){t=n.memoizedState,e=e(s,t),e=e==null?t:Ct({},t,e),n.memoizedState=e,n.lanes===0&&(n.updateQueue.baseState=e)}var Yl={isMounted:function(n){return(n=n._reactInternals)?yi(n)===n:!1},enqueueSetState:function(n,t,e){n=n._reactInternals;var s=ye(),i=zs(n),r=Zn(s,i);r.payload=t,e!=null&&(r.callback=e),t=Cs(n,r,i),t!==null&&(pn(t,n,i,s),qa(t,n,i))},enqueueReplaceState:function(n,t,e){n=n._reactInternals;var s=ye(),i=zs(n),r=Zn(s,i);r.tag=1,r.payload=t,e!=null&&(r.callback=e),t=Cs(n,r,i),t!==null&&(pn(t,n,i,s),qa(t,n,i))},enqueueForceUpdate:function(n,t){n=n._reactInternals;var e=ye(),s=zs(n),i=Zn(e,s);i.tag=2,t!=null&&(i.callback=t),t=Cs(n,i,s),t!==null&&(pn(t,n,s,e),qa(t,n,s))}};function nf(n,t,e,s,i,r,o){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(s,r,o):t.prototype&&t.prototype.isPureReactComponent?!To(e,s)||!To(i,r):!0}function _g(n,t,e){var s=!1,i=Vs,r=t.contextType;return typeof r=="object"&&r!==null?r=Ze(r):(i=_e(t)?ai:de.current,s=t.contextTypes,r=(s=s!=null)?gr(n,i):Vs),t=new t(e,r),n.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Yl,n.stateNode=t,t._reactInternals=n,s&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=r),t}function sf(n,t,e,s){n=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(e,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(e,s),t.state!==n&&Yl.enqueueReplaceState(t,t.state,null)}function ch(n,t,e,s){var i=n.stateNode;i.props=e,i.state=n.memoizedState,i.refs={},Md(n);var r=t.contextType;typeof r=="object"&&r!==null?i.context=Ze(r):(r=_e(t)?ai:de.current,i.context=gr(n,r)),i.state=n.memoizedState,r=t.getDerivedStateFromProps,typeof r=="function"&&(uh(n,t,r,e),i.state=n.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&Yl.enqueueReplaceState(i,i.state,null),xl(n,e,i,s),i.state=n.memoizedState),typeof i.componentDidMount=="function"&&(n.flags|=4194308)}function Nr(n,t){try{var e="",s=t;do e+=Zv(s),s=s.return;while(s);var i=e}catch(r){i=`
Error generating stack: `+r.message+`
`+r.stack}return{value:n,source:t,stack:i,digest:null}}function ju(n,t,e){return{value:n,source:null,stack:e??null,digest:t??null}}function hh(n,t){try{console.error(t.value)}catch(e){setTimeout(function(){throw e})}}var S2=typeof WeakMap=="function"?WeakMap:Map;function Cg(n,t,e){e=Zn(-1,e),e.tag=3,e.payload={element:null};var s=t.value;return e.callback=function(){Sl||(Sl=!0,wh=s),hh(n,t)},e}function Ag(n,t,e){e=Zn(-1,e),e.tag=3;var s=n.type.getDerivedStateFromError;if(typeof s=="function"){var i=t.value;e.payload=function(){return s(i)},e.callback=function(){hh(n,t)}}var r=n.stateNode;return r!==null&&typeof r.componentDidCatch=="function"&&(e.callback=function(){hh(n,t),typeof s!="function"&&(As===null?As=new Set([this]):As.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),e}function rf(n,t,e){var s=n.pingCache;if(s===null){s=n.pingCache=new S2;var i=new Set;s.set(t,i)}else i=s.get(t),i===void 0&&(i=new Set,s.set(t,i));i.has(e)||(i.add(e),n=O2.bind(null,n,t,e),t.then(n,n))}function of(n){do{var t;if((t=n.tag===13)&&(t=n.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return n;n=n.return}while(n!==null);return null}function af(n,t,e,s,i){return n.mode&1?(n.flags|=65536,n.lanes=i,n):(n===t?n.flags|=65536:(n.flags|=128,e.flags|=131072,e.flags&=-52805,e.tag===1&&(e.alternate===null?e.tag=17:(t=Zn(-1,1),t.tag=2,Cs(e,t,1))),e.lanes|=1),n)}var T2=ss.ReactCurrentOwner,Me=!1;function ge(n,t,e,s){t.child=n===null?ng(t,null,e,s):xr(t,n.child,e,s)}function lf(n,t,e,s,i){e=e.render;var r=t.ref;return rr(t,i),s=Ad(n,t,e,s,r,i),e=zd(),n!==null&&!Me?(t.updateQueue=n.updateQueue,t.flags&=-2053,n.lanes&=~i,ns(n,t,i)):(Nt&&e&&md(t),t.flags|=1,ge(n,t,s,i),t.child)}function uf(n,t,e,s,i){if(n===null){var r=e.type;return typeof r=="function"&&!Dd(r)&&r.defaultProps===void 0&&e.compare===null&&e.defaultProps===void 0?(t.tag=15,t.type=r,zg(n,t,r,s,i)):(n=Ka(e.type,null,s,t,t.mode,i),n.ref=t.ref,n.return=t,t.child=n)}if(r=n.child,!(n.lanes&i)){var o=r.memoizedProps;if(e=e.compare,e=e!==null?e:To,e(o,s)&&n.ref===t.ref)return ns(n,t,i)}return t.flags|=1,n=Es(r,s),n.ref=t.ref,n.return=t,t.child=n}function zg(n,t,e,s,i){if(n!==null){var r=n.memoizedProps;if(To(r,s)&&n.ref===t.ref)if(Me=!1,t.pendingProps=s=r,(n.lanes&i)!==0)n.flags&131072&&(Me=!0);else return t.lanes=n.lanes,ns(n,t,i)}return dh(n,t,e,s,i)}function Eg(n,t,e){var s=t.pendingProps,i=s.children,r=n!==null?n.memoizedState:null;if(s.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},pt(Zi,Ve),Ve|=e;else{if(!(e&1073741824))return n=r!==null?r.baseLanes|e:e,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:n,cachePool:null,transitions:null},t.updateQueue=null,pt(Zi,Ve),Ve|=n,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=r!==null?r.baseLanes:e,pt(Zi,Ve),Ve|=s}else r!==null?(s=r.baseLanes|e,t.memoizedState=null):s=e,pt(Zi,Ve),Ve|=s;return ge(n,t,i,e),t.child}function Rg(n,t){var e=t.ref;(n===null&&e!==null||n!==null&&n.ref!==e)&&(t.flags|=512,t.flags|=2097152)}function dh(n,t,e,s,i){var r=_e(e)?ai:de.current;return r=gr(t,r),rr(t,i),e=Ad(n,t,e,s,r,i),s=zd(),n!==null&&!Me?(t.updateQueue=n.updateQueue,t.flags&=-2053,n.lanes&=~i,ns(n,t,i)):(Nt&&s&&md(t),t.flags|=1,ge(n,t,e,i),t.child)}function cf(n,t,e,s,i){if(_e(e)){var r=!0;pl(t)}else r=!1;if(rr(t,i),t.stateNode===null)Za(n,t),_g(t,e,s),ch(t,e,s,i),s=!0;else if(n===null){var o=t.stateNode,a=t.memoizedProps;o.props=a;var l=o.context,u=e.contextType;typeof u=="object"&&u!==null?u=Ze(u):(u=_e(e)?ai:de.current,u=gr(t,u));var c=e.getDerivedStateFromProps,h=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==s||l!==u)&&sf(t,o,s,u),fs=!1;var d=t.memoizedState;o.state=d,xl(t,s,o,i),l=t.memoizedState,a!==s||d!==l||Te.current||fs?(typeof c=="function"&&(uh(t,e,c,s),l=t.memoizedState),(a=fs||nf(t,e,a,s,d,l,u))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=l),o.props=s,o.state=l,o.context=u,s=a):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{o=t.stateNode,ig(n,t),a=t.memoizedProps,u=t.type===t.elementType?a:on(t.type,a),o.props=u,h=t.pendingProps,d=o.context,l=e.contextType,typeof l=="object"&&l!==null?l=Ze(l):(l=_e(e)?ai:de.current,l=gr(t,l));var p=e.getDerivedStateFromProps;(c=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||d!==l)&&sf(t,o,s,l),fs=!1,d=t.memoizedState,o.state=d,xl(t,s,o,i);var f=t.memoizedState;a!==h||d!==f||Te.current||fs?(typeof p=="function"&&(uh(t,e,p,s),f=t.memoizedState),(u=fs||nf(t,e,u,s,d,f,l)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(s,f,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(s,f,l)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&d===n.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&d===n.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=f),o.props=s,o.state=f,o.context=l,s=u):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&d===n.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&d===n.memoizedState||(t.flags|=1024),s=!1)}return ph(n,t,e,s,r,i)}function ph(n,t,e,s,i,r){Rg(n,t);var o=(t.flags&128)!==0;if(!s&&!o)return i&&Xp(t,e,!1),ns(n,t,r);s=t.stateNode,T2.current=t;var a=o&&typeof e.getDerivedStateFromError!="function"?null:s.render();return t.flags|=1,n!==null&&o?(t.child=xr(t,n.child,null,r),t.child=xr(t,null,a,r)):ge(n,t,a,r),t.memoizedState=s.state,i&&Xp(t,e,!0),t.child}function kg(n){var t=n.stateNode;t.pendingContext?qp(n,t.pendingContext,t.pendingContext!==t.context):t.context&&qp(n,t.context,!1),Sd(n,t.containerInfo)}function hf(n,t,e,s,i){return yr(),yd(i),t.flags|=256,ge(n,t,e,s),t.child}var fh={dehydrated:null,treeContext:null,retryLane:0};function mh(n){return{baseLanes:n,cachePool:null,transitions:null}}function Vg(n,t,e){var s=t.pendingProps,i=Mt.current,r=!1,o=(t.flags&128)!==0,a;if((a=o)||(a=n!==null&&n.memoizedState===null?!1:(i&2)!==0),a?(r=!0,t.flags&=-129):(n===null||n.memoizedState!==null)&&(i|=1),pt(Mt,i&1),n===null)return ah(t),n=t.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(t.mode&1?n.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=s.children,n=s.fallback,r?(s=t.mode,r=t.child,o={mode:"hidden",children:o},!(s&1)&&r!==null?(r.childLanes=0,r.pendingProps=o):r=Jl(o,s,0,null),n=oi(n,s,e,null),r.return=t,n.return=t,r.sibling=n,t.child=r,t.child.memoizedState=mh(e),t.memoizedState=fh,n):kd(t,o));if(i=n.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return _2(n,t,o,s,a,i,e);if(r){r=s.fallback,o=t.mode,i=n.child,a=i.sibling;var l={mode:"hidden",children:s.children};return!(o&1)&&t.child!==i?(s=t.child,s.childLanes=0,s.pendingProps=l,t.deletions=null):(s=Es(i,l),s.subtreeFlags=i.subtreeFlags&14680064),a!==null?r=Es(a,r):(r=oi(r,o,e,null),r.flags|=2),r.return=t,s.return=t,s.sibling=r,t.child=s,s=r,r=t.child,o=n.child.memoizedState,o=o===null?mh(e):{baseLanes:o.baseLanes|e,cachePool:null,transitions:o.transitions},r.memoizedState=o,r.childLanes=n.childLanes&~e,t.memoizedState=fh,s}return r=n.child,n=r.sibling,s=Es(r,{mode:"visible",children:s.children}),!(t.mode&1)&&(s.lanes=e),s.return=t,s.sibling=null,n!==null&&(e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)),t.child=s,t.memoizedState=null,s}function kd(n,t){return t=Jl({mode:"visible",children:t},n.mode,0,null),t.return=n,n.child=t}function ga(n,t,e,s){return s!==null&&yd(s),xr(t,n.child,null,e),n=kd(t,t.pendingProps.children),n.flags|=2,t.memoizedState=null,n}function _2(n,t,e,s,i,r,o){if(e)return t.flags&256?(t.flags&=-257,s=ju(Error(F(422))),ga(n,t,o,s)):t.memoizedState!==null?(t.child=n.child,t.flags|=128,null):(r=s.fallback,i=t.mode,s=Jl({mode:"visible",children:s.children},i,0,null),r=oi(r,i,o,null),r.flags|=2,s.return=t,r.return=t,s.sibling=r,t.child=s,t.mode&1&&xr(t,n.child,null,o),t.child.memoizedState=mh(o),t.memoizedState=fh,r);if(!(t.mode&1))return ga(n,t,o,null);if(i.data==="$!"){if(s=i.nextSibling&&i.nextSibling.dataset,s)var a=s.dgst;return s=a,r=Error(F(419)),s=ju(r,s,void 0),ga(n,t,o,s)}if(a=(o&n.childLanes)!==0,Me||a){if(s=Xt,s!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(s.suspendedLanes|o)?0:i,i!==0&&i!==r.retryLane&&(r.retryLane=i,es(n,i),pn(s,n,i,-1))}return Od(),s=ju(Error(F(421))),ga(n,t,o,s)}return i.data==="$?"?(t.flags|=128,t.child=n.child,t=D2.bind(null,n),i._reactRetry=t,null):(n=r.treeContext,Le=_s(i.nextSibling),Pe=t,Nt=!0,un=null,n!==null&&(Ge[qe++]=Gn,Ge[qe++]=qn,Ge[qe++]=li,Gn=n.id,qn=n.overflow,li=t),t=kd(t,s.children),t.flags|=4096,t)}function df(n,t,e){n.lanes|=t;var s=n.alternate;s!==null&&(s.lanes|=t),lh(n.return,t,e)}function Wu(n,t,e,s,i){var r=n.memoizedState;r===null?n.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:e,tailMode:i}:(r.isBackwards=t,r.rendering=null,r.renderingStartTime=0,r.last=s,r.tail=e,r.tailMode=i)}function Lg(n,t,e){var s=t.pendingProps,i=s.revealOrder,r=s.tail;if(ge(n,t,s.children,e),s=Mt.current,s&2)s=s&1|2,t.flags|=128;else{if(n!==null&&n.flags&128)t:for(n=t.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&df(n,e,t);else if(n.tag===19)df(n,e,t);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break t;for(;n.sibling===null;){if(n.return===null||n.return===t)break t;n=n.return}n.sibling.return=n.return,n=n.sibling}s&=1}if(pt(Mt,s),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(e=t.child,i=null;e!==null;)n=e.alternate,n!==null&&vl(n)===null&&(i=e),e=e.sibling;e=i,e===null?(i=t.child,t.child=null):(i=e.sibling,e.sibling=null),Wu(t,!1,i,e,r);break;case"backwards":for(e=null,i=t.child,t.child=null;i!==null;){if(n=i.alternate,n!==null&&vl(n)===null){t.child=i;break}n=i.sibling,i.sibling=e,e=i,i=n}Wu(t,!0,e,null,r);break;case"together":Wu(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Za(n,t){!(t.mode&1)&&n!==null&&(n.alternate=null,t.alternate=null,t.flags|=2)}function ns(n,t,e){if(n!==null&&(t.dependencies=n.dependencies),ci|=t.lanes,!(e&t.childLanes))return null;if(n!==null&&t.child!==n.child)throw Error(F(153));if(t.child!==null){for(n=t.child,e=Es(n,n.pendingProps),t.child=e,e.return=t;n.sibling!==null;)n=n.sibling,e=e.sibling=Es(n,n.pendingProps),e.return=t;e.sibling=null}return t.child}function C2(n,t,e){switch(t.tag){case 3:kg(t),yr();break;case 5:rg(t);break;case 1:_e(t.type)&&pl(t);break;case 4:Sd(t,t.stateNode.containerInfo);break;case 10:var s=t.type._context,i=t.memoizedProps.value;pt(gl,s._currentValue),s._currentValue=i;break;case 13:if(s=t.memoizedState,s!==null)return s.dehydrated!==null?(pt(Mt,Mt.current&1),t.flags|=128,null):e&t.child.childLanes?Vg(n,t,e):(pt(Mt,Mt.current&1),n=ns(n,t,e),n!==null?n.sibling:null);pt(Mt,Mt.current&1);break;case 19:if(s=(e&t.childLanes)!==0,n.flags&128){if(s)return Lg(n,t,e);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),pt(Mt,Mt.current),s)break;return null;case 22:case 23:return t.lanes=0,Eg(n,t,e)}return ns(n,t,e)}var Ig,gh,Fg,Pg;Ig=function(n,t){for(var e=t.child;e!==null;){if(e.tag===5||e.tag===6)n.appendChild(e.stateNode);else if(e.tag!==4&&e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return;e=e.return}e.sibling.return=e.return,e=e.sibling}};gh=function(){};Fg=function(n,t,e,s){var i=n.memoizedProps;if(i!==s){n=t.stateNode,si(Rn.current);var r=null;switch(e){case"input":i=Dc(n,i),s=Dc(n,s),r=[];break;case"select":i=Ct({},i,{value:void 0}),s=Ct({},s,{value:void 0}),r=[];break;case"textarea":i=Uc(n,i),s=Uc(n,s),r=[];break;default:typeof i.onClick!="function"&&typeof s.onClick=="function"&&(n.onclick=hl)}Wc(e,s);var o;e=null;for(u in i)if(!s.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(o in a)a.hasOwnProperty(o)&&(e||(e={}),e[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(yo.hasOwnProperty(u)?r||(r=[]):(r=r||[]).push(u,null));for(u in s){var l=s[u];if(a=i!=null?i[u]:void 0,s.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(e||(e={}),e[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(e||(e={}),e[o]=l[o])}else e||(r||(r=[]),r.push(u,e)),e=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(r=r||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(r=r||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(yo.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&yt("scroll",n),r||a===l||(r=[])):(r=r||[]).push(u,l))}e&&(r=r||[]).push("style",e);var u=r;(t.updateQueue=u)&&(t.flags|=4)}};Pg=function(n,t,e,s){e!==s&&(t.flags|=4)};function Wr(n,t){if(!Nt)switch(n.tailMode){case"hidden":t=n.tail;for(var e=null;t!==null;)t.alternate!==null&&(e=t),t=t.sibling;e===null?n.tail=null:e.sibling=null;break;case"collapsed":e=n.tail;for(var s=null;e!==null;)e.alternate!==null&&(s=e),e=e.sibling;s===null?t||n.tail===null?n.tail=null:n.tail.sibling=null:s.sibling=null}}function oe(n){var t=n.alternate!==null&&n.alternate.child===n.child,e=0,s=0;if(t)for(var i=n.child;i!==null;)e|=i.lanes|i.childLanes,s|=i.subtreeFlags&14680064,s|=i.flags&14680064,i.return=n,i=i.sibling;else for(i=n.child;i!==null;)e|=i.lanes|i.childLanes,s|=i.subtreeFlags,s|=i.flags,i.return=n,i=i.sibling;return n.subtreeFlags|=s,n.childLanes=e,t}function A2(n,t,e){var s=t.pendingProps;switch(gd(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return oe(t),null;case 1:return _e(t.type)&&dl(),oe(t),null;case 3:return s=t.stateNode,vr(),xt(Te),xt(de),_d(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(n===null||n.child===null)&&(fa(t)?t.flags|=4:n===null||n.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,un!==null&&(Th(un),un=null))),gh(n,t),oe(t),null;case 5:Td(t);var i=si(Eo.current);if(e=t.type,n!==null&&t.stateNode!=null)Fg(n,t,e,s,i),n.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!s){if(t.stateNode===null)throw Error(F(166));return oe(t),null}if(n=si(Rn.current),fa(t)){s=t.stateNode,e=t.type;var r=t.memoizedProps;switch(s[Cn]=t,s[Ao]=r,n=(t.mode&1)!==0,e){case"dialog":yt("cancel",s),yt("close",s);break;case"iframe":case"object":case"embed":yt("load",s);break;case"video":case"audio":for(i=0;i<no.length;i++)yt(no[i],s);break;case"source":yt("error",s);break;case"img":case"image":case"link":yt("error",s),yt("load",s);break;case"details":yt("toggle",s);break;case"input":Np(s,r),yt("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!r.multiple},yt("invalid",s);break;case"textarea":Mp(s,r),yt("invalid",s)}Wc(e,r),i=null;for(var o in r)if(r.hasOwnProperty(o)){var a=r[o];o==="children"?typeof a=="string"?s.textContent!==a&&(r.suppressHydrationWarning!==!0&&pa(s.textContent,a,n),i=["children",a]):typeof a=="number"&&s.textContent!==""+a&&(r.suppressHydrationWarning!==!0&&pa(s.textContent,a,n),i=["children",""+a]):yo.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&yt("scroll",s)}switch(e){case"input":ra(s),wp(s,r,!0);break;case"textarea":ra(s),Sp(s);break;case"select":case"option":break;default:typeof r.onClick=="function"&&(s.onclick=hl)}s=i,t.updateQueue=s,s!==null&&(t.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=c0(e)),n==="http://www.w3.org/1999/xhtml"?e==="script"?(n=o.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof s.is=="string"?n=o.createElement(e,{is:s.is}):(n=o.createElement(e),e==="select"&&(o=n,s.multiple?o.multiple=!0:s.size&&(o.size=s.size))):n=o.createElementNS(n,e),n[Cn]=t,n[Ao]=s,Ig(n,t,!1,!1),t.stateNode=n;t:{switch(o=Hc(e,s),e){case"dialog":yt("cancel",n),yt("close",n),i=s;break;case"iframe":case"object":case"embed":yt("load",n),i=s;break;case"video":case"audio":for(i=0;i<no.length;i++)yt(no[i],n);i=s;break;case"source":yt("error",n),i=s;break;case"img":case"image":case"link":yt("error",n),yt("load",n),i=s;break;case"details":yt("toggle",n),i=s;break;case"input":Np(n,s),i=Dc(n,s),yt("invalid",n);break;case"option":i=s;break;case"select":n._wrapperState={wasMultiple:!!s.multiple},i=Ct({},s,{value:void 0}),yt("invalid",n);break;case"textarea":Mp(n,s),i=Uc(n,s),yt("invalid",n);break;default:i=s}Wc(e,i),a=i;for(r in a)if(a.hasOwnProperty(r)){var l=a[r];r==="style"?p0(n,l):r==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&h0(n,l)):r==="children"?typeof l=="string"?(e!=="textarea"||l!=="")&&xo(n,l):typeof l=="number"&&xo(n,""+l):r!=="suppressContentEditableWarning"&&r!=="suppressHydrationWarning"&&r!=="autoFocus"&&(yo.hasOwnProperty(r)?l!=null&&r==="onScroll"&&yt("scroll",n):l!=null&&ed(n,r,l,o))}switch(e){case"input":ra(n),wp(n,s,!1);break;case"textarea":ra(n),Sp(n);break;case"option":s.value!=null&&n.setAttribute("value",""+ks(s.value));break;case"select":n.multiple=!!s.multiple,r=s.value,r!=null?er(n,!!s.multiple,r,!1):s.defaultValue!=null&&er(n,!!s.multiple,s.defaultValue,!0);break;default:typeof i.onClick=="function"&&(n.onclick=hl)}switch(e){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break t;case"img":s=!0;break t;default:s=!1}}s&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return oe(t),null;case 6:if(n&&t.stateNode!=null)Pg(n,t,n.memoizedProps,s);else{if(typeof s!="string"&&t.stateNode===null)throw Error(F(166));if(e=si(Eo.current),si(Rn.current),fa(t)){if(s=t.stateNode,e=t.memoizedProps,s[Cn]=t,(r=s.nodeValue!==e)&&(n=Pe,n!==null))switch(n.tag){case 3:pa(s.nodeValue,e,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&pa(s.nodeValue,e,(n.mode&1)!==0)}r&&(t.flags|=4)}else s=(e.nodeType===9?e:e.ownerDocument).createTextNode(s),s[Cn]=t,t.stateNode=s}return oe(t),null;case 13:if(xt(Mt),s=t.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(Nt&&Le!==null&&t.mode&1&&!(t.flags&128))tg(),yr(),t.flags|=98560,r=!1;else if(r=fa(t),s!==null&&s.dehydrated!==null){if(n===null){if(!r)throw Error(F(318));if(r=t.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(F(317));r[Cn]=t}else yr(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;oe(t),r=!1}else un!==null&&(Th(un),un=null),r=!0;if(!r)return t.flags&65536?t:null}return t.flags&128?(t.lanes=e,t):(s=s!==null,s!==(n!==null&&n.memoizedState!==null)&&s&&(t.child.flags|=8192,t.mode&1&&(n===null||Mt.current&1?Ut===0&&(Ut=3):Od())),t.updateQueue!==null&&(t.flags|=4),oe(t),null);case 4:return vr(),gh(n,t),n===null&&_o(t.stateNode.containerInfo),oe(t),null;case 10:return Nd(t.type._context),oe(t),null;case 17:return _e(t.type)&&dl(),oe(t),null;case 19:if(xt(Mt),r=t.memoizedState,r===null)return oe(t),null;if(s=(t.flags&128)!==0,o=r.rendering,o===null)if(s)Wr(r,!1);else{if(Ut!==0||n!==null&&n.flags&128)for(n=t.child;n!==null;){if(o=vl(n),o!==null){for(t.flags|=128,Wr(r,!1),s=o.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),t.subtreeFlags=0,s=e,e=t.child;e!==null;)r=e,n=s,r.flags&=14680066,o=r.alternate,o===null?(r.childLanes=0,r.lanes=n,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=o.childLanes,r.lanes=o.lanes,r.child=o.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=o.memoizedProps,r.memoizedState=o.memoizedState,r.updateQueue=o.updateQueue,r.type=o.type,n=o.dependencies,r.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),e=e.sibling;return pt(Mt,Mt.current&1|2),t.child}n=n.sibling}r.tail!==null&&Rt()>wr&&(t.flags|=128,s=!0,Wr(r,!1),t.lanes=4194304)}else{if(!s)if(n=vl(o),n!==null){if(t.flags|=128,s=!0,e=n.updateQueue,e!==null&&(t.updateQueue=e,t.flags|=4),Wr(r,!0),r.tail===null&&r.tailMode==="hidden"&&!o.alternate&&!Nt)return oe(t),null}else 2*Rt()-r.renderingStartTime>wr&&e!==1073741824&&(t.flags|=128,s=!0,Wr(r,!1),t.lanes=4194304);r.isBackwards?(o.sibling=t.child,t.child=o):(e=r.last,e!==null?e.sibling=o:t.child=o,r.last=o)}return r.tail!==null?(t=r.tail,r.rendering=t,r.tail=t.sibling,r.renderingStartTime=Rt(),t.sibling=null,e=Mt.current,pt(Mt,s?e&1|2:e&1),t):(oe(t),null);case 22:case 23:return Pd(),s=t.memoizedState!==null,n!==null&&n.memoizedState!==null!==s&&(t.flags|=8192),s&&t.mode&1?Ve&1073741824&&(oe(t),t.subtreeFlags&6&&(t.flags|=8192)):oe(t),null;case 24:return null;case 25:return null}throw Error(F(156,t.tag))}function z2(n,t){switch(gd(t),t.tag){case 1:return _e(t.type)&&dl(),n=t.flags,n&65536?(t.flags=n&-65537|128,t):null;case 3:return vr(),xt(Te),xt(de),_d(),n=t.flags,n&65536&&!(n&128)?(t.flags=n&-65537|128,t):null;case 5:return Td(t),null;case 13:if(xt(Mt),n=t.memoizedState,n!==null&&n.dehydrated!==null){if(t.alternate===null)throw Error(F(340));yr()}return n=t.flags,n&65536?(t.flags=n&-65537|128,t):null;case 19:return xt(Mt),null;case 4:return vr(),null;case 10:return Nd(t.type._context),null;case 22:case 23:return Pd(),null;case 24:return null;default:return null}}var ya=!1,ue=!1,E2=typeof WeakSet=="function"?WeakSet:Set,B=null;function Yi(n,t){var e=n.ref;if(e!==null)if(typeof e=="function")try{e(null)}catch(s){At(n,t,s)}else e.current=null}function yh(n,t,e){try{e()}catch(s){At(n,t,s)}}var pf=!1;function R2(n,t){if(th=ll,n=U0(),fd(n)){if("selectionStart"in n)var e={start:n.selectionStart,end:n.selectionEnd};else t:{e=(e=n.ownerDocument)&&e.defaultView||window;var s=e.getSelection&&e.getSelection();if(s&&s.rangeCount!==0){e=s.anchorNode;var i=s.anchorOffset,r=s.focusNode;s=s.focusOffset;try{e.nodeType,r.nodeType}catch{e=null;break t}var o=0,a=-1,l=-1,u=0,c=0,h=n,d=null;e:for(;;){for(var p;h!==e||i!==0&&h.nodeType!==3||(a=o+i),h!==r||s!==0&&h.nodeType!==3||(l=o+s),h.nodeType===3&&(o+=h.nodeValue.length),(p=h.firstChild)!==null;)d=h,h=p;for(;;){if(h===n)break e;if(d===e&&++u===i&&(a=o),d===r&&++c===s&&(l=o),(p=h.nextSibling)!==null)break;h=d,d=h.parentNode}h=p}e=a===-1||l===-1?null:{start:a,end:l}}else e=null}e=e||{start:0,end:0}}else e=null;for(eh={focusedElem:n,selectionRange:e},ll=!1,B=t;B!==null;)if(t=B,n=t.child,(t.subtreeFlags&1028)!==0&&n!==null)n.return=t,B=n;else for(;B!==null;){t=B;try{var f=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(f!==null){var y=f.memoizedProps,M=f.memoizedState,m=t.stateNode,g=m.getSnapshotBeforeUpdate(t.elementType===t.type?y:on(t.type,y),M);m.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var x=t.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(F(163))}}catch(S){At(t,t.return,S)}if(n=t.sibling,n!==null){n.return=t.return,B=n;break}B=t.return}return f=pf,pf=!1,f}function co(n,t,e){var s=t.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var i=s=s.next;do{if((i.tag&n)===n){var r=i.destroy;i.destroy=void 0,r!==void 0&&yh(t,e,r)}i=i.next}while(i!==s)}}function Zl(n,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var e=t=t.next;do{if((e.tag&n)===n){var s=e.create;e.destroy=s()}e=e.next}while(e!==t)}}function xh(n){var t=n.ref;if(t!==null){var e=n.stateNode;switch(n.tag){case 5:n=e;break;default:n=e}typeof t=="function"?t(n):t.current=n}}function Og(n){var t=n.alternate;t!==null&&(n.alternate=null,Og(t)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(t=n.stateNode,t!==null&&(delete t[Cn],delete t[Ao],delete t[ih],delete t[d2],delete t[p2])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function Dg(n){return n.tag===5||n.tag===3||n.tag===4}function ff(n){t:for(;;){for(;n.sibling===null;){if(n.return===null||Dg(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue t;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function vh(n,t,e){var s=n.tag;if(s===5||s===6)n=n.stateNode,t?e.nodeType===8?e.parentNode.insertBefore(n,t):e.insertBefore(n,t):(e.nodeType===8?(t=e.parentNode,t.insertBefore(n,e)):(t=e,t.appendChild(n)),e=e._reactRootContainer,e!=null||t.onclick!==null||(t.onclick=hl));else if(s!==4&&(n=n.child,n!==null))for(vh(n,t,e),n=n.sibling;n!==null;)vh(n,t,e),n=n.sibling}function Nh(n,t,e){var s=n.tag;if(s===5||s===6)n=n.stateNode,t?e.insertBefore(n,t):e.appendChild(n);else if(s!==4&&(n=n.child,n!==null))for(Nh(n,t,e),n=n.sibling;n!==null;)Nh(n,t,e),n=n.sibling}var Zt=null,an=!1;function os(n,t,e){for(e=e.child;e!==null;)bg(n,t,e),e=e.sibling}function bg(n,t,e){if(En&&typeof En.onCommitFiberUnmount=="function")try{En.onCommitFiberUnmount(jl,e)}catch{}switch(e.tag){case 5:ue||Yi(e,t);case 6:var s=Zt,i=an;Zt=null,os(n,t,e),Zt=s,an=i,Zt!==null&&(an?(n=Zt,e=e.stateNode,n.nodeType===8?n.parentNode.removeChild(e):n.removeChild(e)):Zt.removeChild(e.stateNode));break;case 18:Zt!==null&&(an?(n=Zt,e=e.stateNode,n.nodeType===8?Pu(n.parentNode,e):n.nodeType===1&&Pu(n,e),Mo(n)):Pu(Zt,e.stateNode));break;case 4:s=Zt,i=an,Zt=e.stateNode.containerInfo,an=!0,os(n,t,e),Zt=s,an=i;break;case 0:case 11:case 14:case 15:if(!ue&&(s=e.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){i=s=s.next;do{var r=i,o=r.destroy;r=r.tag,o!==void 0&&(r&2||r&4)&&yh(e,t,o),i=i.next}while(i!==s)}os(n,t,e);break;case 1:if(!ue&&(Yi(e,t),s=e.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=e.memoizedProps,s.state=e.memoizedState,s.componentWillUnmount()}catch(a){At(e,t,a)}os(n,t,e);break;case 21:os(n,t,e);break;case 22:e.mode&1?(ue=(s=ue)||e.memoizedState!==null,os(n,t,e),ue=s):os(n,t,e);break;default:os(n,t,e)}}function mf(n){var t=n.updateQueue;if(t!==null){n.updateQueue=null;var e=n.stateNode;e===null&&(e=n.stateNode=new E2),t.forEach(function(s){var i=b2.bind(null,n,s);e.has(s)||(e.add(s),s.then(i,i))})}}function tn(n,t){var e=t.deletions;if(e!==null)for(var s=0;s<e.length;s++){var i=e[s];try{var r=n,o=t,a=o;t:for(;a!==null;){switch(a.tag){case 5:Zt=a.stateNode,an=!1;break t;case 3:Zt=a.stateNode.containerInfo,an=!0;break t;case 4:Zt=a.stateNode.containerInfo,an=!0;break t}a=a.return}if(Zt===null)throw Error(F(160));bg(r,o,i),Zt=null,an=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){At(i,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Bg(t,n),t=t.sibling}function Bg(n,t){var e=n.alternate,s=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(tn(t,n),wn(n),s&4){try{co(3,n,n.return),Zl(3,n)}catch(y){At(n,n.return,y)}try{co(5,n,n.return)}catch(y){At(n,n.return,y)}}break;case 1:tn(t,n),wn(n),s&512&&e!==null&&Yi(e,e.return);break;case 5:if(tn(t,n),wn(n),s&512&&e!==null&&Yi(e,e.return),n.flags&32){var i=n.stateNode;try{xo(i,"")}catch(y){At(n,n.return,y)}}if(s&4&&(i=n.stateNode,i!=null)){var r=n.memoizedProps,o=e!==null?e.memoizedProps:r,a=n.type,l=n.updateQueue;if(n.updateQueue=null,l!==null)try{a==="input"&&r.type==="radio"&&r.name!=null&&l0(i,r),Hc(a,o);var u=Hc(a,r);for(o=0;o<l.length;o+=2){var c=l[o],h=l[o+1];c==="style"?p0(i,h):c==="dangerouslySetInnerHTML"?h0(i,h):c==="children"?xo(i,h):ed(i,c,h,u)}switch(a){case"input":bc(i,r);break;case"textarea":u0(i,r);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!r.multiple;var p=r.value;p!=null?er(i,!!r.multiple,p,!1):d!==!!r.multiple&&(r.defaultValue!=null?er(i,!!r.multiple,r.defaultValue,!0):er(i,!!r.multiple,r.multiple?[]:"",!1))}i[Ao]=r}catch(y){At(n,n.return,y)}}break;case 6:if(tn(t,n),wn(n),s&4){if(n.stateNode===null)throw Error(F(162));i=n.stateNode,r=n.memoizedProps;try{i.nodeValue=r}catch(y){At(n,n.return,y)}}break;case 3:if(tn(t,n),wn(n),s&4&&e!==null&&e.memoizedState.isDehydrated)try{Mo(t.containerInfo)}catch(y){At(n,n.return,y)}break;case 4:tn(t,n),wn(n);break;case 13:tn(t,n),wn(n),i=n.child,i.flags&8192&&(r=i.memoizedState!==null,i.stateNode.isHidden=r,!r||i.alternate!==null&&i.alternate.memoizedState!==null||(Id=Rt())),s&4&&mf(n);break;case 22:if(c=e!==null&&e.memoizedState!==null,n.mode&1?(ue=(u=ue)||c,tn(t,n),ue=u):tn(t,n),wn(n),s&8192){if(u=n.memoizedState!==null,(n.stateNode.isHidden=u)&&!c&&n.mode&1)for(B=n,c=n.child;c!==null;){for(h=B=c;B!==null;){switch(d=B,p=d.child,d.tag){case 0:case 11:case 14:case 15:co(4,d,d.return);break;case 1:Yi(d,d.return);var f=d.stateNode;if(typeof f.componentWillUnmount=="function"){s=d,e=d.return;try{t=s,f.props=t.memoizedProps,f.state=t.memoizedState,f.componentWillUnmount()}catch(y){At(s,e,y)}}break;case 5:Yi(d,d.return);break;case 22:if(d.memoizedState!==null){yf(h);continue}}p!==null?(p.return=d,B=p):yf(h)}c=c.sibling}t:for(c=null,h=n;;){if(h.tag===5){if(c===null){c=h;try{i=h.stateNode,u?(r=i.style,typeof r.setProperty=="function"?r.setProperty("display","none","important"):r.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=d0("display",o))}catch(y){At(n,n.return,y)}}}else if(h.tag===6){if(c===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(y){At(n,n.return,y)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===n)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===n)break t;for(;h.sibling===null;){if(h.return===null||h.return===n)break t;c===h&&(c=null),h=h.return}c===h&&(c=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:tn(t,n),wn(n),s&4&&mf(n);break;case 21:break;default:tn(t,n),wn(n)}}function wn(n){var t=n.flags;if(t&2){try{t:{for(var e=n.return;e!==null;){if(Dg(e)){var s=e;break t}e=e.return}throw Error(F(160))}switch(s.tag){case 5:var i=s.stateNode;s.flags&32&&(xo(i,""),s.flags&=-33);var r=ff(n);Nh(n,r,i);break;case 3:case 4:var o=s.stateNode.containerInfo,a=ff(n);vh(n,a,o);break;default:throw Error(F(161))}}catch(l){At(n,n.return,l)}n.flags&=-3}t&4096&&(n.flags&=-4097)}function k2(n,t,e){B=n,Ug(n)}function Ug(n,t,e){for(var s=(n.mode&1)!==0;B!==null;){var i=B,r=i.child;if(i.tag===22&&s){var o=i.memoizedState!==null||ya;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||ue;a=ya;var u=ue;if(ya=o,(ue=l)&&!u)for(B=i;B!==null;)o=B,l=o.child,o.tag===22&&o.memoizedState!==null?xf(i):l!==null?(l.return=o,B=l):xf(i);for(;r!==null;)B=r,Ug(r),r=r.sibling;B=i,ya=a,ue=u}gf(n)}else i.subtreeFlags&8772&&r!==null?(r.return=i,B=r):gf(n)}}function gf(n){for(;B!==null;){var t=B;if(t.flags&8772){var e=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:ue||Zl(5,t);break;case 1:var s=t.stateNode;if(t.flags&4&&!ue)if(e===null)s.componentDidMount();else{var i=t.elementType===t.type?e.memoizedProps:on(t.type,e.memoizedProps);s.componentDidUpdate(i,e.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var r=t.updateQueue;r!==null&&Kp(t,r,s);break;case 3:var o=t.updateQueue;if(o!==null){if(e=null,t.child!==null)switch(t.child.tag){case 5:e=t.child.stateNode;break;case 1:e=t.child.stateNode}Kp(t,o,e)}break;case 5:var a=t.stateNode;if(e===null&&t.flags&4){e=a;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&e.focus();break;case"img":l.src&&(e.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var h=c.dehydrated;h!==null&&Mo(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(F(163))}ue||t.flags&512&&xh(t)}catch(d){At(t,t.return,d)}}if(t===n){B=null;break}if(e=t.sibling,e!==null){e.return=t.return,B=e;break}B=t.return}}function yf(n){for(;B!==null;){var t=B;if(t===n){B=null;break}var e=t.sibling;if(e!==null){e.return=t.return,B=e;break}B=t.return}}function xf(n){for(;B!==null;){var t=B;try{switch(t.tag){case 0:case 11:case 15:var e=t.return;try{Zl(4,t)}catch(l){At(t,e,l)}break;case 1:var s=t.stateNode;if(typeof s.componentDidMount=="function"){var i=t.return;try{s.componentDidMount()}catch(l){At(t,i,l)}}var r=t.return;try{xh(t)}catch(l){At(t,r,l)}break;case 5:var o=t.return;try{xh(t)}catch(l){At(t,o,l)}}}catch(l){At(t,t.return,l)}if(t===n){B=null;break}var a=t.sibling;if(a!==null){a.return=t.return,B=a;break}B=t.return}}var V2=Math.ceil,Ml=ss.ReactCurrentDispatcher,Vd=ss.ReactCurrentOwner,Ye=ss.ReactCurrentBatchConfig,nt=0,Xt=null,Ft=null,te=0,Ve=0,Zi=bs(0),Ut=0,Lo=null,ci=0,Ql=0,Ld=0,ho=null,we=null,Id=0,wr=1/0,jn=null,Sl=!1,wh=null,As=null,xa=!1,vs=null,Tl=0,po=0,Mh=null,Qa=-1,Ja=0;function ye(){return nt&6?Rt():Qa!==-1?Qa:Qa=Rt()}function zs(n){return n.mode&1?nt&2&&te!==0?te&-te:m2.transition!==null?(Ja===0&&(Ja=_0()),Ja):(n=at,n!==0||(n=window.event,n=n===void 0?16:V0(n.type)),n):1}function pn(n,t,e,s){if(50<po)throw po=0,Mh=null,Error(F(185));Ho(n,e,s),(!(nt&2)||n!==Xt)&&(n===Xt&&(!(nt&2)&&(Ql|=e),Ut===4&&ys(n,te)),Ce(n,s),e===1&&nt===0&&!(t.mode&1)&&(wr=Rt()+500,ql&&Bs()))}function Ce(n,t){var e=n.callbackNode;mN(n,t);var s=al(n,n===Xt?te:0);if(s===0)e!==null&&Cp(e),n.callbackNode=null,n.callbackPriority=0;else if(t=s&-s,n.callbackPriority!==t){if(e!=null&&Cp(e),t===1)n.tag===0?f2(vf.bind(null,n)):Q0(vf.bind(null,n)),c2(function(){!(nt&6)&&Bs()}),e=null;else{switch(C0(s)){case 1:e=od;break;case 4:e=S0;break;case 16:e=ol;break;case 536870912:e=T0;break;default:e=ol}e=Yg(e,jg.bind(null,n))}n.callbackPriority=t,n.callbackNode=e}}function jg(n,t){if(Qa=-1,Ja=0,nt&6)throw Error(F(327));var e=n.callbackNode;if(or()&&n.callbackNode!==e)return null;var s=al(n,n===Xt?te:0);if(s===0)return null;if(s&30||s&n.expiredLanes||t)t=_l(n,s);else{t=s;var i=nt;nt|=2;var r=Hg();(Xt!==n||te!==t)&&(jn=null,wr=Rt()+500,ri(n,t));do try{F2();break}catch(a){Wg(n,a)}while(!0);vd(),Ml.current=r,nt=i,Ft!==null?t=0:(Xt=null,te=0,t=Ut)}if(t!==0){if(t===2&&(i=Yc(n),i!==0&&(s=i,t=Sh(n,i))),t===1)throw e=Lo,ri(n,0),ys(n,s),Ce(n,Rt()),e;if(t===6)ys(n,s);else{if(i=n.current.alternate,!(s&30)&&!L2(i)&&(t=_l(n,s),t===2&&(r=Yc(n),r!==0&&(s=r,t=Sh(n,r))),t===1))throw e=Lo,ri(n,0),ys(n,s),Ce(n,Rt()),e;switch(n.finishedWork=i,n.finishedLanes=s,t){case 0:case 1:throw Error(F(345));case 2:Qs(n,we,jn);break;case 3:if(ys(n,s),(s&130023424)===s&&(t=Id+500-Rt(),10<t)){if(al(n,0)!==0)break;if(i=n.suspendedLanes,(i&s)!==s){ye(),n.pingedLanes|=n.suspendedLanes&i;break}n.timeoutHandle=sh(Qs.bind(null,n,we,jn),t);break}Qs(n,we,jn);break;case 4:if(ys(n,s),(s&4194240)===s)break;for(t=n.eventTimes,i=-1;0<s;){var o=31-dn(s);r=1<<o,o=t[o],o>i&&(i=o),s&=~r}if(s=i,s=Rt()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*V2(s/1960))-s,10<s){n.timeoutHandle=sh(Qs.bind(null,n,we,jn),s);break}Qs(n,we,jn);break;case 5:Qs(n,we,jn);break;default:throw Error(F(329))}}}return Ce(n,Rt()),n.callbackNode===e?jg.bind(null,n):null}function Sh(n,t){var e=ho;return n.current.memoizedState.isDehydrated&&(ri(n,t).flags|=256),n=_l(n,t),n!==2&&(t=we,we=e,t!==null&&Th(t)),n}function Th(n){we===null?we=n:we.push.apply(we,n)}function L2(n){for(var t=n;;){if(t.flags&16384){var e=t.updateQueue;if(e!==null&&(e=e.stores,e!==null))for(var s=0;s<e.length;s++){var i=e[s],r=i.getSnapshot;i=i.value;try{if(!yn(r(),i))return!1}catch{return!1}}}if(e=t.child,t.subtreeFlags&16384&&e!==null)e.return=t,t=e;else{if(t===n)break;for(;t.sibling===null;){if(t.return===null||t.return===n)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function ys(n,t){for(t&=~Ld,t&=~Ql,n.suspendedLanes|=t,n.pingedLanes&=~t,n=n.expirationTimes;0<t;){var e=31-dn(t),s=1<<e;n[e]=-1,t&=~s}}function vf(n){if(nt&6)throw Error(F(327));or();var t=al(n,0);if(!(t&1))return Ce(n,Rt()),null;var e=_l(n,t);if(n.tag!==0&&e===2){var s=Yc(n);s!==0&&(t=s,e=Sh(n,s))}if(e===1)throw e=Lo,ri(n,0),ys(n,t),Ce(n,Rt()),e;if(e===6)throw Error(F(345));return n.finishedWork=n.current.alternate,n.finishedLanes=t,Qs(n,we,jn),Ce(n,Rt()),null}function Fd(n,t){var e=nt;nt|=1;try{return n(t)}finally{nt=e,nt===0&&(wr=Rt()+500,ql&&Bs())}}function hi(n){vs!==null&&vs.tag===0&&!(nt&6)&&or();var t=nt;nt|=1;var e=Ye.transition,s=at;try{if(Ye.transition=null,at=1,n)return n()}finally{at=s,Ye.transition=e,nt=t,!(nt&6)&&Bs()}}function Pd(){Ve=Zi.current,xt(Zi)}function ri(n,t){n.finishedWork=null,n.finishedLanes=0;var e=n.timeoutHandle;if(e!==-1&&(n.timeoutHandle=-1,u2(e)),Ft!==null)for(e=Ft.return;e!==null;){var s=e;switch(gd(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&dl();break;case 3:vr(),xt(Te),xt(de),_d();break;case 5:Td(s);break;case 4:vr();break;case 13:xt(Mt);break;case 19:xt(Mt);break;case 10:Nd(s.type._context);break;case 22:case 23:Pd()}e=e.return}if(Xt=n,Ft=n=Es(n.current,null),te=Ve=t,Ut=0,Lo=null,Ld=Ql=ci=0,we=ho=null,ni!==null){for(t=0;t<ni.length;t++)if(e=ni[t],s=e.interleaved,s!==null){e.interleaved=null;var i=s.next,r=e.pending;if(r!==null){var o=r.next;r.next=i,s.next=o}e.pending=s}ni=null}return n}function Wg(n,t){do{var e=Ft;try{if(vd(),Xa.current=wl,Nl){for(var s=_t.memoizedState;s!==null;){var i=s.queue;i!==null&&(i.pending=null),s=s.next}Nl=!1}if(ui=0,$t=Dt=_t=null,uo=!1,Ro=0,Vd.current=null,e===null||e.return===null){Ut=1,Lo=t,Ft=null;break}t:{var r=n,o=e.return,a=e,l=t;if(t=te,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=a,h=c.tag;if(!(c.mode&1)&&(h===0||h===11||h===15)){var d=c.alternate;d?(c.updateQueue=d.updateQueue,c.memoizedState=d.memoizedState,c.lanes=d.lanes):(c.updateQueue=null,c.memoizedState=null)}var p=of(o);if(p!==null){p.flags&=-257,af(p,o,a,r,t),p.mode&1&&rf(r,u,t),t=p,l=u;var f=t.updateQueue;if(f===null){var y=new Set;y.add(l),t.updateQueue=y}else f.add(l);break t}else{if(!(t&1)){rf(r,u,t),Od();break t}l=Error(F(426))}}else if(Nt&&a.mode&1){var M=of(o);if(M!==null){!(M.flags&65536)&&(M.flags|=256),af(M,o,a,r,t),yd(Nr(l,a));break t}}r=l=Nr(l,a),Ut!==4&&(Ut=2),ho===null?ho=[r]:ho.push(r),r=o;do{switch(r.tag){case 3:r.flags|=65536,t&=-t,r.lanes|=t;var m=Cg(r,l,t);Jp(r,m);break t;case 1:a=l;var g=r.type,x=r.stateNode;if(!(r.flags&128)&&(typeof g.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(As===null||!As.has(x)))){r.flags|=65536,t&=-t,r.lanes|=t;var S=Ag(r,a,t);Jp(r,S);break t}}r=r.return}while(r!==null)}Gg(e)}catch(E){t=E,Ft===e&&e!==null&&(Ft=e=e.return);continue}break}while(!0)}function Hg(){var n=Ml.current;return Ml.current=wl,n===null?wl:n}function Od(){(Ut===0||Ut===3||Ut===2)&&(Ut=4),Xt===null||!(ci&268435455)&&!(Ql&268435455)||ys(Xt,te)}function _l(n,t){var e=nt;nt|=2;var s=Hg();(Xt!==n||te!==t)&&(jn=null,ri(n,t));do try{I2();break}catch(i){Wg(n,i)}while(!0);if(vd(),nt=e,Ml.current=s,Ft!==null)throw Error(F(261));return Xt=null,te=0,Ut}function I2(){for(;Ft!==null;)$g(Ft)}function F2(){for(;Ft!==null&&!oN();)$g(Ft)}function $g(n){var t=Xg(n.alternate,n,Ve);n.memoizedProps=n.pendingProps,t===null?Gg(n):Ft=t,Vd.current=null}function Gg(n){var t=n;do{var e=t.alternate;if(n=t.return,t.flags&32768){if(e=z2(e,t),e!==null){e.flags&=32767,Ft=e;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Ut=6,Ft=null;return}}else if(e=A2(e,t,Ve),e!==null){Ft=e;return}if(t=t.sibling,t!==null){Ft=t;return}Ft=t=n}while(t!==null);Ut===0&&(Ut=5)}function Qs(n,t,e){var s=at,i=Ye.transition;try{Ye.transition=null,at=1,P2(n,t,e,s)}finally{Ye.transition=i,at=s}return null}function P2(n,t,e,s){do or();while(vs!==null);if(nt&6)throw Error(F(327));e=n.finishedWork;var i=n.finishedLanes;if(e===null)return null;if(n.finishedWork=null,n.finishedLanes=0,e===n.current)throw Error(F(177));n.callbackNode=null,n.callbackPriority=0;var r=e.lanes|e.childLanes;if(gN(n,r),n===Xt&&(Ft=Xt=null,te=0),!(e.subtreeFlags&2064)&&!(e.flags&2064)||xa||(xa=!0,Yg(ol,function(){return or(),null})),r=(e.flags&15990)!==0,e.subtreeFlags&15990||r){r=Ye.transition,Ye.transition=null;var o=at;at=1;var a=nt;nt|=4,Vd.current=null,R2(n,e),Bg(e,n),n2(eh),ll=!!th,eh=th=null,n.current=e,k2(e),aN(),nt=a,at=o,Ye.transition=r}else n.current=e;if(xa&&(xa=!1,vs=n,Tl=i),r=n.pendingLanes,r===0&&(As=null),cN(e.stateNode),Ce(n,Rt()),t!==null)for(s=n.onRecoverableError,e=0;e<t.length;e++)i=t[e],s(i.value,{componentStack:i.stack,digest:i.digest});if(Sl)throw Sl=!1,n=wh,wh=null,n;return Tl&1&&n.tag!==0&&or(),r=n.pendingLanes,r&1?n===Mh?po++:(po=0,Mh=n):po=0,Bs(),null}function or(){if(vs!==null){var n=C0(Tl),t=Ye.transition,e=at;try{if(Ye.transition=null,at=16>n?16:n,vs===null)var s=!1;else{if(n=vs,vs=null,Tl=0,nt&6)throw Error(F(331));var i=nt;for(nt|=4,B=n.current;B!==null;){var r=B,o=r.child;if(B.flags&16){var a=r.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(B=u;B!==null;){var c=B;switch(c.tag){case 0:case 11:case 15:co(8,c,r)}var h=c.child;if(h!==null)h.return=c,B=h;else for(;B!==null;){c=B;var d=c.sibling,p=c.return;if(Og(c),c===u){B=null;break}if(d!==null){d.return=p,B=d;break}B=p}}}var f=r.alternate;if(f!==null){var y=f.child;if(y!==null){f.child=null;do{var M=y.sibling;y.sibling=null,y=M}while(y!==null)}}B=r}}if(r.subtreeFlags&2064&&o!==null)o.return=r,B=o;else t:for(;B!==null;){if(r=B,r.flags&2048)switch(r.tag){case 0:case 11:case 15:co(9,r,r.return)}var m=r.sibling;if(m!==null){m.return=r.return,B=m;break t}B=r.return}}var g=n.current;for(B=g;B!==null;){o=B;var x=o.child;if(o.subtreeFlags&2064&&x!==null)x.return=o,B=x;else t:for(o=g;B!==null;){if(a=B,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Zl(9,a)}}catch(E){At(a,a.return,E)}if(a===o){B=null;break t}var S=a.sibling;if(S!==null){S.return=a.return,B=S;break t}B=a.return}}if(nt=i,Bs(),En&&typeof En.onPostCommitFiberRoot=="function")try{En.onPostCommitFiberRoot(jl,n)}catch{}s=!0}return s}finally{at=e,Ye.transition=t}}return!1}function Nf(n,t,e){t=Nr(e,t),t=Cg(n,t,1),n=Cs(n,t,1),t=ye(),n!==null&&(Ho(n,1,t),Ce(n,t))}function At(n,t,e){if(n.tag===3)Nf(n,n,e);else for(;t!==null;){if(t.tag===3){Nf(t,n,e);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(As===null||!As.has(s))){n=Nr(e,n),n=Ag(t,n,1),t=Cs(t,n,1),n=ye(),t!==null&&(Ho(t,1,n),Ce(t,n));break}}t=t.return}}function O2(n,t,e){var s=n.pingCache;s!==null&&s.delete(t),t=ye(),n.pingedLanes|=n.suspendedLanes&e,Xt===n&&(te&e)===e&&(Ut===4||Ut===3&&(te&130023424)===te&&500>Rt()-Id?ri(n,0):Ld|=e),Ce(n,t)}function qg(n,t){t===0&&(n.mode&1?(t=la,la<<=1,!(la&130023424)&&(la=4194304)):t=1);var e=ye();n=es(n,t),n!==null&&(Ho(n,t,e),Ce(n,e))}function D2(n){var t=n.memoizedState,e=0;t!==null&&(e=t.retryLane),qg(n,e)}function b2(n,t){var e=0;switch(n.tag){case 13:var s=n.stateNode,i=n.memoizedState;i!==null&&(e=i.retryLane);break;case 19:s=n.stateNode;break;default:throw Error(F(314))}s!==null&&s.delete(t),qg(n,e)}var Xg;Xg=function(n,t,e){if(n!==null)if(n.memoizedProps!==t.pendingProps||Te.current)Me=!0;else{if(!(n.lanes&e)&&!(t.flags&128))return Me=!1,C2(n,t,e);Me=!!(n.flags&131072)}else Me=!1,Nt&&t.flags&1048576&&J0(t,ml,t.index);switch(t.lanes=0,t.tag){case 2:var s=t.type;Za(n,t),n=t.pendingProps;var i=gr(t,de.current);rr(t,e),i=Ad(null,t,s,n,i,e);var r=zd();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,_e(s)?(r=!0,pl(t)):r=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Md(t),i.updater=Yl,t.stateNode=i,i._reactInternals=t,ch(t,s,n,e),t=ph(null,t,s,!0,r,e)):(t.tag=0,Nt&&r&&md(t),ge(null,t,i,e),t=t.child),t;case 16:s=t.elementType;t:{switch(Za(n,t),n=t.pendingProps,i=s._init,s=i(s._payload),t.type=s,i=t.tag=U2(s),n=on(s,n),i){case 0:t=dh(null,t,s,n,e);break t;case 1:t=cf(null,t,s,n,e);break t;case 11:t=lf(null,t,s,n,e);break t;case 14:t=uf(null,t,s,on(s.type,n),e);break t}throw Error(F(306,s,""))}return t;case 0:return s=t.type,i=t.pendingProps,i=t.elementType===s?i:on(s,i),dh(n,t,s,i,e);case 1:return s=t.type,i=t.pendingProps,i=t.elementType===s?i:on(s,i),cf(n,t,s,i,e);case 3:t:{if(kg(t),n===null)throw Error(F(387));s=t.pendingProps,r=t.memoizedState,i=r.element,ig(n,t),xl(t,s,null,e);var o=t.memoizedState;if(s=o.element,r.isDehydrated)if(r={element:s,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=r,t.memoizedState=r,t.flags&256){i=Nr(Error(F(423)),t),t=hf(n,t,s,e,i);break t}else if(s!==i){i=Nr(Error(F(424)),t),t=hf(n,t,s,e,i);break t}else for(Le=_s(t.stateNode.containerInfo.firstChild),Pe=t,Nt=!0,un=null,e=ng(t,null,s,e),t.child=e;e;)e.flags=e.flags&-3|4096,e=e.sibling;else{if(yr(),s===i){t=ns(n,t,e);break t}ge(n,t,s,e)}t=t.child}return t;case 5:return rg(t),n===null&&ah(t),s=t.type,i=t.pendingProps,r=n!==null?n.memoizedProps:null,o=i.children,nh(s,i)?o=null:r!==null&&nh(s,r)&&(t.flags|=32),Rg(n,t),ge(n,t,o,e),t.child;case 6:return n===null&&ah(t),null;case 13:return Vg(n,t,e);case 4:return Sd(t,t.stateNode.containerInfo),s=t.pendingProps,n===null?t.child=xr(t,null,s,e):ge(n,t,s,e),t.child;case 11:return s=t.type,i=t.pendingProps,i=t.elementType===s?i:on(s,i),lf(n,t,s,i,e);case 7:return ge(n,t,t.pendingProps,e),t.child;case 8:return ge(n,t,t.pendingProps.children,e),t.child;case 12:return ge(n,t,t.pendingProps.children,e),t.child;case 10:t:{if(s=t.type._context,i=t.pendingProps,r=t.memoizedProps,o=i.value,pt(gl,s._currentValue),s._currentValue=o,r!==null)if(yn(r.value,o)){if(r.children===i.children&&!Te.current){t=ns(n,t,e);break t}}else for(r=t.child,r!==null&&(r.return=t);r!==null;){var a=r.dependencies;if(a!==null){o=r.child;for(var l=a.firstContext;l!==null;){if(l.context===s){if(r.tag===1){l=Zn(-1,e&-e),l.tag=2;var u=r.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}r.lanes|=e,l=r.alternate,l!==null&&(l.lanes|=e),lh(r.return,e,t),a.lanes|=e;break}l=l.next}}else if(r.tag===10)o=r.type===t.type?null:r.child;else if(r.tag===18){if(o=r.return,o===null)throw Error(F(341));o.lanes|=e,a=o.alternate,a!==null&&(a.lanes|=e),lh(o,e,t),o=r.sibling}else o=r.child;if(o!==null)o.return=r;else for(o=r;o!==null;){if(o===t){o=null;break}if(r=o.sibling,r!==null){r.return=o.return,o=r;break}o=o.return}r=o}ge(n,t,i.children,e),t=t.child}return t;case 9:return i=t.type,s=t.pendingProps.children,rr(t,e),i=Ze(i),s=s(i),t.flags|=1,ge(n,t,s,e),t.child;case 14:return s=t.type,i=on(s,t.pendingProps),i=on(s.type,i),uf(n,t,s,i,e);case 15:return zg(n,t,t.type,t.pendingProps,e);case 17:return s=t.type,i=t.pendingProps,i=t.elementType===s?i:on(s,i),Za(n,t),t.tag=1,_e(s)?(n=!0,pl(t)):n=!1,rr(t,e),_g(t,s,i),ch(t,s,i,e),ph(null,t,s,!0,n,e);case 19:return Lg(n,t,e);case 22:return Eg(n,t,e)}throw Error(F(156,t.tag))};function Yg(n,t){return M0(n,t)}function B2(n,t,e,s){this.tag=n,this.key=e,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Xe(n,t,e,s){return new B2(n,t,e,s)}function Dd(n){return n=n.prototype,!(!n||!n.isReactComponent)}function U2(n){if(typeof n=="function")return Dd(n)?1:0;if(n!=null){if(n=n.$$typeof,n===sd)return 11;if(n===id)return 14}return 2}function Es(n,t){var e=n.alternate;return e===null?(e=Xe(n.tag,t,n.key,n.mode),e.elementType=n.elementType,e.type=n.type,e.stateNode=n.stateNode,e.alternate=n,n.alternate=e):(e.pendingProps=t,e.type=n.type,e.flags=0,e.subtreeFlags=0,e.deletions=null),e.flags=n.flags&14680064,e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},e.sibling=n.sibling,e.index=n.index,e.ref=n.ref,e}function Ka(n,t,e,s,i,r){var o=2;if(s=n,typeof n=="function")Dd(n)&&(o=1);else if(typeof n=="string")o=5;else t:switch(n){case Bi:return oi(e.children,i,r,t);case nd:o=8,i|=8;break;case Ic:return n=Xe(12,e,t,i|2),n.elementType=Ic,n.lanes=r,n;case Fc:return n=Xe(13,e,t,i),n.elementType=Fc,n.lanes=r,n;case Pc:return n=Xe(19,e,t,i),n.elementType=Pc,n.lanes=r,n;case r0:return Jl(e,i,r,t);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case s0:o=10;break t;case i0:o=9;break t;case sd:o=11;break t;case id:o=14;break t;case ps:o=16,s=null;break t}throw Error(F(130,n==null?n:typeof n,""))}return t=Xe(o,e,t,i),t.elementType=n,t.type=s,t.lanes=r,t}function oi(n,t,e,s){return n=Xe(7,n,s,t),n.lanes=e,n}function Jl(n,t,e,s){return n=Xe(22,n,s,t),n.elementType=r0,n.lanes=e,n.stateNode={isHidden:!1},n}function Hu(n,t,e){return n=Xe(6,n,null,t),n.lanes=e,n}function $u(n,t,e){return t=Xe(4,n.children!==null?n.children:[],n.key,t),t.lanes=e,t.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},t}function j2(n,t,e,s,i){this.tag=t,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=_u(0),this.expirationTimes=_u(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=_u(0),this.identifierPrefix=s,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function bd(n,t,e,s,i,r,o,a,l){return n=new j2(n,t,e,a,l),t===1?(t=1,r===!0&&(t|=8)):t=0,r=Xe(3,null,null,t),n.current=r,r.stateNode=n,r.memoizedState={element:s,isDehydrated:e,cache:null,transitions:null,pendingSuspenseBoundaries:null},Md(r),n}function W2(n,t,e){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:bi,key:s==null?null:""+s,children:n,containerInfo:t,implementation:e}}function Zg(n){if(!n)return Vs;n=n._reactInternals;t:{if(yi(n)!==n||n.tag!==1)throw Error(F(170));var t=n;do{switch(t.tag){case 3:t=t.stateNode.context;break t;case 1:if(_e(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break t}}t=t.return}while(t!==null);throw Error(F(171))}if(n.tag===1){var e=n.type;if(_e(e))return Z0(n,e,t)}return t}function Qg(n,t,e,s,i,r,o,a,l){return n=bd(e,s,!0,n,i,r,o,a,l),n.context=Zg(null),e=n.current,s=ye(),i=zs(e),r=Zn(s,i),r.callback=t??null,Cs(e,r,i),n.current.lanes=i,Ho(n,i,s),Ce(n,s),n}function Kl(n,t,e,s){var i=t.current,r=ye(),o=zs(i);return e=Zg(e),t.context===null?t.context=e:t.pendingContext=e,t=Zn(r,o),t.payload={element:n},s=s===void 0?null:s,s!==null&&(t.callback=s),n=Cs(i,t,o),n!==null&&(pn(n,i,o,r),qa(n,i,o)),o}function Cl(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function wf(n,t){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var e=n.retryLane;n.retryLane=e!==0&&e<t?e:t}}function Bd(n,t){wf(n,t),(n=n.alternate)&&wf(n,t)}function H2(){return null}var Jg=typeof reportError=="function"?reportError:function(n){console.error(n)};function Ud(n){this._internalRoot=n}tu.prototype.render=Ud.prototype.render=function(n){var t=this._internalRoot;if(t===null)throw Error(F(409));Kl(n,t,null,null)};tu.prototype.unmount=Ud.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var t=n.containerInfo;hi(function(){Kl(null,n,null,null)}),t[ts]=null}};function tu(n){this._internalRoot=n}tu.prototype.unstable_scheduleHydration=function(n){if(n){var t=E0();n={blockedOn:null,target:n,priority:t};for(var e=0;e<gs.length&&t!==0&&t<gs[e].priority;e++);gs.splice(e,0,n),e===0&&k0(n)}};function jd(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function eu(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function Mf(){}function $2(n,t,e,s,i){if(i){if(typeof s=="function"){var r=s;s=function(){var u=Cl(o);r.call(u)}}var o=Qg(t,s,n,0,null,!1,!1,"",Mf);return n._reactRootContainer=o,n[ts]=o.current,_o(n.nodeType===8?n.parentNode:n),hi(),o}for(;i=n.lastChild;)n.removeChild(i);if(typeof s=="function"){var a=s;s=function(){var u=Cl(l);a.call(u)}}var l=bd(n,0,!1,null,null,!1,!1,"",Mf);return n._reactRootContainer=l,n[ts]=l.current,_o(n.nodeType===8?n.parentNode:n),hi(function(){Kl(t,l,e,s)}),l}function nu(n,t,e,s,i){var r=e._reactRootContainer;if(r){var o=r;if(typeof i=="function"){var a=i;i=function(){var l=Cl(o);a.call(l)}}Kl(t,o,n,i)}else o=$2(e,t,n,i,s);return Cl(o)}A0=function(n){switch(n.tag){case 3:var t=n.stateNode;if(t.current.memoizedState.isDehydrated){var e=eo(t.pendingLanes);e!==0&&(ad(t,e|1),Ce(t,Rt()),!(nt&6)&&(wr=Rt()+500,Bs()))}break;case 13:hi(function(){var s=es(n,1);if(s!==null){var i=ye();pn(s,n,1,i)}}),Bd(n,1)}};ld=function(n){if(n.tag===13){var t=es(n,134217728);if(t!==null){var e=ye();pn(t,n,134217728,e)}Bd(n,134217728)}};z0=function(n){if(n.tag===13){var t=zs(n),e=es(n,t);if(e!==null){var s=ye();pn(e,n,t,s)}Bd(n,t)}};E0=function(){return at};R0=function(n,t){var e=at;try{return at=n,t()}finally{at=e}};Gc=function(n,t,e){switch(t){case"input":if(bc(n,e),t=e.name,e.type==="radio"&&t!=null){for(e=n;e.parentNode;)e=e.parentNode;for(e=e.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<e.length;t++){var s=e[t];if(s!==n&&s.form===n.form){var i=Gl(s);if(!i)throw Error(F(90));a0(s),bc(s,i)}}}break;case"textarea":u0(n,e);break;case"select":t=e.value,t!=null&&er(n,!!e.multiple,t,!1)}};g0=Fd;y0=hi;var G2={usingClientEntryPoint:!1,Events:[Go,Hi,Gl,f0,m0,Fd]},Hr={findFiberByHostInstance:ei,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},q2={bundleType:Hr.bundleType,version:Hr.version,rendererPackageName:Hr.rendererPackageName,rendererConfig:Hr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ss.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=N0(n),n===null?null:n.stateNode},findFiberByHostInstance:Hr.findFiberByHostInstance||H2,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var va=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!va.isDisabled&&va.supportsFiber)try{jl=va.inject(q2),En=va}catch{}}Ue.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=G2;Ue.createPortal=function(n,t){var e=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!jd(t))throw Error(F(200));return W2(n,t,null,e)};Ue.createRoot=function(n,t){if(!jd(n))throw Error(F(299));var e=!1,s="",i=Jg;return t!=null&&(t.unstable_strictMode===!0&&(e=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=bd(n,1,!1,null,null,e,!1,s,i),n[ts]=t.current,_o(n.nodeType===8?n.parentNode:n),new Ud(t)};Ue.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var t=n._reactInternals;if(t===void 0)throw typeof n.render=="function"?Error(F(188)):(n=Object.keys(n).join(","),Error(F(268,n)));return n=N0(t),n=n===null?null:n.stateNode,n};Ue.flushSync=function(n){return hi(n)};Ue.hydrate=function(n,t,e){if(!eu(t))throw Error(F(200));return nu(null,n,t,!0,e)};Ue.hydrateRoot=function(n,t,e){if(!jd(n))throw Error(F(405));var s=e!=null&&e.hydratedSources||null,i=!1,r="",o=Jg;if(e!=null&&(e.unstable_strictMode===!0&&(i=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(o=e.onRecoverableError)),t=Qg(t,null,n,1,e??null,i,!1,r,o),n[ts]=t.current,_o(n),s)for(n=0;n<s.length;n++)e=s[n],i=e._getVersion,i=i(e._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[e,i]:t.mutableSourceEagerHydrationData.push(e,i);return new tu(t)};Ue.render=function(n,t,e){if(!eu(t))throw Error(F(200));return nu(null,n,t,!1,e)};Ue.unmountComponentAtNode=function(n){if(!eu(n))throw Error(F(40));return n._reactRootContainer?(hi(function(){nu(null,null,n,!1,function(){n._reactRootContainer=null,n[ts]=null})}),!0):!1};Ue.unstable_batchedUpdates=Fd;Ue.unstable_renderSubtreeIntoContainer=function(n,t,e,s){if(!eu(e))throw Error(F(200));if(n==null||n._reactInternals===void 0)throw Error(F(38));return nu(n,t,e,!1,s)};Ue.version="18.3.1-next-f1338f8080-20240426";function Kg(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Kg)}catch(n){console.error(n)}}Kg(),Km.exports=Ue;var X2=Km.exports,Sf=X2;Vc.createRoot=Sf.createRoot,Vc.hydrateRoot=Sf.hydrateRoot;function Y2(n){return n.trigger?X.jsx("div",{className:"popup",children:X.jsxs("div",{className:"popup-inner",children:[X.jsx("button",{className:"close-btn",onClick:()=>n.setTrigger(!1),children:"X"}),n.children]})}):""}const Z2="/assets/portrait-DpZriVwV.jpg",Q2="data:image/svg+xml,%3c?xml%20version='1.0'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2024'%20width='48px'%20height='48px'%20fill='%23222'%3e%3cpath%20d='M%2012%200%20C%2011.4%200%2011%200.4%2011%201%20L%2011%202%20C%2011%202.6%2011.4%203%2012%203%20C%2012.6%203%2013%202.6%2013%202%20L%2013%201%20C%2013%200.4%2012.6%200%2012%200%20z%20M%204.1992188%203.1992188%20C%203.9492188%203.1992187%203.7%203.3%203.5%203.5%20C%203.1%203.9%203.1%204.5003906%203.5%204.9003906%20L%204.1992188%205.5996094%20C%204.5992187%205.9996094%205.1996094%205.9996094%205.5996094%205.5996094%20C%205.9996094%205.1996094%205.9996094%204.5992188%205.5996094%204.1992188%20L%204.9003906%203.5%20C%204.7003906%203.3%204.4492188%203.1992188%204.1992188%203.1992188%20z%20M%2019.800781%203.1992188%20C%2019.550781%203.1992188%2019.299609%203.3%2019.099609%203.5%20L%2018.400391%204.1992188%20C%2018.000391%204.5992187%2018.000391%205.1996094%2018.400391%205.5996094%20C%2018.800391%205.9996094%2019.400781%205.9996094%2019.800781%205.5996094%20L%2020.5%204.9003906%20C%2020.9%204.5003906%2020.9%203.9%2020.5%203.5%20C%2020.3%203.3%2020.050781%203.1992188%2019.800781%203.1992188%20z%20M%2012%205%20A%207%207%200%200%200%205%2012%20A%207%207%200%200%200%2012%2019%20A%207%207%200%200%200%2019%2012%20A%207%207%200%200%200%2012%205%20z%20M%201%2011%20C%200.4%2011%200%2011.4%200%2012%20C%200%2012.6%200.4%2013%201%2013%20L%202%2013%20C%202.6%2013%203%2012.6%203%2012%20C%203%2011.4%202.6%2011%202%2011%20L%201%2011%20z%20M%2022%2011%20C%2021.4%2011%2021%2011.4%2021%2012%20C%2021%2012.6%2021.4%2013%2022%2013%20L%2023%2013%20C%2023.6%2013%2024%2012.6%2024%2012%20C%2024%2011.4%2023.6%2011%2023%2011%20L%2022%2011%20z%20M%204.9003906%2018.099609%20C%204.6503906%2018.099609%204.3992188%2018.200391%204.1992188%2018.400391%20L%203.5%2019.099609%20C%203.1%2019.499609%203.1%2020.1%203.5%2020.5%20C%203.9%2020.9%204.5003906%2020.9%204.9003906%2020.5%20L%205.5996094%2019.800781%20C%205.9996094%2019.400781%205.9996094%2018.800391%205.5996094%2018.400391%20C%205.3996094%2018.200391%205.1503906%2018.099609%204.9003906%2018.099609%20z%20M%2019.099609%2018.099609%20C%2018.849609%2018.099609%2018.600391%2018.200391%2018.400391%2018.400391%20C%2018.000391%2018.800391%2018.000391%2019.400781%2018.400391%2019.800781%20L%2019.099609%2020.5%20C%2019.499609%2020.9%2020.1%2020.9%2020.5%2020.5%20C%2020.9%2020.1%2020.9%2019.499609%2020.5%2019.099609%20L%2019.800781%2018.400391%20C%2019.600781%2018.200391%2019.349609%2018.099609%2019.099609%2018.099609%20z%20M%2012%2021%20C%2011.4%2021%2011%2021.4%2011%2022%20L%2011%2023%20C%2011%2023.6%2011.4%2024%2012%2024%20C%2012.6%2024%2013%2023.6%2013%2023%20L%2013%2022%20C%2013%2021.4%2012.6%2021%2012%2021%20z'/%3e%3c/svg%3e",J2="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20x='0px'%20y='0px'%20width='100'%20height='100'%20viewBox='0%200%20100%20100'%3e%3cpath%20fill='%2378a1d1'%20d='M69.307,81.654h-39c-6.6,0-12-5.4-12-12v-39c0-6.6,5.4-12,12-12h39c6.6,0,12,5.4,12,12v39C81.307,76.254,75.907,81.654,69.307,81.654z'%3e%3c/path%3e%3cpath%20fill='%231f212b'%20d='M69.307,82.654h-39c-7.168,0-13-5.832-13-13v-39c0-7.168,5.832-13,13-13h39c7.168,0,13,5.832,13,13v39C82.307,76.822,76.476,82.654,69.307,82.654z%20M30.307,19.654c-6.065,0-11,4.935-11,11v39c0,6.065,4.935,11,11,11h39c6.065,0,11-4.935,11-11v-39c0-6.065-4.935-11-11-11H30.307z'%3e%3c/path%3e%3cpath%20fill='%2378a1d1'%20d='M76.807,48.154v18.663c0,5.685-4.652,10.337-10.337,10.337H33.144c-5.685,0-10.337-4.652-10.337-10.337V33.491c0-5.685,4.652-10.337,10.337-10.337h33.663'%3e%3c/path%3e%3cpath%20fill='%231f212b'%20d='M66.47,77.654H33.144c-5.976,0-10.837-4.861-10.837-10.837V33.49c0-5.976,4.861-10.837,10.837-10.837h33.663c0.276,0,0.5,0.224,0.5,0.5s-0.224,0.5-0.5,0.5H33.144c-5.424,0-9.837,4.413-9.837,9.837v33.326c0,5.424,4.413,9.837,9.837,9.837H66.47c5.424,0,9.837-4.413,9.837-9.837V48.154c0-0.276,0.224-0.5,0.5-0.5s0.5,0.224,0.5,0.5v18.663C77.307,72.792,72.446,77.654,66.47,77.654z'%3e%3c/path%3e%3cpath%20fill='%231f212b'%20d='M76.807%2046.654c-.276%200-.5-.224-.5-.5v-4c0-.276.224-.5.5-.5s.5.224.5.5v4C77.307%2046.43%2077.083%2046.654%2076.807%2046.654zM76.807%2040.654c-.276%200-.5-.224-.5-.5v-2c0-.276.224-.5.5-.5s.5.224.5.5v2C77.307%2040.43%2077.083%2040.654%2076.807%2040.654z'%3e%3c/path%3e%3cpath%20fill='%23fdfcee'%20d='M64.807,53.974v10.179h-6l-0.083-10.092c0-2.556-1.163-4.372-3.456-4.372c-1.751,0-2.788,1.172-3.248,2.309c-0.165,0.404-0.213,0.973-0.213,1.542v10.613H45.73c0,0,0.082-17.219,0-19h6.077v2.933c-0.014,0.022-0.027,0.045-0.041,0.067h0.041v-0.067c0.845-1.41,2.387-3.053,5.752-3.053C61.727,45.026,64.807,47.624,64.807,53.974z%20M38.825,36.195c-1.877,0-3.101,1.287-3.101,2.979c0,1.654,1.188,2.979,3.03,2.979h0.036c1.913,0,3.101-1.325,3.101-2.979C41.849,37.483,40.696,36.195,38.825,36.195z%20M35.807,64.154h6v-19h-6V64.154z'%3e%3c/path%3e%3cpath%20fill='%231f212b'%20d='M64.807,64.654h-6c-0.274,0-0.498-0.221-0.5-0.496l-0.083-10.092c0-1.168-0.288-3.876-2.956-3.876c-1.784,0-2.541,1.396-2.784,1.997c-0.117,0.287-0.176,0.743-0.176,1.354v10.613c0,0.276-0.224,0.5-0.5,0.5H45.73c-0.133,0-0.261-0.053-0.354-0.147s-0.146-0.222-0.146-0.355c0.001-0.172,0.081-17.226,0-18.975c-0.006-0.136,0.043-0.27,0.138-0.368c0.095-0.099,0.225-0.155,0.362-0.155h6.077c0.276,0,0.5,0.224,0.5,0.5v1.43c1.288-1.381,3.071-2.038,5.271-2.05c2.188,0,3.968,0.668,5.288,1.986c1.62,1.617,2.441,4.125,2.441,7.456v10.179C65.307,64.43,65.083,64.654,64.807,64.654z%20M59.303,63.654h5.004v-9.679c0-3.055-0.723-5.325-2.148-6.748c-1.125-1.124-2.667-1.693-4.582-1.693c-0.006,0-0.011,0-0.017,0c-3.215,0-4.561,1.557-5.292,2.756c-0.075,0.199-0.253,0.364-0.461,0.364c-0.181,0-0.368-0.098-0.457-0.255c-0.077-0.137-0.1-0.3-0.043-0.441v-2.304h-5.064c0.053,3.027,0.001,15.303-0.011,18h5.075V53.54c0-0.753,0.082-1.319,0.25-1.731c0.663-1.64,2.051-2.62,3.71-2.62c2.44,0,3.956,1.867,3.956,4.873L59.303,63.654z%20M41.807,64.654h-6c-0.276,0-0.5-0.224-0.5-0.5v-19c0-0.276,0.224-0.5,0.5-0.5h6c0.276,0,0.5,0.224,0.5,0.5v19C42.307,64.43,42.083,64.654,41.807,64.654z%20M36.307,63.654h5v-18h-5V63.654z%20M38.789,42.654c-2.081,0-3.565-1.463-3.565-3.479s1.515-3.479,3.602-3.479c2.048,0,3.515,1.426,3.565,3.467C42.391,41.191,40.876,42.654,38.789,42.654z%20M38.825,36.695c-1.532,0-2.602,1.02-2.602,2.479c0,1.459,1.041,2.479,2.53,2.479c1.567,0,2.637-1.02,2.637-2.479C41.353,37.673,40.346,36.695,38.825,36.695z'%3e%3c/path%3e%3c/svg%3e",K2="/assets/githubIcon-BjzVLW37.svg",tw="/assets/Sunny(Soeui)_Jeong_Resume-AIsD78AU.pdf",Tf={VERTEX:"vertex",FRAGMENT:"fragment"},ft={NONE:"none",FRAME:"frame",RENDER:"render",OBJECT:"object"},su=["x","y","z","w"];/**
 * @license
 * Copyright 2010-2024 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const ty="165",_h=0,ey=1,_f=1,Cf=100,Af=204,zf=205,Ef=3,Wd=0,Io=0,ew=1,nw=2,sw=3,iw=4,rw=6,ny=300,Rf=1e3,so=1001,kf=1002,Ls=1003,sy=1006,iy=1008,ow=1009,aw=1014,ry=1015,lw=1016,uw=1020,cw=1023,Gu=1026,Vf=1027,Is=0,hw=1,oy="",Wn="srgb",zr="srgb-linear",dw="display-p3",ay="display-p3-linear",Ch="linear",Lf="srgb",If="rec709",Ff="p3",_i=7680,Pf=519,pw=513,fw=515,Al=35044,Ah=35048,Xn=2e3,Fo=2001;class xi{addEventListener(t,e){this._listeners===void 0&&(this._listeners={});const s=this._listeners;s[t]===void 0&&(s[t]=[]),s[t].indexOf(e)===-1&&s[t].push(e)}hasEventListener(t,e){if(this._listeners===void 0)return!1;const s=this._listeners;return s[t]!==void 0&&s[t].indexOf(e)!==-1}removeEventListener(t,e){if(this._listeners===void 0)return;const i=this._listeners[t];if(i!==void 0){const r=i.indexOf(e);r!==-1&&i.splice(r,1)}}dispatchEvent(t){if(this._listeners===void 0)return;const s=this._listeners[t.type];if(s!==void 0){t.target=this;const i=s.slice(0);for(let r=0,o=i.length;r<o;r++)i[r].call(this,t);t.target=null}}}const ae=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let Of=1234567;const fo=Math.PI/180,Po=180/Math.PI;function Qn(){const n=Math.random()*4294967295|0,t=Math.random()*4294967295|0,e=Math.random()*4294967295|0,s=Math.random()*4294967295|0;return(ae[n&255]+ae[n>>8&255]+ae[n>>16&255]+ae[n>>24&255]+"-"+ae[t&255]+ae[t>>8&255]+"-"+ae[t>>16&15|64]+ae[t>>24&255]+"-"+ae[e&63|128]+ae[e>>8&255]+"-"+ae[e>>16&255]+ae[e>>24&255]+ae[s&255]+ae[s>>8&255]+ae[s>>16&255]+ae[s>>24&255]).toLowerCase()}function ce(n,t,e){return Math.max(t,Math.min(e,n))}function Hd(n,t){return(n%t+t)%t}function mw(n,t,e,s,i){return s+(n-t)*(i-s)/(e-t)}function gw(n,t,e){return n!==t?(e-n)/(t-n):0}function mo(n,t,e){return(1-e)*n+e*t}function yw(n,t,e,s){return mo(n,t,1-Math.exp(-e*s))}function xw(n,t=1){return t-Math.abs(Hd(n,t*2)-t)}function vw(n,t,e){return n<=t?0:n>=e?1:(n=(n-t)/(e-t),n*n*(3-2*n))}function Nw(n,t,e){return n<=t?0:n>=e?1:(n=(n-t)/(e-t),n*n*n*(n*(n*6-15)+10))}function ww(n,t){return n+Math.floor(Math.random()*(t-n+1))}function Mw(n,t){return n+Math.random()*(t-n)}function Sw(n){return n*(.5-Math.random())}function Tw(n){n!==void 0&&(Of=n);let t=Of+=1831565813;return t=Math.imul(t^t>>>15,t|1),t^=t+Math.imul(t^t>>>7,t|61),((t^t>>>14)>>>0)/4294967296}function _w(n){return n*fo}function Cw(n){return n*Po}function Aw(n){return(n&n-1)===0&&n!==0}function zw(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function Ew(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function Rw(n,t,e,s,i){const r=Math.cos,o=Math.sin,a=r(e/2),l=o(e/2),u=r((t+s)/2),c=o((t+s)/2),h=r((t-s)/2),d=o((t-s)/2),p=r((s-t)/2),f=o((s-t)/2);switch(i){case"XYX":n.set(a*c,l*h,l*d,a*u);break;case"YZY":n.set(l*d,a*c,l*h,a*u);break;case"ZXZ":n.set(l*h,l*d,a*c,a*u);break;case"XZX":n.set(a*c,l*f,l*p,a*u);break;case"YXY":n.set(l*p,a*c,l*f,a*u);break;case"ZYZ":n.set(l*f,l*p,a*c,a*u);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}function cn(n,t){switch(t.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function ot(n,t){switch(t.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}const ly={DEG2RAD:fo,RAD2DEG:Po,generateUUID:Qn,clamp:ce,euclideanModulo:Hd,mapLinear:mw,inverseLerp:gw,lerp:mo,damp:yw,pingpong:xw,smoothstep:vw,smootherstep:Nw,randInt:ww,randFloat:Mw,randFloatSpread:Sw,seededRandom:Tw,degToRad:_w,radToDeg:Cw,isPowerOfTwo:Aw,ceilPowerOfTwo:zw,floorPowerOfTwo:Ew,setQuaternionFromProperEuler:Rw,normalize:ot,denormalize:cn};class Q{constructor(t=0,e=0){Q.prototype.isVector2=!0,this.x=t,this.y=e}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,e){return this.x=t,this.y=e,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t){return this.x+=t.x,this.y+=t.y,this}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){const e=this.x,s=this.y,i=t.elements;return this.x=i[0]*e+i[3]*s+i[6],this.y=i[1]*e+i[4]*s+i[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this}clampLength(t,e){const s=this.length();return this.divideScalar(s||1).multiplyScalar(Math.max(t,Math.min(e,s)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(e===0)return Math.PI/2;const s=this.dot(t)/e;return Math.acos(ce(s,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,s=this.y-t.y;return e*e+s*s}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this}lerpVectors(t,e,s){return this.x=t.x+(e.x-t.x)*s,this.y=t.y+(e.y-t.y)*s,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this}rotateAround(t,e){const s=Math.cos(e),i=Math.sin(e),r=this.x-t.x,o=this.y-t.y;return this.x=r*s-o*i+t.x,this.y=r*i+o*s+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class In{constructor(t,e,s,i,r,o,a,l,u){In.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],t!==void 0&&this.set(t,e,s,i,r,o,a,l,u)}set(t,e,s,i,r,o,a,l,u){const c=this.elements;return c[0]=t,c[1]=i,c[2]=a,c[3]=e,c[4]=r,c[5]=l,c[6]=s,c[7]=o,c[8]=u,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(t){const e=this.elements,s=t.elements;return e[0]=s[0],e[1]=s[1],e[2]=s[2],e[3]=s[3],e[4]=s[4],e[5]=s[5],e[6]=s[6],e[7]=s[7],e[8]=s[8],this}extractBasis(t,e,s){return t.setFromMatrix3Column(this,0),e.setFromMatrix3Column(this,1),s.setFromMatrix3Column(this,2),this}setFromMatrix4(t){const e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const s=t.elements,i=e.elements,r=this.elements,o=s[0],a=s[3],l=s[6],u=s[1],c=s[4],h=s[7],d=s[2],p=s[5],f=s[8],y=i[0],M=i[3],m=i[6],g=i[1],x=i[4],S=i[7],E=i[2],L=i[5],A=i[8];return r[0]=o*y+a*g+l*E,r[3]=o*M+a*x+l*L,r[6]=o*m+a*S+l*A,r[1]=u*y+c*g+h*E,r[4]=u*M+c*x+h*L,r[7]=u*m+c*S+h*A,r[2]=d*y+p*g+f*E,r[5]=d*M+p*x+f*L,r[8]=d*m+p*S+f*A,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this}determinant(){const t=this.elements,e=t[0],s=t[1],i=t[2],r=t[3],o=t[4],a=t[5],l=t[6],u=t[7],c=t[8];return e*o*c-e*a*u-s*r*c+s*a*l+i*r*u-i*o*l}invert(){const t=this.elements,e=t[0],s=t[1],i=t[2],r=t[3],o=t[4],a=t[5],l=t[6],u=t[7],c=t[8],h=c*o-a*u,d=a*l-c*r,p=u*r-o*l,f=e*h+s*d+i*p;if(f===0)return this.set(0,0,0,0,0,0,0,0,0);const y=1/f;return t[0]=h*y,t[1]=(i*u-c*s)*y,t[2]=(a*s-i*o)*y,t[3]=d*y,t[4]=(c*e-i*l)*y,t[5]=(i*r-a*e)*y,t[6]=p*y,t[7]=(s*l-u*e)*y,t[8]=(o*e-s*r)*y,this}transpose(){let t;const e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).invert().transpose()}transposeIntoArray(t){const e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this}setUvTransform(t,e,s,i,r,o,a){const l=Math.cos(r),u=Math.sin(r);return this.set(s*l,s*u,-s*(l*o+u*a)+o+t,-i*u,i*l,-i*(-u*o+l*a)+a+e,0,0,1),this}scale(t,e){return this.premultiply(qu.makeScale(t,e)),this}rotate(t){return this.premultiply(qu.makeRotation(-t)),this}translate(t,e){return this.premultiply(qu.makeTranslation(t,e)),this}makeTranslation(t,e){return t.isVector2?this.set(1,0,t.x,0,1,t.y,0,0,1):this.set(1,0,t,0,1,e,0,0,1),this}makeRotation(t){const e=Math.cos(t),s=Math.sin(t);return this.set(e,-s,0,s,e,0,0,0,1),this}makeScale(t,e){return this.set(t,0,0,0,e,0,0,0,1),this}equals(t){const e=this.elements,s=t.elements;for(let i=0;i<9;i++)if(e[i]!==s[i])return!1;return!0}fromArray(t,e=0){for(let s=0;s<9;s++)this.elements[s]=t[s+e];return this}toArray(t=[],e=0){const s=this.elements;return t[e]=s[0],t[e+1]=s[1],t[e+2]=s[2],t[e+3]=s[3],t[e+4]=s[4],t[e+5]=s[5],t[e+6]=s[6],t[e+7]=s[7],t[e+8]=s[8],t}clone(){return new this.constructor().fromArray(this.elements)}}const qu=new In;function kw(n){for(let t=n.length-1;t>=0;--t)if(n[t]>=65535)return!0;return!1}function Df(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}const bf={};function uy(n){n in bf||(bf[n]=!0,console.warn(n))}const Bf=new In().set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),Uf=new In().set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),Na={[zr]:{transfer:Ch,primaries:If,toReference:n=>n,fromReference:n=>n},[Wn]:{transfer:Lf,primaries:If,toReference:n=>n.convertSRGBToLinear(),fromReference:n=>n.convertLinearToSRGB()},[ay]:{transfer:Ch,primaries:Ff,toReference:n=>n.applyMatrix3(Uf),fromReference:n=>n.applyMatrix3(Bf)},[dw]:{transfer:Lf,primaries:Ff,toReference:n=>n.convertSRGBToLinear().applyMatrix3(Uf),fromReference:n=>n.applyMatrix3(Bf).convertLinearToSRGB()}},Vw=new Set([zr,ay]),en={enabled:!0,_workingColorSpace:zr,get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(n){if(!Vw.has(n))throw new Error(`Unsupported working color space, "${n}".`);this._workingColorSpace=n},convert:function(n,t,e){if(this.enabled===!1||t===e||!t||!e)return n;const s=Na[t].toReference,i=Na[e].fromReference;return i(s(n))},fromWorkingColorSpace:function(n,t){return this.convert(n,this._workingColorSpace,t)},toWorkingColorSpace:function(n,t){return this.convert(n,t,this._workingColorSpace)},getPrimaries:function(n){return Na[n].primaries},getTransfer:function(n){return n===oy?Ch:Na[n].transfer}};function ar(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function Xu(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}let Ci;class Lw{static getDataURL(t){if(/^data:/i.test(t.src)||typeof HTMLCanvasElement>"u")return t.src;let e;if(t instanceof HTMLCanvasElement)e=t;else{Ci===void 0&&(Ci=Df("canvas")),Ci.width=t.width,Ci.height=t.height;const s=Ci.getContext("2d");t instanceof ImageData?s.putImageData(t,0,0):s.drawImage(t,0,0,t.width,t.height),e=Ci}return e.width>2048||e.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",t),e.toDataURL("image/jpeg",.6)):e.toDataURL("image/png")}static sRGBToLinear(t){if(typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap){const e=Df("canvas");e.width=t.width,e.height=t.height;const s=e.getContext("2d");s.drawImage(t,0,0,t.width,t.height);const i=s.getImageData(0,0,t.width,t.height),r=i.data;for(let o=0;o<r.length;o++)r[o]=ar(r[o]/255)*255;return s.putImageData(i,0,0),e}else if(t.data){const e=t.data.slice(0);for(let s=0;s<e.length;s++)e instanceof Uint8Array||e instanceof Uint8ClampedArray?e[s]=Math.floor(ar(e[s]/255)*255):e[s]=ar(e[s]);return{data:e,width:t.width,height:t.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),t}}let Iw=0;class cy{constructor(t=null){this.isSource=!0,Object.defineProperty(this,"id",{value:Iw++}),this.uuid=Qn(),this.data=t,this.dataReady=!0,this.version=0}set needsUpdate(t){t===!0&&this.version++}toJSON(t){const e=t===void 0||typeof t=="string";if(!e&&t.images[this.uuid]!==void 0)return t.images[this.uuid];const s={uuid:this.uuid,url:""},i=this.data;if(i!==null){let r;if(Array.isArray(i)){r=[];for(let o=0,a=i.length;o<a;o++)i[o].isDataTexture?r.push(Yu(i[o].image)):r.push(Yu(i[o]))}else r=Yu(i);s.url=r}return e||(t.images[this.uuid]=s),s}}function Yu(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?Lw.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let Fw=0;class fn extends xi{constructor(t=fn.DEFAULT_IMAGE,e=fn.DEFAULT_MAPPING,s=so,i=so,r=sy,o=iy,a=cw,l=ow,u=fn.DEFAULT_ANISOTROPY,c=oy){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:Fw++}),this.uuid=Qn(),this.name="",this.source=new cy(t),this.mipmaps=[],this.mapping=e,this.channel=0,this.wrapS=s,this.wrapT=i,this.magFilter=r,this.minFilter=o,this.anisotropy=u,this.format=a,this.internalFormat=null,this.type=l,this.offset=new Q(0,0),this.repeat=new Q(1,1),this.center=new Q(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new In,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=c,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(t=null){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.channel=t.channel,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.colorSpace=t.colorSpace,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}toJSON(t){const e=t===void 0||typeof t=="string";if(!e&&t.textures[this.uuid]!==void 0)return t.textures[this.uuid];const s={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(s.userData=this.userData),e||(t.textures[this.uuid]=s),s}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(this.mapping!==ny)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case Rf:t.x=t.x-Math.floor(t.x);break;case so:t.x=t.x<0?0:1;break;case kf:Math.abs(Math.floor(t.x)%2)===1?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x);break}if(t.y<0||t.y>1)switch(this.wrapT){case Rf:t.y=t.y-Math.floor(t.y);break;case so:t.y=t.y<0?0:1;break;case kf:Math.abs(Math.floor(t.y)%2)===1?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y);break}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){t===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(t){t===!0&&this.pmremVersion++}}fn.DEFAULT_IMAGE=null;fn.DEFAULT_MAPPING=ny;fn.DEFAULT_ANISOTROPY=1;class bt{constructor(t=0,e=0,s=0,i=1){bt.prototype.isVector4=!0,this.x=t,this.y=e,this.z=s,this.w=i}get width(){return this.z}set width(t){this.z=t}get height(){return this.w}set height(t){this.w=t}set(t,e,s,i){return this.x=t,this.y=e,this.z=s,this.w=i,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setW(t){return this.w=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w!==void 0?t.w:1,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}applyMatrix4(t){const e=this.x,s=this.y,i=this.z,r=this.w,o=t.elements;return this.x=o[0]*e+o[4]*s+o[8]*i+o[12]*r,this.y=o[1]*e+o[5]*s+o[9]*i+o[13]*r,this.z=o[2]*e+o[6]*s+o[10]*i+o[14]*r,this.w=o[3]*e+o[7]*s+o[11]*i+o[15]*r,this}divideScalar(t){return this.multiplyScalar(1/t)}setAxisAngleFromQuaternion(t){this.w=2*Math.acos(t.w);const e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this}setAxisAngleFromRotationMatrix(t){let e,s,i,r;const l=t.elements,u=l[0],c=l[4],h=l[8],d=l[1],p=l[5],f=l[9],y=l[2],M=l[6],m=l[10];if(Math.abs(c-d)<.01&&Math.abs(h-y)<.01&&Math.abs(f-M)<.01){if(Math.abs(c+d)<.1&&Math.abs(h+y)<.1&&Math.abs(f+M)<.1&&Math.abs(u+p+m-3)<.1)return this.set(1,0,0,0),this;e=Math.PI;const x=(u+1)/2,S=(p+1)/2,E=(m+1)/2,L=(c+d)/4,A=(h+y)/4,V=(f+M)/4;return x>S&&x>E?x<.01?(s=0,i=.707106781,r=.707106781):(s=Math.sqrt(x),i=L/s,r=A/s):S>E?S<.01?(s=.707106781,i=0,r=.707106781):(i=Math.sqrt(S),s=L/i,r=V/i):E<.01?(s=.707106781,i=.707106781,r=0):(r=Math.sqrt(E),s=A/r,i=V/r),this.set(s,i,r,e),this}let g=Math.sqrt((M-f)*(M-f)+(h-y)*(h-y)+(d-c)*(d-c));return Math.abs(g)<.001&&(g=1),this.x=(M-f)/g,this.y=(h-y)/g,this.z=(d-c)/g,this.w=Math.acos((u+p+m-1)/2),this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this.w=Math.max(t,Math.min(e,this.w)),this}clampLength(t,e){const s=this.length();return this.divideScalar(s||1).multiplyScalar(Math.max(t,Math.min(e,s)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this}lerpVectors(t,e,s){return this.x=t.x+(e.x-t.x)*s,this.y=t.y+(e.y-t.y)*s,this.z=t.z+(e.z-t.z)*s,this.w=t.w+(e.w-t.w)*s,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class di extends xi{constructor(t=1,e=1,s={}){super(),this.isRenderTarget=!0,this.width=t,this.height=e,this.depth=1,this.scissor=new bt(0,0,t,e),this.scissorTest=!1,this.viewport=new bt(0,0,t,e);const i={width:t,height:e,depth:1};s=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:sy,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},s);const r=new fn(i,s.mapping,s.wrapS,s.wrapT,s.magFilter,s.minFilter,s.format,s.type,s.anisotropy,s.colorSpace);r.flipY=!1,r.generateMipmaps=s.generateMipmaps,r.internalFormat=s.internalFormat,this.textures=[];const o=s.count;for(let a=0;a<o;a++)this.textures[a]=r.clone(),this.textures[a].isRenderTargetTexture=!0;this.depthBuffer=s.depthBuffer,this.stencilBuffer=s.stencilBuffer,this.resolveDepthBuffer=s.resolveDepthBuffer,this.resolveStencilBuffer=s.resolveStencilBuffer,this.depthTexture=s.depthTexture,this.samples=s.samples}get texture(){return this.textures[0]}set texture(t){this.textures[0]=t}setSize(t,e,s=1){if(this.width!==t||this.height!==e||this.depth!==s){this.width=t,this.height=e,this.depth=s;for(let i=0,r=this.textures.length;i<r;i++)this.textures[i].image.width=t,this.textures[i].image.height=e,this.textures[i].image.depth=s;this.dispose()}this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)}clone(){return new this.constructor().copy(this)}copy(t){this.width=t.width,this.height=t.height,this.depth=t.depth,this.scissor.copy(t.scissor),this.scissorTest=t.scissorTest,this.viewport.copy(t.viewport),this.textures.length=0;for(let s=0,i=t.textures.length;s<i;s++)this.textures[s]=t.textures[s].clone(),this.textures[s].isRenderTargetTexture=!0;const e=Object.assign({},t.texture.image);return this.texture.source=new cy(e),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.resolveDepthBuffer=t.resolveDepthBuffer,this.resolveStencilBuffer=t.resolveStencilBuffer,t.depthTexture!==null&&(this.depthTexture=t.depthTexture.clone()),this.samples=t.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Pw extends fn{constructor(t=null,e=1,s=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:t,width:e,height:s,depth:i},this.magFilter=Ls,this.minFilter=Ls,this.wrapR=so,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(t){this.layerUpdates.add(t)}clearLayerUpdates(){this.layerUpdates.clear()}}class Xo{constructor(t=0,e=0,s=0,i=1){this.isQuaternion=!0,this._x=t,this._y=e,this._z=s,this._w=i}static slerpFlat(t,e,s,i,r,o,a){let l=s[i+0],u=s[i+1],c=s[i+2],h=s[i+3];const d=r[o+0],p=r[o+1],f=r[o+2],y=r[o+3];if(a===0){t[e+0]=l,t[e+1]=u,t[e+2]=c,t[e+3]=h;return}if(a===1){t[e+0]=d,t[e+1]=p,t[e+2]=f,t[e+3]=y;return}if(h!==y||l!==d||u!==p||c!==f){let M=1-a;const m=l*d+u*p+c*f+h*y,g=m>=0?1:-1,x=1-m*m;if(x>Number.EPSILON){const E=Math.sqrt(x),L=Math.atan2(E,m*g);M=Math.sin(M*L)/E,a=Math.sin(a*L)/E}const S=a*g;if(l=l*M+d*S,u=u*M+p*S,c=c*M+f*S,h=h*M+y*S,M===1-a){const E=1/Math.sqrt(l*l+u*u+c*c+h*h);l*=E,u*=E,c*=E,h*=E}}t[e]=l,t[e+1]=u,t[e+2]=c,t[e+3]=h}static multiplyQuaternionsFlat(t,e,s,i,r,o){const a=s[i],l=s[i+1],u=s[i+2],c=s[i+3],h=r[o],d=r[o+1],p=r[o+2],f=r[o+3];return t[e]=a*f+c*h+l*p-u*d,t[e+1]=l*f+c*d+u*h-a*p,t[e+2]=u*f+c*p+a*d-l*h,t[e+3]=c*f-a*h-l*d-u*p,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,e,s,i){return this._x=t,this._y=e,this._z=s,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,e=!0){const s=t._x,i=t._y,r=t._z,o=t._order,a=Math.cos,l=Math.sin,u=a(s/2),c=a(i/2),h=a(r/2),d=l(s/2),p=l(i/2),f=l(r/2);switch(o){case"XYZ":this._x=d*c*h+u*p*f,this._y=u*p*h-d*c*f,this._z=u*c*f+d*p*h,this._w=u*c*h-d*p*f;break;case"YXZ":this._x=d*c*h+u*p*f,this._y=u*p*h-d*c*f,this._z=u*c*f-d*p*h,this._w=u*c*h+d*p*f;break;case"ZXY":this._x=d*c*h-u*p*f,this._y=u*p*h+d*c*f,this._z=u*c*f+d*p*h,this._w=u*c*h-d*p*f;break;case"ZYX":this._x=d*c*h-u*p*f,this._y=u*p*h+d*c*f,this._z=u*c*f-d*p*h,this._w=u*c*h+d*p*f;break;case"YZX":this._x=d*c*h+u*p*f,this._y=u*p*h+d*c*f,this._z=u*c*f-d*p*h,this._w=u*c*h-d*p*f;break;case"XZY":this._x=d*c*h-u*p*f,this._y=u*p*h-d*c*f,this._z=u*c*f+d*p*h,this._w=u*c*h+d*p*f;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return e===!0&&this._onChangeCallback(),this}setFromAxisAngle(t,e){const s=e/2,i=Math.sin(s);return this._x=t.x*i,this._y=t.y*i,this._z=t.z*i,this._w=Math.cos(s),this._onChangeCallback(),this}setFromRotationMatrix(t){const e=t.elements,s=e[0],i=e[4],r=e[8],o=e[1],a=e[5],l=e[9],u=e[2],c=e[6],h=e[10],d=s+a+h;if(d>0){const p=.5/Math.sqrt(d+1);this._w=.25/p,this._x=(c-l)*p,this._y=(r-u)*p,this._z=(o-i)*p}else if(s>a&&s>h){const p=2*Math.sqrt(1+s-a-h);this._w=(c-l)/p,this._x=.25*p,this._y=(i+o)/p,this._z=(r+u)/p}else if(a>h){const p=2*Math.sqrt(1+a-s-h);this._w=(r-u)/p,this._x=(i+o)/p,this._y=.25*p,this._z=(l+c)/p}else{const p=2*Math.sqrt(1+h-s-a);this._w=(o-i)/p,this._x=(r+u)/p,this._y=(l+c)/p,this._z=.25*p}return this._onChangeCallback(),this}setFromUnitVectors(t,e){let s=t.dot(e)+1;return s<Number.EPSILON?(s=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=s):(this._x=0,this._y=-t.z,this._z=t.y,this._w=s)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=s),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(ce(this.dot(t),-1,1)))}rotateTowards(t,e){const s=this.angleTo(t);if(s===0)return this;const i=Math.min(1,e/s);return this.slerp(t,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return t===0?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t){return this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,e){const s=t._x,i=t._y,r=t._z,o=t._w,a=e._x,l=e._y,u=e._z,c=e._w;return this._x=s*c+o*a+i*u-r*l,this._y=i*c+o*l+r*a-s*u,this._z=r*c+o*u+s*l-i*a,this._w=o*c-s*a-i*l-r*u,this._onChangeCallback(),this}slerp(t,e){if(e===0)return this;if(e===1)return this.copy(t);const s=this._x,i=this._y,r=this._z,o=this._w;let a=o*t._w+s*t._x+i*t._y+r*t._z;if(a<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,a=-a):this.copy(t),a>=1)return this._w=o,this._x=s,this._y=i,this._z=r,this;const l=1-a*a;if(l<=Number.EPSILON){const p=1-e;return this._w=p*o+e*this._w,this._x=p*s+e*this._x,this._y=p*i+e*this._y,this._z=p*r+e*this._z,this.normalize(),this}const u=Math.sqrt(l),c=Math.atan2(u,a),h=Math.sin((1-e)*c)/u,d=Math.sin(e*c)/u;return this._w=o*h+this._w*d,this._x=s*h+this._x*d,this._y=i*h+this._y*d,this._z=r*h+this._z*d,this._onChangeCallback(),this}slerpQuaternions(t,e,s){return this.copy(t).slerp(e,s)}random(){const t=2*Math.PI*Math.random(),e=2*Math.PI*Math.random(),s=Math.random(),i=Math.sqrt(1-s),r=Math.sqrt(s);return this.set(i*Math.sin(t),i*Math.cos(t),r*Math.sin(e),r*Math.cos(e))}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,e=0){return this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t}fromBufferAttribute(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._w=t.getW(e),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class z{constructor(t=0,e=0,s=0){z.prototype.isVector3=!0,this.x=t,this.y=e,this.z=s}set(t,e,s){return s===void 0&&(s=this.z),this.x=t,this.y=e,this.z=s,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this}applyEuler(t){return this.applyQuaternion(jf.setFromEuler(t))}applyAxisAngle(t,e){return this.applyQuaternion(jf.setFromAxisAngle(t,e))}applyMatrix3(t){const e=this.x,s=this.y,i=this.z,r=t.elements;return this.x=r[0]*e+r[3]*s+r[6]*i,this.y=r[1]*e+r[4]*s+r[7]*i,this.z=r[2]*e+r[5]*s+r[8]*i,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){const e=this.x,s=this.y,i=this.z,r=t.elements,o=1/(r[3]*e+r[7]*s+r[11]*i+r[15]);return this.x=(r[0]*e+r[4]*s+r[8]*i+r[12])*o,this.y=(r[1]*e+r[5]*s+r[9]*i+r[13])*o,this.z=(r[2]*e+r[6]*s+r[10]*i+r[14])*o,this}applyQuaternion(t){const e=this.x,s=this.y,i=this.z,r=t.x,o=t.y,a=t.z,l=t.w,u=2*(o*i-a*s),c=2*(a*e-r*i),h=2*(r*s-o*e);return this.x=e+l*u+o*h-a*c,this.y=s+l*c+a*u-r*h,this.z=i+l*h+r*c-o*u,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){const e=this.x,s=this.y,i=this.z,r=t.elements;return this.x=r[0]*e+r[4]*s+r[8]*i,this.y=r[1]*e+r[5]*s+r[9]*i,this.z=r[2]*e+r[6]*s+r[10]*i,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this}clampLength(t,e){const s=this.length();return this.divideScalar(s||1).multiplyScalar(Math.max(t,Math.min(e,s)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this}lerpVectors(t,e,s){return this.x=t.x+(e.x-t.x)*s,this.y=t.y+(e.y-t.y)*s,this.z=t.z+(e.z-t.z)*s,this}cross(t){return this.crossVectors(this,t)}crossVectors(t,e){const s=t.x,i=t.y,r=t.z,o=e.x,a=e.y,l=e.z;return this.x=i*l-r*a,this.y=r*o-s*l,this.z=s*a-i*o,this}projectOnVector(t){const e=t.lengthSq();if(e===0)return this.set(0,0,0);const s=t.dot(this)/e;return this.copy(t).multiplyScalar(s)}projectOnPlane(t){return Zu.copy(this).projectOnVector(t),this.sub(Zu)}reflect(t){return this.sub(Zu.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(e===0)return Math.PI/2;const s=this.dot(t)/e;return Math.acos(ce(s,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,s=this.y-t.y,i=this.z-t.z;return e*e+s*s+i*i}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,e,s){const i=Math.sin(e)*t;return this.x=i*Math.sin(s),this.y=Math.cos(e)*t,this.z=i*Math.cos(s),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,e,s){return this.x=t*Math.sin(e),this.y=s,this.z=t*Math.cos(e),this}setFromMatrixPosition(t){const e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this}setFromMatrixScale(t){const e=this.setFromMatrixColumn(t,0).length(),s=this.setFromMatrixColumn(t,1).length(),i=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=s,this.z=i,this}setFromMatrixColumn(t,e){return this.fromArray(t.elements,e*4)}setFromMatrix3Column(t,e){return this.fromArray(t.elements,e*3)}setFromEuler(t){return this.x=t._x,this.y=t._y,this.z=t._z,this}setFromColor(t){return this.x=t.r,this.y=t.g,this.z=t.b,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const t=Math.random()*Math.PI*2,e=Math.random()*2-1,s=Math.sqrt(1-e*e);return this.x=s*Math.cos(t),this.y=e,this.z=s*Math.sin(t),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const Zu=new z,jf=new Xo;class Yo{constructor(t=new z(1/0,1/0,1/0),e=new z(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=t,this.max=e}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromArray(t){this.makeEmpty();for(let e=0,s=t.length;e<s;e+=3)this.expandByPoint(nn.fromArray(t,e));return this}setFromBufferAttribute(t){this.makeEmpty();for(let e=0,s=t.count;e<s;e++)this.expandByPoint(nn.fromBufferAttribute(t,e));return this}setFromPoints(t){this.makeEmpty();for(let e=0,s=t.length;e<s;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){const s=nn.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(s),this.max.copy(t).add(s),this}setFromObject(t,e=!1){return this.makeEmpty(),this.expandByObject(t,e)}clone(){return new this.constructor().copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t){return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(t,e=!1){t.updateWorldMatrix(!1,!1);const s=t.geometry;if(s!==void 0){const r=s.getAttribute("position");if(e===!0&&r!==void 0&&t.isInstancedMesh!==!0)for(let o=0,a=r.count;o<a;o++)t.isMesh===!0?t.getVertexPosition(o,nn):nn.fromBufferAttribute(r,o),nn.applyMatrix4(t.matrixWorld),this.expandByPoint(nn);else t.boundingBox!==void 0?(t.boundingBox===null&&t.computeBoundingBox(),wa.copy(t.boundingBox)):(s.boundingBox===null&&s.computeBoundingBox(),wa.copy(s.boundingBox)),wa.applyMatrix4(t.matrixWorld),this.union(wa)}const i=t.children;for(let r=0,o=i.length;r<o;r++)this.expandByObject(i[r],e);return this}containsPoint(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)}intersectsSphere(t){return this.clampPoint(t.center,nn),nn.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let e,s;return t.normal.x>0?(e=t.normal.x*this.min.x,s=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,s=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,s+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,s+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,s+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,s+=t.normal.z*this.min.z),e<=-t.constant&&s>=-t.constant}intersectsTriangle(t){if(this.isEmpty())return!1;this.getCenter($r),Ma.subVectors(this.max,$r),Ai.subVectors(t.a,$r),zi.subVectors(t.b,$r),Ei.subVectors(t.c,$r),as.subVectors(zi,Ai),ls.subVectors(Ei,zi),Hs.subVectors(Ai,Ei);let e=[0,-as.z,as.y,0,-ls.z,ls.y,0,-Hs.z,Hs.y,as.z,0,-as.x,ls.z,0,-ls.x,Hs.z,0,-Hs.x,-as.y,as.x,0,-ls.y,ls.x,0,-Hs.y,Hs.x,0];return!Qu(e,Ai,zi,Ei,Ma)||(e=[1,0,0,0,1,0,0,0,1],!Qu(e,Ai,zi,Ei,Ma))?!1:(Sa.crossVectors(as,ls),e=[Sa.x,Sa.y,Sa.z],Qu(e,Ai,zi,Ei,Ma))}clampPoint(t,e){return e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return this.clampPoint(t,nn).distanceTo(t)}getBoundingSphere(t){return this.isEmpty()?t.makeEmpty():(this.getCenter(t.center),t.radius=this.getSize(nn).length()*.5),t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()?this:(On[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),On[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),On[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),On[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),On[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),On[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),On[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),On[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(On),this)}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}const On=[new z,new z,new z,new z,new z,new z,new z,new z],nn=new z,wa=new Yo,Ai=new z,zi=new z,Ei=new z,as=new z,ls=new z,Hs=new z,$r=new z,Ma=new z,Sa=new z,$s=new z;function Qu(n,t,e,s,i){for(let r=0,o=n.length-3;r<=o;r+=3){$s.fromArray(n,r);const a=i.x*Math.abs($s.x)+i.y*Math.abs($s.y)+i.z*Math.abs($s.z),l=t.dot($s),u=e.dot($s),c=s.dot($s);if(Math.max(-Math.max(l,u,c),Math.min(l,u,c))>a)return!1}return!0}const Ow=new Yo,Gr=new z,Ju=new z;class $d{constructor(t=new z,e=-1){this.isSphere=!0,this.center=t,this.radius=e}set(t,e){return this.center.copy(t),this.radius=e,this}setFromPoints(t,e){const s=this.center;e!==void 0?s.copy(e):Ow.setFromPoints(t).getCenter(s);let i=0;for(let r=0,o=t.length;r<o;r++)i=Math.max(i,s.distanceToSquared(t[r]));return this.radius=Math.sqrt(i),this}copy(t){return this.center.copy(t.center),this.radius=t.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(t){return t.distanceTo(this.center)-this.radius}intersectsSphere(t){const e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}clampPoint(t,e){const s=this.center.distanceToSquared(t);return e.copy(t),s>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e}getBoundingBox(t){return this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}translate(t){return this.center.add(t),this}expandByPoint(t){if(this.isEmpty())return this.center.copy(t),this.radius=0,this;Gr.subVectors(t,this.center);const e=Gr.lengthSq();if(e>this.radius*this.radius){const s=Math.sqrt(e),i=(s-this.radius)*.5;this.center.addScaledVector(Gr,i/s),this.radius+=i}return this}union(t){return t.isEmpty()?this:this.isEmpty()?(this.copy(t),this):(this.center.equals(t.center)===!0?this.radius=Math.max(this.radius,t.radius):(Ju.subVectors(t.center,this.center).setLength(t.radius),this.expandByPoint(Gr.copy(t.center).add(Ju)),this.expandByPoint(Gr.copy(t.center).sub(Ju))),this)}equals(t){return t.center.equals(this.center)&&t.radius===this.radius}clone(){return new this.constructor().copy(this)}}const Dn=new z,Ku=new z,Ta=new z,us=new z,tc=new z,_a=new z,ec=new z;class Dw{constructor(t=new z,e=new z(0,0,-1)){this.origin=t,this.direction=e}set(t,e){return this.origin.copy(t),this.direction.copy(e),this}copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}at(t,e){return e.copy(this.origin).addScaledVector(this.direction,t)}lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this}recast(t){return this.origin.copy(this.at(t,Dn)),this}closestPointToPoint(t,e){e.subVectors(t,this.origin);const s=e.dot(this.direction);return s<0?e.copy(this.origin):e.copy(this.origin).addScaledVector(this.direction,s)}distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))}distanceSqToPoint(t){const e=Dn.subVectors(t,this.origin).dot(this.direction);return e<0?this.origin.distanceToSquared(t):(Dn.copy(this.origin).addScaledVector(this.direction,e),Dn.distanceToSquared(t))}distanceSqToSegment(t,e,s,i){Ku.copy(t).add(e).multiplyScalar(.5),Ta.copy(e).sub(t).normalize(),us.copy(this.origin).sub(Ku);const r=t.distanceTo(e)*.5,o=-this.direction.dot(Ta),a=us.dot(this.direction),l=-us.dot(Ta),u=us.lengthSq(),c=Math.abs(1-o*o);let h,d,p,f;if(c>0)if(h=o*l-a,d=o*a-l,f=r*c,h>=0)if(d>=-f)if(d<=f){const y=1/c;h*=y,d*=y,p=h*(h+o*d+2*a)+d*(o*h+d+2*l)+u}else d=r,h=Math.max(0,-(o*d+a)),p=-h*h+d*(d+2*l)+u;else d=-r,h=Math.max(0,-(o*d+a)),p=-h*h+d*(d+2*l)+u;else d<=-f?(h=Math.max(0,-(-o*r+a)),d=h>0?-r:Math.min(Math.max(-r,-l),r),p=-h*h+d*(d+2*l)+u):d<=f?(h=0,d=Math.min(Math.max(-r,-l),r),p=d*(d+2*l)+u):(h=Math.max(0,-(o*r+a)),d=h>0?r:Math.min(Math.max(-r,-l),r),p=-h*h+d*(d+2*l)+u);else d=o>0?-r:r,h=Math.max(0,-(o*d+a)),p=-h*h+d*(d+2*l)+u;return s&&s.copy(this.origin).addScaledVector(this.direction,h),i&&i.copy(Ku).addScaledVector(Ta,d),p}intersectSphere(t,e){Dn.subVectors(t.center,this.origin);const s=Dn.dot(this.direction),i=Dn.dot(Dn)-s*s,r=t.radius*t.radius;if(i>r)return null;const o=Math.sqrt(r-i),a=s-o,l=s+o;return l<0?null:a<0?this.at(l,e):this.at(a,e)}intersectsSphere(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius}distanceToPlane(t){const e=t.normal.dot(this.direction);if(e===0)return t.distanceToPoint(this.origin)===0?0:null;const s=-(this.origin.dot(t.normal)+t.constant)/e;return s>=0?s:null}intersectPlane(t,e){const s=this.distanceToPlane(t);return s===null?null:this.at(s,e)}intersectsPlane(t){const e=t.distanceToPoint(this.origin);return e===0||t.normal.dot(this.direction)*e<0}intersectBox(t,e){let s,i,r,o,a,l;const u=1/this.direction.x,c=1/this.direction.y,h=1/this.direction.z,d=this.origin;return u>=0?(s=(t.min.x-d.x)*u,i=(t.max.x-d.x)*u):(s=(t.max.x-d.x)*u,i=(t.min.x-d.x)*u),c>=0?(r=(t.min.y-d.y)*c,o=(t.max.y-d.y)*c):(r=(t.max.y-d.y)*c,o=(t.min.y-d.y)*c),s>o||r>i||((r>s||isNaN(s))&&(s=r),(o<i||isNaN(i))&&(i=o),h>=0?(a=(t.min.z-d.z)*h,l=(t.max.z-d.z)*h):(a=(t.max.z-d.z)*h,l=(t.min.z-d.z)*h),s>l||a>i)||((a>s||s!==s)&&(s=a),(l<i||i!==i)&&(i=l),i<0)?null:this.at(s>=0?s:i,e)}intersectsBox(t){return this.intersectBox(t,Dn)!==null}intersectTriangle(t,e,s,i,r){tc.subVectors(e,t),_a.subVectors(s,t),ec.crossVectors(tc,_a);let o=this.direction.dot(ec),a;if(o>0){if(i)return null;a=1}else if(o<0)a=-1,o=-o;else return null;us.subVectors(this.origin,t);const l=a*this.direction.dot(_a.crossVectors(us,_a));if(l<0)return null;const u=a*this.direction.dot(tc.cross(us));if(u<0||l+u>o)return null;const c=-a*us.dot(ec);return c<0?null:this.at(c/o,r)}applyMatrix4(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}equals(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Pt{constructor(t,e,s,i,r,o,a,l,u,c,h,d,p,f,y,M){Pt.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],t!==void 0&&this.set(t,e,s,i,r,o,a,l,u,c,h,d,p,f,y,M)}set(t,e,s,i,r,o,a,l,u,c,h,d,p,f,y,M){const m=this.elements;return m[0]=t,m[4]=e,m[8]=s,m[12]=i,m[1]=r,m[5]=o,m[9]=a,m[13]=l,m[2]=u,m[6]=c,m[10]=h,m[14]=d,m[3]=p,m[7]=f,m[11]=y,m[15]=M,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Pt().fromArray(this.elements)}copy(t){const e=this.elements,s=t.elements;return e[0]=s[0],e[1]=s[1],e[2]=s[2],e[3]=s[3],e[4]=s[4],e[5]=s[5],e[6]=s[6],e[7]=s[7],e[8]=s[8],e[9]=s[9],e[10]=s[10],e[11]=s[11],e[12]=s[12],e[13]=s[13],e[14]=s[14],e[15]=s[15],this}copyPosition(t){const e=this.elements,s=t.elements;return e[12]=s[12],e[13]=s[13],e[14]=s[14],this}setFromMatrix3(t){const e=t.elements;return this.set(e[0],e[3],e[6],0,e[1],e[4],e[7],0,e[2],e[5],e[8],0,0,0,0,1),this}extractBasis(t,e,s){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),s.setFromMatrixColumn(this,2),this}makeBasis(t,e,s){return this.set(t.x,e.x,s.x,0,t.y,e.y,s.y,0,t.z,e.z,s.z,0,0,0,0,1),this}extractRotation(t){const e=this.elements,s=t.elements,i=1/Ri.setFromMatrixColumn(t,0).length(),r=1/Ri.setFromMatrixColumn(t,1).length(),o=1/Ri.setFromMatrixColumn(t,2).length();return e[0]=s[0]*i,e[1]=s[1]*i,e[2]=s[2]*i,e[3]=0,e[4]=s[4]*r,e[5]=s[5]*r,e[6]=s[6]*r,e[7]=0,e[8]=s[8]*o,e[9]=s[9]*o,e[10]=s[10]*o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromEuler(t){const e=this.elements,s=t.x,i=t.y,r=t.z,o=Math.cos(s),a=Math.sin(s),l=Math.cos(i),u=Math.sin(i),c=Math.cos(r),h=Math.sin(r);if(t.order==="XYZ"){const d=o*c,p=o*h,f=a*c,y=a*h;e[0]=l*c,e[4]=-l*h,e[8]=u,e[1]=p+f*u,e[5]=d-y*u,e[9]=-a*l,e[2]=y-d*u,e[6]=f+p*u,e[10]=o*l}else if(t.order==="YXZ"){const d=l*c,p=l*h,f=u*c,y=u*h;e[0]=d+y*a,e[4]=f*a-p,e[8]=o*u,e[1]=o*h,e[5]=o*c,e[9]=-a,e[2]=p*a-f,e[6]=y+d*a,e[10]=o*l}else if(t.order==="ZXY"){const d=l*c,p=l*h,f=u*c,y=u*h;e[0]=d-y*a,e[4]=-o*h,e[8]=f+p*a,e[1]=p+f*a,e[5]=o*c,e[9]=y-d*a,e[2]=-o*u,e[6]=a,e[10]=o*l}else if(t.order==="ZYX"){const d=o*c,p=o*h,f=a*c,y=a*h;e[0]=l*c,e[4]=f*u-p,e[8]=d*u+y,e[1]=l*h,e[5]=y*u+d,e[9]=p*u-f,e[2]=-u,e[6]=a*l,e[10]=o*l}else if(t.order==="YZX"){const d=o*l,p=o*u,f=a*l,y=a*u;e[0]=l*c,e[4]=y-d*h,e[8]=f*h+p,e[1]=h,e[5]=o*c,e[9]=-a*c,e[2]=-u*c,e[6]=p*h+f,e[10]=d-y*h}else if(t.order==="XZY"){const d=o*l,p=o*u,f=a*l,y=a*u;e[0]=l*c,e[4]=-h,e[8]=u*c,e[1]=d*h+y,e[5]=o*c,e[9]=p*h-f,e[2]=f*h-p,e[6]=a*c,e[10]=y*h+d}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromQuaternion(t){return this.compose(bw,t,Bw)}lookAt(t,e,s){const i=this.elements;return Ee.subVectors(t,e),Ee.lengthSq()===0&&(Ee.z=1),Ee.normalize(),cs.crossVectors(s,Ee),cs.lengthSq()===0&&(Math.abs(s.z)===1?Ee.x+=1e-4:Ee.z+=1e-4,Ee.normalize(),cs.crossVectors(s,Ee)),cs.normalize(),Ca.crossVectors(Ee,cs),i[0]=cs.x,i[4]=Ca.x,i[8]=Ee.x,i[1]=cs.y,i[5]=Ca.y,i[9]=Ee.y,i[2]=cs.z,i[6]=Ca.z,i[10]=Ee.z,this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const s=t.elements,i=e.elements,r=this.elements,o=s[0],a=s[4],l=s[8],u=s[12],c=s[1],h=s[5],d=s[9],p=s[13],f=s[2],y=s[6],M=s[10],m=s[14],g=s[3],x=s[7],S=s[11],E=s[15],L=i[0],A=i[4],V=i[8],W=i[12],H=i[1],et=i[5],Et=i[9],gt=i[13],Ke=i[2],Si=i[6],is=i[10],rs=i[14],b=i[3],G=i[7],Y=i[11],ht=i[15];return r[0]=o*L+a*H+l*Ke+u*b,r[4]=o*A+a*et+l*Si+u*G,r[8]=o*V+a*Et+l*is+u*Y,r[12]=o*W+a*gt+l*rs+u*ht,r[1]=c*L+h*H+d*Ke+p*b,r[5]=c*A+h*et+d*Si+p*G,r[9]=c*V+h*Et+d*is+p*Y,r[13]=c*W+h*gt+d*rs+p*ht,r[2]=f*L+y*H+M*Ke+m*b,r[6]=f*A+y*et+M*Si+m*G,r[10]=f*V+y*Et+M*is+m*Y,r[14]=f*W+y*gt+M*rs+m*ht,r[3]=g*L+x*H+S*Ke+E*b,r[7]=g*A+x*et+S*Si+E*G,r[11]=g*V+x*Et+S*is+E*Y,r[15]=g*W+x*gt+S*rs+E*ht,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this}determinant(){const t=this.elements,e=t[0],s=t[4],i=t[8],r=t[12],o=t[1],a=t[5],l=t[9],u=t[13],c=t[2],h=t[6],d=t[10],p=t[14],f=t[3],y=t[7],M=t[11],m=t[15];return f*(+r*l*h-i*u*h-r*a*d+s*u*d+i*a*p-s*l*p)+y*(+e*l*p-e*u*d+r*o*d-i*o*p+i*u*c-r*l*c)+M*(+e*u*h-e*a*p-r*o*h+s*o*p+r*a*c-s*u*c)+m*(-i*a*c-e*l*h+e*a*d+i*o*h-s*o*d+s*l*c)}transpose(){const t=this.elements;let e;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}setPosition(t,e,s){const i=this.elements;return t.isVector3?(i[12]=t.x,i[13]=t.y,i[14]=t.z):(i[12]=t,i[13]=e,i[14]=s),this}invert(){const t=this.elements,e=t[0],s=t[1],i=t[2],r=t[3],o=t[4],a=t[5],l=t[6],u=t[7],c=t[8],h=t[9],d=t[10],p=t[11],f=t[12],y=t[13],M=t[14],m=t[15],g=h*M*u-y*d*u+y*l*p-a*M*p-h*l*m+a*d*m,x=f*d*u-c*M*u-f*l*p+o*M*p+c*l*m-o*d*m,S=c*y*u-f*h*u+f*a*p-o*y*p-c*a*m+o*h*m,E=f*h*l-c*y*l-f*a*d+o*y*d+c*a*M-o*h*M,L=e*g+s*x+i*S+r*E;if(L===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const A=1/L;return t[0]=g*A,t[1]=(y*d*r-h*M*r-y*i*p+s*M*p+h*i*m-s*d*m)*A,t[2]=(a*M*r-y*l*r+y*i*u-s*M*u-a*i*m+s*l*m)*A,t[3]=(h*l*r-a*d*r-h*i*u+s*d*u+a*i*p-s*l*p)*A,t[4]=x*A,t[5]=(c*M*r-f*d*r+f*i*p-e*M*p-c*i*m+e*d*m)*A,t[6]=(f*l*r-o*M*r-f*i*u+e*M*u+o*i*m-e*l*m)*A,t[7]=(o*d*r-c*l*r+c*i*u-e*d*u-o*i*p+e*l*p)*A,t[8]=S*A,t[9]=(f*h*r-c*y*r-f*s*p+e*y*p+c*s*m-e*h*m)*A,t[10]=(o*y*r-f*a*r+f*s*u-e*y*u-o*s*m+e*a*m)*A,t[11]=(c*a*r-o*h*r-c*s*u+e*h*u+o*s*p-e*a*p)*A,t[12]=E*A,t[13]=(c*y*i-f*h*i+f*s*d-e*y*d-c*s*M+e*h*M)*A,t[14]=(f*a*i-o*y*i-f*s*l+e*y*l+o*s*M-e*a*M)*A,t[15]=(o*h*i-c*a*i+c*s*l-e*h*l-o*s*d+e*a*d)*A,this}scale(t){const e=this.elements,s=t.x,i=t.y,r=t.z;return e[0]*=s,e[4]*=i,e[8]*=r,e[1]*=s,e[5]*=i,e[9]*=r,e[2]*=s,e[6]*=i,e[10]*=r,e[3]*=s,e[7]*=i,e[11]*=r,this}getMaxScaleOnAxis(){const t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],s=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],i=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,s,i))}makeTranslation(t,e,s){return t.isVector3?this.set(1,0,0,t.x,0,1,0,t.y,0,0,1,t.z,0,0,0,1):this.set(1,0,0,t,0,1,0,e,0,0,1,s,0,0,0,1),this}makeRotationX(t){const e=Math.cos(t),s=Math.sin(t);return this.set(1,0,0,0,0,e,-s,0,0,s,e,0,0,0,0,1),this}makeRotationY(t){const e=Math.cos(t),s=Math.sin(t);return this.set(e,0,s,0,0,1,0,0,-s,0,e,0,0,0,0,1),this}makeRotationZ(t){const e=Math.cos(t),s=Math.sin(t);return this.set(e,-s,0,0,s,e,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,e){const s=Math.cos(e),i=Math.sin(e),r=1-s,o=t.x,a=t.y,l=t.z,u=r*o,c=r*a;return this.set(u*o+s,u*a-i*l,u*l+i*a,0,u*a+i*l,c*a+s,c*l-i*o,0,u*l-i*a,c*l+i*o,r*l*l+s,0,0,0,0,1),this}makeScale(t,e,s){return this.set(t,0,0,0,0,e,0,0,0,0,s,0,0,0,0,1),this}makeShear(t,e,s,i,r,o){return this.set(1,s,r,0,t,1,o,0,e,i,1,0,0,0,0,1),this}compose(t,e,s){const i=this.elements,r=e._x,o=e._y,a=e._z,l=e._w,u=r+r,c=o+o,h=a+a,d=r*u,p=r*c,f=r*h,y=o*c,M=o*h,m=a*h,g=l*u,x=l*c,S=l*h,E=s.x,L=s.y,A=s.z;return i[0]=(1-(y+m))*E,i[1]=(p+S)*E,i[2]=(f-x)*E,i[3]=0,i[4]=(p-S)*L,i[5]=(1-(d+m))*L,i[6]=(M+g)*L,i[7]=0,i[8]=(f+x)*A,i[9]=(M-g)*A,i[10]=(1-(d+y))*A,i[11]=0,i[12]=t.x,i[13]=t.y,i[14]=t.z,i[15]=1,this}decompose(t,e,s){const i=this.elements;let r=Ri.set(i[0],i[1],i[2]).length();const o=Ri.set(i[4],i[5],i[6]).length(),a=Ri.set(i[8],i[9],i[10]).length();this.determinant()<0&&(r=-r),t.x=i[12],t.y=i[13],t.z=i[14],sn.copy(this);const u=1/r,c=1/o,h=1/a;return sn.elements[0]*=u,sn.elements[1]*=u,sn.elements[2]*=u,sn.elements[4]*=c,sn.elements[5]*=c,sn.elements[6]*=c,sn.elements[8]*=h,sn.elements[9]*=h,sn.elements[10]*=h,e.setFromRotationMatrix(sn),s.x=r,s.y=o,s.z=a,this}makePerspective(t,e,s,i,r,o,a=Xn){const l=this.elements,u=2*r/(e-t),c=2*r/(s-i),h=(e+t)/(e-t),d=(s+i)/(s-i);let p,f;if(a===Xn)p=-(o+r)/(o-r),f=-2*o*r/(o-r);else if(a===Fo)p=-o/(o-r),f=-o*r/(o-r);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);return l[0]=u,l[4]=0,l[8]=h,l[12]=0,l[1]=0,l[5]=c,l[9]=d,l[13]=0,l[2]=0,l[6]=0,l[10]=p,l[14]=f,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(t,e,s,i,r,o,a=Xn){const l=this.elements,u=1/(e-t),c=1/(s-i),h=1/(o-r),d=(e+t)*u,p=(s+i)*c;let f,y;if(a===Xn)f=(o+r)*h,y=-2*h;else if(a===Fo)f=r*h,y=-1*h;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);return l[0]=2*u,l[4]=0,l[8]=0,l[12]=-d,l[1]=0,l[5]=2*c,l[9]=0,l[13]=-p,l[2]=0,l[6]=0,l[10]=y,l[14]=-f,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(t){const e=this.elements,s=t.elements;for(let i=0;i<16;i++)if(e[i]!==s[i])return!1;return!0}fromArray(t,e=0){for(let s=0;s<16;s++)this.elements[s]=t[s+e];return this}toArray(t=[],e=0){const s=this.elements;return t[e]=s[0],t[e+1]=s[1],t[e+2]=s[2],t[e+3]=s[3],t[e+4]=s[4],t[e+5]=s[5],t[e+6]=s[6],t[e+7]=s[7],t[e+8]=s[8],t[e+9]=s[9],t[e+10]=s[10],t[e+11]=s[11],t[e+12]=s[12],t[e+13]=s[13],t[e+14]=s[14],t[e+15]=s[15],t}}const Ri=new z,sn=new Pt,bw=new z(0,0,0),Bw=new z(1,1,1),cs=new z,Ca=new z,Ee=new z,Wf=new Pt,Hf=new Xo;class Us{constructor(t=0,e=0,s=0,i=Us.DEFAULT_ORDER){this.isEuler=!0,this._x=t,this._y=e,this._z=s,this._order=i}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,e,s,i=this._order){return this._x=t,this._y=e,this._z=s,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,e=this._order,s=!0){const i=t.elements,r=i[0],o=i[4],a=i[8],l=i[1],u=i[5],c=i[9],h=i[2],d=i[6],p=i[10];switch(e){case"XYZ":this._y=Math.asin(ce(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-c,p),this._z=Math.atan2(-o,r)):(this._x=Math.atan2(d,u),this._z=0);break;case"YXZ":this._x=Math.asin(-ce(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(a,p),this._z=Math.atan2(l,u)):(this._y=Math.atan2(-h,r),this._z=0);break;case"ZXY":this._x=Math.asin(ce(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(-h,p),this._z=Math.atan2(-o,u)):(this._y=0,this._z=Math.atan2(l,r));break;case"ZYX":this._y=Math.asin(-ce(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(d,p),this._z=Math.atan2(l,r)):(this._x=0,this._z=Math.atan2(-o,u));break;case"YZX":this._z=Math.asin(ce(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-c,u),this._y=Math.atan2(-h,r)):(this._x=0,this._y=Math.atan2(a,p));break;case"XZY":this._z=Math.asin(-ce(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(d,u),this._y=Math.atan2(a,r)):(this._x=Math.atan2(-c,p),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+e)}return this._order=e,s===!0&&this._onChangeCallback(),this}setFromQuaternion(t,e,s){return Wf.makeRotationFromQuaternion(t),this.setFromRotationMatrix(Wf,e,s)}setFromVector3(t,e=this._order){return this.set(t.x,t.y,t.z,e)}reorder(t){return Hf.setFromEuler(this),this.setFromQuaternion(Hf,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],t[3]!==void 0&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Us.DEFAULT_ORDER="XYZ";class Uw{constructor(){this.mask=1}set(t){this.mask=(1<<t|0)>>>0}enable(t){this.mask|=1<<t|0}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t|0}disable(t){this.mask&=~(1<<t|0)}disableAll(){this.mask=0}test(t){return(this.mask&t.mask)!==0}isEnabled(t){return(this.mask&(1<<t|0))!==0}}let jw=0;const $f=new z,ki=new Xo,bn=new Pt,Aa=new z,qr=new z,Ww=new z,Hw=new Xo,Gf=new z(1,0,0),qf=new z(0,1,0),Xf=new z(0,0,1),Yf={type:"added"},$w={type:"removed"},Vi={type:"childadded",child:null},nc={type:"childremoved",child:null};class he extends xi{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:jw++}),this.uuid=Qn(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=he.DEFAULT_UP.clone();const t=new z,e=new Us,s=new Xo,i=new z(1,1,1);function r(){s.setFromEuler(e,!1)}function o(){e.setFromQuaternion(s,void 0,!1)}e._onChange(r),s._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:e},quaternion:{configurable:!0,enumerable:!0,value:s},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new Pt},normalMatrix:{value:new In}}),this.matrix=new Pt,this.matrixWorld=new Pt,this.matrixAutoUpdate=he.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=he.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new Uw,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,e){this.quaternion.setFromAxisAngle(t,e)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,e){return ki.setFromAxisAngle(t,e),this.quaternion.multiply(ki),this}rotateOnWorldAxis(t,e){return ki.setFromAxisAngle(t,e),this.quaternion.premultiply(ki),this}rotateX(t){return this.rotateOnAxis(Gf,t)}rotateY(t){return this.rotateOnAxis(qf,t)}rotateZ(t){return this.rotateOnAxis(Xf,t)}translateOnAxis(t,e){return $f.copy(t).applyQuaternion(this.quaternion),this.position.add($f.multiplyScalar(e)),this}translateX(t){return this.translateOnAxis(Gf,t)}translateY(t){return this.translateOnAxis(qf,t)}translateZ(t){return this.translateOnAxis(Xf,t)}localToWorld(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(bn.copy(this.matrixWorld).invert())}lookAt(t,e,s){t.isVector3?Aa.copy(t):Aa.set(t,e,s);const i=this.parent;this.updateWorldMatrix(!0,!1),qr.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?bn.lookAt(qr,Aa,this.up):bn.lookAt(Aa,qr,this.up),this.quaternion.setFromRotationMatrix(bn),i&&(bn.extractRotation(i.matrixWorld),ki.setFromRotationMatrix(bn),this.quaternion.premultiply(ki.invert()))}add(t){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(t.removeFromParent(),t.parent=this,this.children.push(t),t.dispatchEvent(Yf),Vi.child=t,this.dispatchEvent(Vi),Vi.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let s=0;s<arguments.length;s++)this.remove(arguments[s]);return this}const e=this.children.indexOf(t);return e!==-1&&(t.parent=null,this.children.splice(e,1),t.dispatchEvent($w),nc.child=t,this.dispatchEvent(nc),nc.child=null),this}removeFromParent(){const t=this.parent;return t!==null&&t.remove(this),this}clear(){return this.remove(...this.children)}attach(t){return this.updateWorldMatrix(!0,!1),bn.copy(this.matrixWorld).invert(),t.parent!==null&&(t.parent.updateWorldMatrix(!0,!1),bn.multiply(t.parent.matrixWorld)),t.applyMatrix4(bn),t.removeFromParent(),t.parent=this,this.children.push(t),t.updateWorldMatrix(!1,!0),t.dispatchEvent(Yf),Vi.child=t,this.dispatchEvent(Vi),Vi.child=null,this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,e){if(this[t]===e)return this;for(let s=0,i=this.children.length;s<i;s++){const o=this.children[s].getObjectByProperty(t,e);if(o!==void 0)return o}}getObjectsByProperty(t,e,s=[]){this[t]===e&&s.push(this);const i=this.children;for(let r=0,o=i.length;r<o;r++)i[r].getObjectsByProperty(t,e,s);return s}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(qr,t,Ww),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(qr,Hw,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return t.set(e[8],e[9],e[10]).normalize()}raycast(){}traverse(t){t(this);const e=this.children;for(let s=0,i=e.length;s<i;s++)e[s].traverse(t)}traverseVisible(t){if(this.visible===!1)return;t(this);const e=this.children;for(let s=0,i=e.length;s<i;s++)e[s].traverseVisible(t)}traverseAncestors(t){const e=this.parent;e!==null&&(t(e),e.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);const e=this.children;for(let s=0,i=e.length;s<i;s++){const r=e[s];(r.matrixWorldAutoUpdate===!0||t===!0)&&r.updateMatrixWorld(t)}}updateWorldMatrix(t,e){const s=this.parent;if(t===!0&&s!==null&&s.matrixWorldAutoUpdate===!0&&s.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),e===!0){const i=this.children;for(let r=0,o=i.length;r<o;r++){const a=i[r];a.matrixWorldAutoUpdate===!0&&a.updateWorldMatrix(!1,!0)}}}toJSON(t){const e=t===void 0||typeof t=="string",s={};e&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},s.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),i.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(i.type="BatchedMesh",i.perObjectFrustumCulled=this.perObjectFrustumCulled,i.sortObjects=this.sortObjects,i.drawRanges=this._drawRanges,i.reservedRanges=this._reservedRanges,i.visibility=this._visibility,i.active=this._active,i.bounds=this._bounds.map(a=>({boxInitialized:a.boxInitialized,boxMin:a.box.min.toArray(),boxMax:a.box.max.toArray(),sphereInitialized:a.sphereInitialized,sphereRadius:a.sphere.radius,sphereCenter:a.sphere.center.toArray()})),i.maxGeometryCount=this._maxGeometryCount,i.maxVertexCount=this._maxVertexCount,i.maxIndexCount=this._maxIndexCount,i.geometryInitialized=this._geometryInitialized,i.geometryCount=this._geometryCount,i.matricesTexture=this._matricesTexture.toJSON(t),this._colorsTexture!==null&&(i.colorsTexture=this._colorsTexture.toJSON(t)),this.boundingSphere!==null&&(i.boundingSphere={center:i.boundingSphere.center.toArray(),radius:i.boundingSphere.radius}),this.boundingBox!==null&&(i.boundingBox={min:i.boundingBox.min.toArray(),max:i.boundingBox.max.toArray()}));function r(a,l){return a[l.uuid]===void 0&&(a[l.uuid]=l.toJSON(t)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(i.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=r(t.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const l=a.shapes;if(Array.isArray(l))for(let u=0,c=l.length;u<c;u++){const h=l[u];r(t.shapes,h)}else r(t.shapes,l)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(r(t.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let l=0,u=this.material.length;l<u;l++)a.push(r(t.materials,this.material[l]));i.material=a}else i.material=r(t.materials,this.material);if(this.children.length>0){i.children=[];for(let a=0;a<this.children.length;a++)i.children.push(this.children[a].toJSON(t).object)}if(this.animations.length>0){i.animations=[];for(let a=0;a<this.animations.length;a++){const l=this.animations[a];i.animations.push(r(t.animations,l))}}if(e){const a=o(t.geometries),l=o(t.materials),u=o(t.textures),c=o(t.images),h=o(t.shapes),d=o(t.skeletons),p=o(t.animations),f=o(t.nodes);a.length>0&&(s.geometries=a),l.length>0&&(s.materials=l),u.length>0&&(s.textures=u),c.length>0&&(s.images=c),h.length>0&&(s.shapes=h),d.length>0&&(s.skeletons=d),p.length>0&&(s.animations=p),f.length>0&&(s.nodes=f)}return s.object=i,s;function o(a){const l=[];for(const u in a){const c=a[u];delete c.metadata,l.push(c)}return l}}clone(t){return new this.constructor().copy(this,t)}copy(t,e=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldAutoUpdate=t.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.animations=t.animations.slice(),this.userData=JSON.parse(JSON.stringify(t.userData)),e===!0)for(let s=0;s<t.children.length;s++){const i=t.children[s];this.add(i.clone())}return this}}he.DEFAULT_UP=new z(0,1,0);he.DEFAULT_MATRIX_AUTO_UPDATE=!0;he.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const rn=new z,Bn=new z,sc=new z,Un=new z,Li=new z,Ii=new z,Zf=new z,ic=new z,rc=new z,oc=new z;class An{constructor(t=new z,e=new z,s=new z){this.a=t,this.b=e,this.c=s}static getNormal(t,e,s,i){i.subVectors(s,e),rn.subVectors(t,e),i.cross(rn);const r=i.lengthSq();return r>0?i.multiplyScalar(1/Math.sqrt(r)):i.set(0,0,0)}static getBarycoord(t,e,s,i,r){rn.subVectors(i,e),Bn.subVectors(s,e),sc.subVectors(t,e);const o=rn.dot(rn),a=rn.dot(Bn),l=rn.dot(sc),u=Bn.dot(Bn),c=Bn.dot(sc),h=o*u-a*a;if(h===0)return r.set(0,0,0),null;const d=1/h,p=(u*l-a*c)*d,f=(o*c-a*l)*d;return r.set(1-p-f,f,p)}static containsPoint(t,e,s,i){return this.getBarycoord(t,e,s,i,Un)===null?!1:Un.x>=0&&Un.y>=0&&Un.x+Un.y<=1}static getInterpolation(t,e,s,i,r,o,a,l){return this.getBarycoord(t,e,s,i,Un)===null?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(r,Un.x),l.addScaledVector(o,Un.y),l.addScaledVector(a,Un.z),l)}static isFrontFacing(t,e,s,i){return rn.subVectors(s,e),Bn.subVectors(t,e),rn.cross(Bn).dot(i)<0}set(t,e,s){return this.a.copy(t),this.b.copy(e),this.c.copy(s),this}setFromPointsAndIndices(t,e,s,i){return this.a.copy(t[e]),this.b.copy(t[s]),this.c.copy(t[i]),this}setFromAttributeAndIndices(t,e,s,i){return this.a.fromBufferAttribute(t,e),this.b.fromBufferAttribute(t,s),this.c.fromBufferAttribute(t,i),this}clone(){return new this.constructor().copy(this)}copy(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}getArea(){return rn.subVectors(this.c,this.b),Bn.subVectors(this.a,this.b),rn.cross(Bn).length()*.5}getMidpoint(t){return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(t){return An.getNormal(this.a,this.b,this.c,t)}getPlane(t){return t.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(t,e){return An.getBarycoord(t,this.a,this.b,this.c,e)}getInterpolation(t,e,s,i,r){return An.getInterpolation(t,this.a,this.b,this.c,e,s,i,r)}containsPoint(t){return An.containsPoint(t,this.a,this.b,this.c)}isFrontFacing(t){return An.isFrontFacing(this.a,this.b,this.c,t)}intersectsBox(t){return t.intersectsTriangle(this)}closestPointToPoint(t,e){const s=this.a,i=this.b,r=this.c;let o,a;Li.subVectors(i,s),Ii.subVectors(r,s),ic.subVectors(t,s);const l=Li.dot(ic),u=Ii.dot(ic);if(l<=0&&u<=0)return e.copy(s);rc.subVectors(t,i);const c=Li.dot(rc),h=Ii.dot(rc);if(c>=0&&h<=c)return e.copy(i);const d=l*h-c*u;if(d<=0&&l>=0&&c<=0)return o=l/(l-c),e.copy(s).addScaledVector(Li,o);oc.subVectors(t,r);const p=Li.dot(oc),f=Ii.dot(oc);if(f>=0&&p<=f)return e.copy(r);const y=p*u-l*f;if(y<=0&&u>=0&&f<=0)return a=u/(u-f),e.copy(s).addScaledVector(Ii,a);const M=c*f-p*h;if(M<=0&&h-c>=0&&p-f>=0)return Zf.subVectors(r,i),a=(h-c)/(h-c+(p-f)),e.copy(i).addScaledVector(Zf,a);const m=1/(M+y+d);return o=y*m,a=d*m,e.copy(s).addScaledVector(Li,o).addScaledVector(Ii,a)}equals(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}const hy={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},hs={h:0,s:0,l:0},za={h:0,s:0,l:0};function ac(n,t,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?n+(t-n)*6*e:e<1/2?t:e<2/3?n+(t-n)*6*(2/3-e):n}class mt{constructor(t,e,s){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(t,e,s)}set(t,e,s){if(e===void 0&&s===void 0){const i=t;i&&i.isColor?this.copy(i):typeof i=="number"?this.setHex(i):typeof i=="string"&&this.setStyle(i)}else this.setRGB(t,e,s);return this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t,e=Wn){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(t&255)/255,en.toWorkingColorSpace(this,e),this}setRGB(t,e,s,i=en.workingColorSpace){return this.r=t,this.g=e,this.b=s,en.toWorkingColorSpace(this,i),this}setHSL(t,e,s,i=en.workingColorSpace){if(t=Hd(t,1),e=ce(e,0,1),s=ce(s,0,1),e===0)this.r=this.g=this.b=s;else{const r=s<=.5?s*(1+e):s+e-s*e,o=2*s-r;this.r=ac(o,r,t+1/3),this.g=ac(o,r,t),this.b=ac(o,r,t-1/3)}return en.toWorkingColorSpace(this,i),this}setStyle(t,e=Wn){function s(r){r!==void 0&&parseFloat(r)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}let i;if(i=/^(\w+)\(([^\)]*)\)/.exec(t)){let r;const o=i[1],a=i[2];switch(o){case"rgb":case"rgba":if(r=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return s(r[4]),this.setRGB(Math.min(255,parseInt(r[1],10))/255,Math.min(255,parseInt(r[2],10))/255,Math.min(255,parseInt(r[3],10))/255,e);if(r=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return s(r[4]),this.setRGB(Math.min(100,parseInt(r[1],10))/100,Math.min(100,parseInt(r[2],10))/100,Math.min(100,parseInt(r[3],10))/100,e);break;case"hsl":case"hsla":if(r=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return s(r[4]),this.setHSL(parseFloat(r[1])/360,parseFloat(r[2])/100,parseFloat(r[3])/100,e);break;default:console.warn("THREE.Color: Unknown color model "+t)}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(t)){const r=i[1],o=r.length;if(o===3)return this.setRGB(parseInt(r.charAt(0),16)/15,parseInt(r.charAt(1),16)/15,parseInt(r.charAt(2),16)/15,e);if(o===6)return this.setHex(parseInt(r,16),e);console.warn("THREE.Color: Invalid hex color "+t)}else if(t&&t.length>0)return this.setColorName(t,e);return this}setColorName(t,e=Wn){const s=hy[t.toLowerCase()];return s!==void 0?this.setHex(s,e):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copySRGBToLinear(t){return this.r=ar(t.r),this.g=ar(t.g),this.b=ar(t.b),this}copyLinearToSRGB(t){return this.r=Xu(t.r),this.g=Xu(t.g),this.b=Xu(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(t=Wn){return en.fromWorkingColorSpace(le.copy(this),t),Math.round(ce(le.r*255,0,255))*65536+Math.round(ce(le.g*255,0,255))*256+Math.round(ce(le.b*255,0,255))}getHexString(t=Wn){return("000000"+this.getHex(t).toString(16)).slice(-6)}getHSL(t,e=en.workingColorSpace){en.fromWorkingColorSpace(le.copy(this),e);const s=le.r,i=le.g,r=le.b,o=Math.max(s,i,r),a=Math.min(s,i,r);let l,u;const c=(a+o)/2;if(a===o)l=0,u=0;else{const h=o-a;switch(u=c<=.5?h/(o+a):h/(2-o-a),o){case s:l=(i-r)/h+(i<r?6:0);break;case i:l=(r-s)/h+2;break;case r:l=(s-i)/h+4;break}l/=6}return t.h=l,t.s=u,t.l=c,t}getRGB(t,e=en.workingColorSpace){return en.fromWorkingColorSpace(le.copy(this),e),t.r=le.r,t.g=le.g,t.b=le.b,t}getStyle(t=Wn){en.fromWorkingColorSpace(le.copy(this),t);const e=le.r,s=le.g,i=le.b;return t!==Wn?`color(${t} ${e.toFixed(3)} ${s.toFixed(3)} ${i.toFixed(3)})`:`rgb(${Math.round(e*255)},${Math.round(s*255)},${Math.round(i*255)})`}offsetHSL(t,e,s){return this.getHSL(hs),this.setHSL(hs.h+t,hs.s+e,hs.l+s)}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this}lerpColors(t,e,s){return this.r=t.r+(e.r-t.r)*s,this.g=t.g+(e.g-t.g)*s,this.b=t.b+(e.b-t.b)*s,this}lerpHSL(t,e){this.getHSL(hs),t.getHSL(za);const s=mo(hs.h,za.h,e),i=mo(hs.s,za.s,e),r=mo(hs.l,za.l,e);return this.setHSL(s,i,r),this}setFromVector3(t){return this.r=t.x,this.g=t.y,this.b=t.z,this}applyMatrix3(t){const e=this.r,s=this.g,i=this.b,r=t.elements;return this.r=r[0]*e+r[3]*s+r[6]*i,this.g=r[1]*e+r[4]*s+r[7]*i,this.b=r[2]*e+r[5]*s+r[8]*i,this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,e=0){return this.r=t[e],this.g=t[e+1],this.b=t[e+2],this}toArray(t=[],e=0){return t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t}fromBufferAttribute(t,e){return this.r=t.getX(e),this.g=t.getY(e),this.b=t.getZ(e),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const le=new mt;mt.NAMES=hy;let Gw=0;class be extends xi{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:Gw++}),this.uuid=Qn(),this.name="",this.type="Material",this.blending=_f,this.side=_h,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=Af,this.blendDst=zf,this.blendEquation=Cf,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new mt(0,0,0),this.blendAlpha=0,this.depthFunc=Ef,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=Pf,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=_i,this.stencilZFail=_i,this.stencilZPass=_i,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(t){this._alphaTest>0!=t>0&&this.version++,this._alphaTest=t}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(t){if(t!==void 0)for(const e in t){const s=t[e];if(s===void 0){console.warn(`THREE.Material: parameter '${e}' has value of undefined.`);continue}const i=this[e];if(i===void 0){console.warn(`THREE.Material: '${e}' is not a property of THREE.${this.type}.`);continue}i&&i.isColor?i.set(s):i&&i.isVector3&&s&&s.isVector3?i.copy(s):this[e]=s}}toJSON(t){const e=t===void 0||typeof t=="string";e&&(t={textures:{},images:{}});const s={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};s.uuid=this.uuid,s.type=this.type,this.name!==""&&(s.name=this.name),this.color&&this.color.isColor&&(s.color=this.color.getHex()),this.roughness!==void 0&&(s.roughness=this.roughness),this.metalness!==void 0&&(s.metalness=this.metalness),this.sheen!==void 0&&(s.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(s.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(s.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(s.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(s.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(s.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(s.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(s.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(s.shininess=this.shininess),this.clearcoat!==void 0&&(s.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(s.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(s.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(s.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(s.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,s.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(s.dispersion=this.dispersion),this.iridescence!==void 0&&(s.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(s.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(s.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(s.iridescenceMap=this.iridescenceMap.toJSON(t).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(s.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(t).uuid),this.anisotropy!==void 0&&(s.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(s.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(s.anisotropyMap=this.anisotropyMap.toJSON(t).uuid),this.map&&this.map.isTexture&&(s.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(s.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(s.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(s.lightMap=this.lightMap.toJSON(t).uuid,s.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(s.aoMap=this.aoMap.toJSON(t).uuid,s.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(s.bumpMap=this.bumpMap.toJSON(t).uuid,s.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(s.normalMap=this.normalMap.toJSON(t).uuid,s.normalMapType=this.normalMapType,s.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(s.displacementMap=this.displacementMap.toJSON(t).uuid,s.displacementScale=this.displacementScale,s.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(s.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(s.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(s.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(s.specularMap=this.specularMap.toJSON(t).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(s.specularIntensityMap=this.specularIntensityMap.toJSON(t).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(s.specularColorMap=this.specularColorMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(s.envMap=this.envMap.toJSON(t).uuid,this.combine!==void 0&&(s.combine=this.combine)),this.envMapRotation!==void 0&&(s.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(s.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(s.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(s.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(s.gradientMap=this.gradientMap.toJSON(t).uuid),this.transmission!==void 0&&(s.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(s.transmissionMap=this.transmissionMap.toJSON(t).uuid),this.thickness!==void 0&&(s.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(s.thicknessMap=this.thicknessMap.toJSON(t).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(s.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(s.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(s.size=this.size),this.shadowSide!==null&&(s.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(s.sizeAttenuation=this.sizeAttenuation),this.blending!==_f&&(s.blending=this.blending),this.side!==_h&&(s.side=this.side),this.vertexColors===!0&&(s.vertexColors=!0),this.opacity<1&&(s.opacity=this.opacity),this.transparent===!0&&(s.transparent=!0),this.blendSrc!==Af&&(s.blendSrc=this.blendSrc),this.blendDst!==zf&&(s.blendDst=this.blendDst),this.blendEquation!==Cf&&(s.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(s.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(s.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(s.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(s.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(s.blendAlpha=this.blendAlpha),this.depthFunc!==Ef&&(s.depthFunc=this.depthFunc),this.depthTest===!1&&(s.depthTest=this.depthTest),this.depthWrite===!1&&(s.depthWrite=this.depthWrite),this.colorWrite===!1&&(s.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(s.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==Pf&&(s.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(s.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(s.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==_i&&(s.stencilFail=this.stencilFail),this.stencilZFail!==_i&&(s.stencilZFail=this.stencilZFail),this.stencilZPass!==_i&&(s.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(s.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(s.rotation=this.rotation),this.polygonOffset===!0&&(s.polygonOffset=!0),this.polygonOffsetFactor!==0&&(s.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(s.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(s.linewidth=this.linewidth),this.dashSize!==void 0&&(s.dashSize=this.dashSize),this.gapSize!==void 0&&(s.gapSize=this.gapSize),this.scale!==void 0&&(s.scale=this.scale),this.dithering===!0&&(s.dithering=!0),this.alphaTest>0&&(s.alphaTest=this.alphaTest),this.alphaHash===!0&&(s.alphaHash=!0),this.alphaToCoverage===!0&&(s.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(s.premultipliedAlpha=!0),this.forceSinglePass===!0&&(s.forceSinglePass=!0),this.wireframe===!0&&(s.wireframe=!0),this.wireframeLinewidth>1&&(s.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(s.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(s.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(s.flatShading=!0),this.visible===!1&&(s.visible=!1),this.toneMapped===!1&&(s.toneMapped=!1),this.fog===!1&&(s.fog=!1),Object.keys(this.userData).length>0&&(s.userData=this.userData);function i(r){const o=[];for(const a in r){const l=r[a];delete l.metadata,o.push(l)}return o}if(e){const r=i(t.textures),o=i(t.images);r.length>0&&(s.textures=r),o.length>0&&(s.images=o)}return s}clone(){return new this.constructor().copy(this)}copy(t){this.name=t.name,this.blending=t.blending,this.side=t.side,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.blendColor.copy(t.blendColor),this.blendAlpha=t.blendAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;const e=t.clippingPlanes;let s=null;if(e!==null){const i=e.length;s=new Array(i);for(let r=0;r!==i;++r)s[r]=e[r].clone()}return this.clippingPlanes=s,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.alphaHash=t.alphaHash,this.alphaToCoverage=t.alphaToCoverage,this.premultipliedAlpha=t.premultipliedAlpha,this.forceSinglePass=t.forceSinglePass,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(t){t===!0&&this.version++}}class dy extends be{constructor(t){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new mt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Us,this.combine=Wd,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}}const Lt=new z,Ea=new Q;class Rs{constructor(t,e,s=!1){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=t,this.itemSize=e,this.count=t!==void 0?t.length/e:0,this.normalized=s,this.usage=Al,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.gpuType=ry,this.version=0}onUploadCallback(){}set needsUpdate(t){t===!0&&this.version++}get updateRange(){return uy("THREE.BufferAttribute: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(t){return this.usage=t,this}addUpdateRange(t,e){this.updateRanges.push({start:t,count:e})}clearUpdateRanges(){this.updateRanges.length=0}copy(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this.gpuType=t.gpuType,this}copyAt(t,e,s){t*=this.itemSize,s*=e.itemSize;for(let i=0,r=this.itemSize;i<r;i++)this.array[t+i]=e.array[s+i];return this}copyArray(t){return this.array.set(t),this}applyMatrix3(t){if(this.itemSize===2)for(let e=0,s=this.count;e<s;e++)Ea.fromBufferAttribute(this,e),Ea.applyMatrix3(t),this.setXY(e,Ea.x,Ea.y);else if(this.itemSize===3)for(let e=0,s=this.count;e<s;e++)Lt.fromBufferAttribute(this,e),Lt.applyMatrix3(t),this.setXYZ(e,Lt.x,Lt.y,Lt.z);return this}applyMatrix4(t){for(let e=0,s=this.count;e<s;e++)Lt.fromBufferAttribute(this,e),Lt.applyMatrix4(t),this.setXYZ(e,Lt.x,Lt.y,Lt.z);return this}applyNormalMatrix(t){for(let e=0,s=this.count;e<s;e++)Lt.fromBufferAttribute(this,e),Lt.applyNormalMatrix(t),this.setXYZ(e,Lt.x,Lt.y,Lt.z);return this}transformDirection(t){for(let e=0,s=this.count;e<s;e++)Lt.fromBufferAttribute(this,e),Lt.transformDirection(t),this.setXYZ(e,Lt.x,Lt.y,Lt.z);return this}set(t,e=0){return this.array.set(t,e),this}getComponent(t,e){let s=this.array[t*this.itemSize+e];return this.normalized&&(s=cn(s,this.array)),s}setComponent(t,e,s){return this.normalized&&(s=ot(s,this.array)),this.array[t*this.itemSize+e]=s,this}getX(t){let e=this.array[t*this.itemSize];return this.normalized&&(e=cn(e,this.array)),e}setX(t,e){return this.normalized&&(e=ot(e,this.array)),this.array[t*this.itemSize]=e,this}getY(t){let e=this.array[t*this.itemSize+1];return this.normalized&&(e=cn(e,this.array)),e}setY(t,e){return this.normalized&&(e=ot(e,this.array)),this.array[t*this.itemSize+1]=e,this}getZ(t){let e=this.array[t*this.itemSize+2];return this.normalized&&(e=cn(e,this.array)),e}setZ(t,e){return this.normalized&&(e=ot(e,this.array)),this.array[t*this.itemSize+2]=e,this}getW(t){let e=this.array[t*this.itemSize+3];return this.normalized&&(e=cn(e,this.array)),e}setW(t,e){return this.normalized&&(e=ot(e,this.array)),this.array[t*this.itemSize+3]=e,this}setXY(t,e,s){return t*=this.itemSize,this.normalized&&(e=ot(e,this.array),s=ot(s,this.array)),this.array[t+0]=e,this.array[t+1]=s,this}setXYZ(t,e,s,i){return t*=this.itemSize,this.normalized&&(e=ot(e,this.array),s=ot(s,this.array),i=ot(i,this.array)),this.array[t+0]=e,this.array[t+1]=s,this.array[t+2]=i,this}setXYZW(t,e,s,i,r){return t*=this.itemSize,this.normalized&&(e=ot(e,this.array),s=ot(s,this.array),i=ot(i,this.array),r=ot(r,this.array)),this.array[t+0]=e,this.array[t+1]=s,this.array[t+2]=i,this.array[t+3]=r,this}onUpload(t){return this.onUploadCallback=t,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const t={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(t.name=this.name),this.usage!==Al&&(t.usage=this.usage),t}}class qw extends Rs{constructor(t,e,s){super(new Uint16Array(t),e,s)}}class Xw extends Rs{constructor(t,e,s){super(new Uint32Array(t),e,s)}}class zh extends Rs{constructor(t,e,s){super(new Float32Array(t),e,s)}}let Yw=0;const We=new Pt,lc=new he,Fi=new z,Re=new Yo,Xr=new Yo,Ht=new z;class iu extends xi{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:Yw++}),this.uuid=Qn(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(t){return Array.isArray(t)?this.index=new(kw(t)?Xw:qw)(t,1):this.index=t,this}getAttribute(t){return this.attributes[t]}setAttribute(t,e){return this.attributes[t]=e,this}deleteAttribute(t){return delete this.attributes[t],this}hasAttribute(t){return this.attributes[t]!==void 0}addGroup(t,e,s=0){this.groups.push({start:t,count:e,materialIndex:s})}clearGroups(){this.groups=[]}setDrawRange(t,e){this.drawRange.start=t,this.drawRange.count=e}applyMatrix4(t){const e=this.attributes.position;e!==void 0&&(e.applyMatrix4(t),e.needsUpdate=!0);const s=this.attributes.normal;if(s!==void 0){const r=new In().getNormalMatrix(t);s.applyNormalMatrix(r),s.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(t),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(t){return We.makeRotationFromQuaternion(t),this.applyMatrix4(We),this}rotateX(t){return We.makeRotationX(t),this.applyMatrix4(We),this}rotateY(t){return We.makeRotationY(t),this.applyMatrix4(We),this}rotateZ(t){return We.makeRotationZ(t),this.applyMatrix4(We),this}translate(t,e,s){return We.makeTranslation(t,e,s),this.applyMatrix4(We),this}scale(t,e,s){return We.makeScale(t,e,s),this.applyMatrix4(We),this}lookAt(t){return lc.lookAt(t),lc.updateMatrix(),this.applyMatrix4(lc.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Fi).negate(),this.translate(Fi.x,Fi.y,Fi.z),this}setFromPoints(t){const e=[];for(let s=0,i=t.length;s<i;s++){const r=t[s];e.push(r.x,r.y,r.z||0)}return this.setAttribute("position",new zh(e,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Yo);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new z(-1/0,-1/0,-1/0),new z(1/0,1/0,1/0));return}if(t!==void 0){if(this.boundingBox.setFromBufferAttribute(t),e)for(let s=0,i=e.length;s<i;s++){const r=e[s];Re.setFromBufferAttribute(r),this.morphTargetsRelative?(Ht.addVectors(this.boundingBox.min,Re.min),this.boundingBox.expandByPoint(Ht),Ht.addVectors(this.boundingBox.max,Re.max),this.boundingBox.expandByPoint(Ht)):(this.boundingBox.expandByPoint(Re.min),this.boundingBox.expandByPoint(Re.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new $d);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new z,1/0);return}if(t){const s=this.boundingSphere.center;if(Re.setFromBufferAttribute(t),e)for(let r=0,o=e.length;r<o;r++){const a=e[r];Xr.setFromBufferAttribute(a),this.morphTargetsRelative?(Ht.addVectors(Re.min,Xr.min),Re.expandByPoint(Ht),Ht.addVectors(Re.max,Xr.max),Re.expandByPoint(Ht)):(Re.expandByPoint(Xr.min),Re.expandByPoint(Xr.max))}Re.getCenter(s);let i=0;for(let r=0,o=t.count;r<o;r++)Ht.fromBufferAttribute(t,r),i=Math.max(i,s.distanceToSquared(Ht));if(e)for(let r=0,o=e.length;r<o;r++){const a=e[r],l=this.morphTargetsRelative;for(let u=0,c=a.count;u<c;u++)Ht.fromBufferAttribute(a,u),l&&(Fi.fromBufferAttribute(t,u),Ht.add(Fi)),i=Math.max(i,s.distanceToSquared(Ht))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const t=this.index,e=this.attributes;if(t===null||e.position===void 0||e.normal===void 0||e.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const s=e.position,i=e.normal,r=e.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Rs(new Float32Array(4*s.count),4));const o=this.getAttribute("tangent"),a=[],l=[];for(let V=0;V<s.count;V++)a[V]=new z,l[V]=new z;const u=new z,c=new z,h=new z,d=new Q,p=new Q,f=new Q,y=new z,M=new z;function m(V,W,H){u.fromBufferAttribute(s,V),c.fromBufferAttribute(s,W),h.fromBufferAttribute(s,H),d.fromBufferAttribute(r,V),p.fromBufferAttribute(r,W),f.fromBufferAttribute(r,H),c.sub(u),h.sub(u),p.sub(d),f.sub(d);const et=1/(p.x*f.y-f.x*p.y);isFinite(et)&&(y.copy(c).multiplyScalar(f.y).addScaledVector(h,-p.y).multiplyScalar(et),M.copy(h).multiplyScalar(p.x).addScaledVector(c,-f.x).multiplyScalar(et),a[V].add(y),a[W].add(y),a[H].add(y),l[V].add(M),l[W].add(M),l[H].add(M))}let g=this.groups;g.length===0&&(g=[{start:0,count:t.count}]);for(let V=0,W=g.length;V<W;++V){const H=g[V],et=H.start,Et=H.count;for(let gt=et,Ke=et+Et;gt<Ke;gt+=3)m(t.getX(gt+0),t.getX(gt+1),t.getX(gt+2))}const x=new z,S=new z,E=new z,L=new z;function A(V){E.fromBufferAttribute(i,V),L.copy(E);const W=a[V];x.copy(W),x.sub(E.multiplyScalar(E.dot(W))).normalize(),S.crossVectors(L,W);const et=S.dot(l[V])<0?-1:1;o.setXYZW(V,x.x,x.y,x.z,et)}for(let V=0,W=g.length;V<W;++V){const H=g[V],et=H.start,Et=H.count;for(let gt=et,Ke=et+Et;gt<Ke;gt+=3)A(t.getX(gt+0)),A(t.getX(gt+1)),A(t.getX(gt+2))}}computeVertexNormals(){const t=this.index,e=this.getAttribute("position");if(e!==void 0){let s=this.getAttribute("normal");if(s===void 0)s=new Rs(new Float32Array(e.count*3),3),this.setAttribute("normal",s);else for(let d=0,p=s.count;d<p;d++)s.setXYZ(d,0,0,0);const i=new z,r=new z,o=new z,a=new z,l=new z,u=new z,c=new z,h=new z;if(t)for(let d=0,p=t.count;d<p;d+=3){const f=t.getX(d+0),y=t.getX(d+1),M=t.getX(d+2);i.fromBufferAttribute(e,f),r.fromBufferAttribute(e,y),o.fromBufferAttribute(e,M),c.subVectors(o,r),h.subVectors(i,r),c.cross(h),a.fromBufferAttribute(s,f),l.fromBufferAttribute(s,y),u.fromBufferAttribute(s,M),a.add(c),l.add(c),u.add(c),s.setXYZ(f,a.x,a.y,a.z),s.setXYZ(y,l.x,l.y,l.z),s.setXYZ(M,u.x,u.y,u.z)}else for(let d=0,p=e.count;d<p;d+=3)i.fromBufferAttribute(e,d+0),r.fromBufferAttribute(e,d+1),o.fromBufferAttribute(e,d+2),c.subVectors(o,r),h.subVectors(i,r),c.cross(h),s.setXYZ(d+0,c.x,c.y,c.z),s.setXYZ(d+1,c.x,c.y,c.z),s.setXYZ(d+2,c.x,c.y,c.z);this.normalizeNormals(),s.needsUpdate=!0}}normalizeNormals(){const t=this.attributes.normal;for(let e=0,s=t.count;e<s;e++)Ht.fromBufferAttribute(t,e),Ht.normalize(),t.setXYZ(e,Ht.x,Ht.y,Ht.z)}toNonIndexed(){function t(a,l){const u=a.array,c=a.itemSize,h=a.normalized,d=new u.constructor(l.length*c);let p=0,f=0;for(let y=0,M=l.length;y<M;y++){a.isInterleavedBufferAttribute?p=l[y]*a.data.stride+a.offset:p=l[y]*c;for(let m=0;m<c;m++)d[f++]=u[p++]}return new Rs(d,c,h)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const e=new iu,s=this.index.array,i=this.attributes;for(const a in i){const l=i[a],u=t(l,s);e.setAttribute(a,u)}const r=this.morphAttributes;for(const a in r){const l=[],u=r[a];for(let c=0,h=u.length;c<h;c++){const d=u[c],p=t(d,s);l.push(p)}e.morphAttributes[a]=l}e.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const u=o[a];e.addGroup(u.start,u.count,u.materialIndex)}return e}toJSON(){const t={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,this.name!==""&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const u in l)l[u]!==void 0&&(t[u]=l[u]);return t}t.data={attributes:{}};const e=this.index;e!==null&&(t.data.index={type:e.array.constructor.name,array:Array.prototype.slice.call(e.array)});const s=this.attributes;for(const l in s){const u=s[l];t.data.attributes[l]=u.toJSON(t.data)}const i={};let r=!1;for(const l in this.morphAttributes){const u=this.morphAttributes[l],c=[];for(let h=0,d=u.length;h<d;h++){const p=u[h];c.push(p.toJSON(t.data))}c.length>0&&(i[l]=c,r=!0)}r&&(t.data.morphAttributes=i,t.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(t.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return a!==null&&(t.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),t}clone(){return new this.constructor().copy(this)}copy(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const e={};this.name=t.name;const s=t.index;s!==null&&this.setIndex(s.clone(e));const i=t.attributes;for(const u in i){const c=i[u];this.setAttribute(u,c.clone(e))}const r=t.morphAttributes;for(const u in r){const c=[],h=r[u];for(let d=0,p=h.length;d<p;d++)c.push(h[d].clone(e));this.morphAttributes[u]=c}this.morphTargetsRelative=t.morphTargetsRelative;const o=t.groups;for(let u=0,c=o.length;u<c;u++){const h=o[u];this.addGroup(h.start,h.count,h.materialIndex)}const a=t.boundingBox;a!==null&&(this.boundingBox=a.clone());const l=t.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const Qf=new Pt,Gs=new Dw,Ra=new $d,Jf=new z,Pi=new z,Oi=new z,Di=new z,uc=new z,ka=new z,Va=new Q,La=new Q,Ia=new Q,Kf=new z,tm=new z,em=new z,Fa=new z,Pa=new z;class Zw extends he{constructor(t=new iu,e=new dy){super(),this.isMesh=!0,this.type="Mesh",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),t.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),t.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}updateMorphTargets(){const e=this.geometry.morphAttributes,s=Object.keys(e);if(s.length>0){const i=e[s[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,o=i.length;r<o;r++){const a=i[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=r}}}}getVertexPosition(t,e){const s=this.geometry,i=s.attributes.position,r=s.morphAttributes.position,o=s.morphTargetsRelative;e.fromBufferAttribute(i,t);const a=this.morphTargetInfluences;if(r&&a){ka.set(0,0,0);for(let l=0,u=r.length;l<u;l++){const c=a[l],h=r[l];c!==0&&(uc.fromBufferAttribute(h,t),o?ka.addScaledVector(uc,c):ka.addScaledVector(uc.sub(e),c))}e.add(ka)}return e}raycast(t,e){const s=this.geometry,i=this.material,r=this.matrixWorld;i!==void 0&&(s.boundingSphere===null&&s.computeBoundingSphere(),Ra.copy(s.boundingSphere),Ra.applyMatrix4(r),Gs.copy(t.ray).recast(t.near),!(Ra.containsPoint(Gs.origin)===!1&&(Gs.intersectSphere(Ra,Jf)===null||Gs.origin.distanceToSquared(Jf)>(t.far-t.near)**2))&&(Qf.copy(r).invert(),Gs.copy(t.ray).applyMatrix4(Qf),!(s.boundingBox!==null&&Gs.intersectsBox(s.boundingBox)===!1)&&this._computeIntersections(t,e,Gs)))}_computeIntersections(t,e,s){let i;const r=this.geometry,o=this.material,a=r.index,l=r.attributes.position,u=r.attributes.uv,c=r.attributes.uv1,h=r.attributes.normal,d=r.groups,p=r.drawRange;if(a!==null)if(Array.isArray(o))for(let f=0,y=d.length;f<y;f++){const M=d[f],m=o[M.materialIndex],g=Math.max(M.start,p.start),x=Math.min(a.count,Math.min(M.start+M.count,p.start+p.count));for(let S=g,E=x;S<E;S+=3){const L=a.getX(S),A=a.getX(S+1),V=a.getX(S+2);i=Oa(this,m,t,s,u,c,h,L,A,V),i&&(i.faceIndex=Math.floor(S/3),i.face.materialIndex=M.materialIndex,e.push(i))}}else{const f=Math.max(0,p.start),y=Math.min(a.count,p.start+p.count);for(let M=f,m=y;M<m;M+=3){const g=a.getX(M),x=a.getX(M+1),S=a.getX(M+2);i=Oa(this,o,t,s,u,c,h,g,x,S),i&&(i.faceIndex=Math.floor(M/3),e.push(i))}}else if(l!==void 0)if(Array.isArray(o))for(let f=0,y=d.length;f<y;f++){const M=d[f],m=o[M.materialIndex],g=Math.max(M.start,p.start),x=Math.min(l.count,Math.min(M.start+M.count,p.start+p.count));for(let S=g,E=x;S<E;S+=3){const L=S,A=S+1,V=S+2;i=Oa(this,m,t,s,u,c,h,L,A,V),i&&(i.faceIndex=Math.floor(S/3),i.face.materialIndex=M.materialIndex,e.push(i))}}else{const f=Math.max(0,p.start),y=Math.min(l.count,p.start+p.count);for(let M=f,m=y;M<m;M+=3){const g=M,x=M+1,S=M+2;i=Oa(this,o,t,s,u,c,h,g,x,S),i&&(i.faceIndex=Math.floor(M/3),e.push(i))}}}}function Qw(n,t,e,s,i,r,o,a){let l;if(t.side===ey?l=s.intersectTriangle(o,r,i,!0,a):l=s.intersectTriangle(i,r,o,t.side===_h,a),l===null)return null;Pa.copy(a),Pa.applyMatrix4(n.matrixWorld);const u=e.ray.origin.distanceTo(Pa);return u<e.near||u>e.far?null:{distance:u,point:Pa.clone(),object:n}}function Oa(n,t,e,s,i,r,o,a,l,u){n.getVertexPosition(a,Pi),n.getVertexPosition(l,Oi),n.getVertexPosition(u,Di);const c=Qw(n,t,e,s,Pi,Oi,Di,Fa);if(c){i&&(Va.fromBufferAttribute(i,a),La.fromBufferAttribute(i,l),Ia.fromBufferAttribute(i,u),c.uv=An.getInterpolation(Fa,Pi,Oi,Di,Va,La,Ia,new Q)),r&&(Va.fromBufferAttribute(r,a),La.fromBufferAttribute(r,l),Ia.fromBufferAttribute(r,u),c.uv1=An.getInterpolation(Fa,Pi,Oi,Di,Va,La,Ia,new Q)),o&&(Kf.fromBufferAttribute(o,a),tm.fromBufferAttribute(o,l),em.fromBufferAttribute(o,u),c.normal=An.getInterpolation(Fa,Pi,Oi,Di,Kf,tm,em,new z),c.normal.dot(s.direction)>0&&c.normal.multiplyScalar(-1));const h={a,b:l,c:u,normal:new z,materialIndex:0};An.getNormal(Pi,Oi,Di,h.normal),c.face=h}return c}class py extends he{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Pt,this.projectionMatrix=new Pt,this.projectionMatrixInverse=new Pt,this.coordinateSystem=Xn}copy(t,e){return super.copy(t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this.coordinateSystem=t.coordinateSystem,this}getWorldDirection(t){return super.getWorldDirection(t).negate()}updateMatrixWorld(t){super.updateMatrixWorld(t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(t,e){super.updateWorldMatrix(t,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const ds=new z,nm=new Q,sm=new Q;class fy extends py{constructor(t=50,e=1,s=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=t,this.zoom=1,this.near=s,this.far=i,this.focus=10,this.aspect=e,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=t.view===null?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this}setFocalLength(t){const e=.5*this.getFilmHeight()/t;this.fov=Po*2*Math.atan(e),this.updateProjectionMatrix()}getFocalLength(){const t=Math.tan(fo*.5*this.fov);return .5*this.getFilmHeight()/t}getEffectiveFOV(){return Po*2*Math.atan(Math.tan(fo*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(t,e,s){ds.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),e.set(ds.x,ds.y).multiplyScalar(-t/ds.z),ds.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),s.set(ds.x,ds.y).multiplyScalar(-t/ds.z)}getViewSize(t,e){return this.getViewBounds(t,nm,sm),e.subVectors(sm,nm)}setViewOffset(t,e,s,i,r,o){this.aspect=t/e,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=s,this.view.offsetY=i,this.view.width=r,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=this.near;let e=t*Math.tan(fo*.5*this.fov)/this.zoom,s=2*e,i=this.aspect*s,r=-.5*i;const o=this.view;if(this.view!==null&&this.view.enabled){const l=o.fullWidth,u=o.fullHeight;r+=o.offsetX*i/l,e-=o.offsetY*s/u,i*=o.width/l,s*=o.height/u}const a=this.filmOffset;a!==0&&(r+=t*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+i,e,e-s,t,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,this.view!==null&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}}const cc=new z,Jw=new z,Kw=new In;class Js{constructor(t=new z(1,0,0),e=0){this.isPlane=!0,this.normal=t,this.constant=e}set(t,e){return this.normal.copy(t),this.constant=e,this}setComponents(t,e,s,i){return this.normal.set(t,e,s),this.constant=i,this}setFromNormalAndCoplanarPoint(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this}setFromCoplanarPoints(t,e,s){const i=cc.subVectors(s,e).cross(Jw.subVectors(t,e)).normalize();return this.setFromNormalAndCoplanarPoint(i,t),this}copy(t){return this.normal.copy(t.normal),this.constant=t.constant,this}normalize(){const t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(t){return this.normal.dot(t)+this.constant}distanceToSphere(t){return this.distanceToPoint(t.center)-t.radius}projectPoint(t,e){return e.copy(t).addScaledVector(this.normal,-this.distanceToPoint(t))}intersectLine(t,e){const s=t.delta(cc),i=this.normal.dot(s);if(i===0)return this.distanceToPoint(t.start)===0?e.copy(t.start):null;const r=-(t.start.dot(this.normal)+this.constant)/i;return r<0||r>1?null:e.copy(t.start).addScaledVector(s,r)}intersectsLine(t){const e=this.distanceToPoint(t.start),s=this.distanceToPoint(t.end);return e<0&&s>0||s<0&&e>0}intersectsBox(t){return t.intersectsPlane(this)}intersectsSphere(t){return t.intersectsPlane(this)}coplanarPoint(t){return t.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(t,e){const s=e||Kw.getNormalMatrix(t),i=this.coplanarPoint(cc).applyMatrix4(t),r=this.normal.applyMatrix3(s).normalize();return this.constant=-i.dot(r),this}translate(t){return this.constant-=t.dot(this.normal),this}equals(t){return t.normal.equals(this.normal)&&t.constant===this.constant}clone(){return new this.constructor().copy(this)}}const qs=new $d,Da=new z;class tM{constructor(t=new Js,e=new Js,s=new Js,i=new Js,r=new Js,o=new Js){this.planes=[t,e,s,i,r,o]}set(t,e,s,i,r,o){const a=this.planes;return a[0].copy(t),a[1].copy(e),a[2].copy(s),a[3].copy(i),a[4].copy(r),a[5].copy(o),this}copy(t){const e=this.planes;for(let s=0;s<6;s++)e[s].copy(t.planes[s]);return this}setFromProjectionMatrix(t,e=Xn){const s=this.planes,i=t.elements,r=i[0],o=i[1],a=i[2],l=i[3],u=i[4],c=i[5],h=i[6],d=i[7],p=i[8],f=i[9],y=i[10],M=i[11],m=i[12],g=i[13],x=i[14],S=i[15];if(s[0].setComponents(l-r,d-u,M-p,S-m).normalize(),s[1].setComponents(l+r,d+u,M+p,S+m).normalize(),s[2].setComponents(l+o,d+c,M+f,S+g).normalize(),s[3].setComponents(l-o,d-c,M-f,S-g).normalize(),s[4].setComponents(l-a,d-h,M-y,S-x).normalize(),e===Xn)s[5].setComponents(l+a,d+h,M+y,S+x).normalize();else if(e===Fo)s[5].setComponents(a,h,y,x).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+e);return this}intersectsObject(t){if(t.boundingSphere!==void 0)t.boundingSphere===null&&t.computeBoundingSphere(),qs.copy(t.boundingSphere).applyMatrix4(t.matrixWorld);else{const e=t.geometry;e.boundingSphere===null&&e.computeBoundingSphere(),qs.copy(e.boundingSphere).applyMatrix4(t.matrixWorld)}return this.intersectsSphere(qs)}intersectsSprite(t){return qs.center.set(0,0,0),qs.radius=.7071067811865476,qs.applyMatrix4(t.matrixWorld),this.intersectsSphere(qs)}intersectsSphere(t){const e=this.planes,s=t.center,i=-t.radius;for(let r=0;r<6;r++)if(e[r].distanceToPoint(s)<i)return!1;return!0}intersectsBox(t){const e=this.planes;for(let s=0;s<6;s++){const i=e[s];if(Da.x=i.normal.x>0?t.max.x:t.min.x,Da.y=i.normal.y>0?t.max.y:t.min.y,Da.z=i.normal.z>0?t.max.z:t.min.z,i.distanceToPoint(Da)<0)return!1}return!0}containsPoint(t){const e=this.planes;for(let s=0;s<6;s++)if(e[s].distanceToPoint(t)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}class my extends py{constructor(t=-1,e=1,s=1,i=-1,r=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=e,this.top=s,this.bottom=i,this.near=r,this.far=o,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=t.view===null?null:Object.assign({},t.view),this}setViewOffset(t,e,s,i,r,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=s,this.view.offsetY=i,this.view.width=r,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),s=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let r=s-t,o=s+t,a=i+e,l=i-e;if(this.view!==null&&this.view.enabled){const u=(this.right-this.left)/this.view.fullWidth/this.zoom,c=(this.top-this.bottom)/this.view.fullHeight/this.zoom;r+=u*this.view.offsetX,o=r+u*this.view.width,a-=c*this.view.offsetY,l=a-c*this.view.height}this.projectionMatrix.makeOrthographic(r,o,a,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,this.view!==null&&(e.object.view=Object.assign({},this.view)),e}}class ru extends fn{constructor(t,e,s,i,r,o,a,l,u,c=Gu){if(c!==Gu&&c!==Vf)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");s===void 0&&c===Gu&&(s=aw),s===void 0&&c===Vf&&(s=uw),super(null,i,r,o,a,l,c,s,u),this.isDepthTexture=!0,this.image={width:t,height:e},this.magFilter=a!==void 0?a:Ls,this.minFilter=l!==void 0?l:Ls,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(t){return super.copy(t),this.compareFunction=t.compareFunction,this}toJSON(t){const e=super.toJSON(t);return this.compareFunction!==null&&(e.compareFunction=this.compareFunction),e}}const eM=new ru(1,1);eM.compareFunction=fw;class gy{constructor(t,e){this.isInterleavedBuffer=!0,this.array=t,this.stride=e,this.count=t!==void 0?t.length/e:0,this.usage=Al,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.version=0,this.uuid=Qn()}onUploadCallback(){}set needsUpdate(t){t===!0&&this.version++}get updateRange(){return uy("THREE.InterleavedBuffer: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(t){return this.usage=t,this}addUpdateRange(t,e){this.updateRanges.push({start:t,count:e})}clearUpdateRanges(){this.updateRanges.length=0}copy(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.usage=t.usage,this}copyAt(t,e,s){t*=this.stride,s*=e.stride;for(let i=0,r=this.stride;i<r;i++)this.array[t+i]=e.array[s+i];return this}set(t,e=0){return this.array.set(t,e),this}clone(t){t.arrayBuffers===void 0&&(t.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Qn()),t.arrayBuffers[this.array.buffer._uuid]===void 0&&(t.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const e=new this.array.constructor(t.arrayBuffers[this.array.buffer._uuid]),s=new this.constructor(e,this.stride);return s.setUsage(this.usage),s}onUpload(t){return this.onUploadCallback=t,this}toJSON(t){return t.arrayBuffers===void 0&&(t.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Qn()),t.arrayBuffers[this.array.buffer._uuid]===void 0&&(t.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const fe=new z;class Gd{constructor(t,e,s,i=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=t,this.itemSize=e,this.offset=s,this.normalized=i}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(t){this.data.needsUpdate=t}applyMatrix4(t){for(let e=0,s=this.data.count;e<s;e++)fe.fromBufferAttribute(this,e),fe.applyMatrix4(t),this.setXYZ(e,fe.x,fe.y,fe.z);return this}applyNormalMatrix(t){for(let e=0,s=this.count;e<s;e++)fe.fromBufferAttribute(this,e),fe.applyNormalMatrix(t),this.setXYZ(e,fe.x,fe.y,fe.z);return this}transformDirection(t){for(let e=0,s=this.count;e<s;e++)fe.fromBufferAttribute(this,e),fe.transformDirection(t),this.setXYZ(e,fe.x,fe.y,fe.z);return this}getComponent(t,e){let s=this.array[t*this.data.stride+this.offset+e];return this.normalized&&(s=cn(s,this.array)),s}setComponent(t,e,s){return this.normalized&&(s=ot(s,this.array)),this.data.array[t*this.data.stride+this.offset+e]=s,this}setX(t,e){return this.normalized&&(e=ot(e,this.array)),this.data.array[t*this.data.stride+this.offset]=e,this}setY(t,e){return this.normalized&&(e=ot(e,this.array)),this.data.array[t*this.data.stride+this.offset+1]=e,this}setZ(t,e){return this.normalized&&(e=ot(e,this.array)),this.data.array[t*this.data.stride+this.offset+2]=e,this}setW(t,e){return this.normalized&&(e=ot(e,this.array)),this.data.array[t*this.data.stride+this.offset+3]=e,this}getX(t){let e=this.data.array[t*this.data.stride+this.offset];return this.normalized&&(e=cn(e,this.array)),e}getY(t){let e=this.data.array[t*this.data.stride+this.offset+1];return this.normalized&&(e=cn(e,this.array)),e}getZ(t){let e=this.data.array[t*this.data.stride+this.offset+2];return this.normalized&&(e=cn(e,this.array)),e}getW(t){let e=this.data.array[t*this.data.stride+this.offset+3];return this.normalized&&(e=cn(e,this.array)),e}setXY(t,e,s){return t=t*this.data.stride+this.offset,this.normalized&&(e=ot(e,this.array),s=ot(s,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=s,this}setXYZ(t,e,s,i){return t=t*this.data.stride+this.offset,this.normalized&&(e=ot(e,this.array),s=ot(s,this.array),i=ot(i,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=s,this.data.array[t+2]=i,this}setXYZW(t,e,s,i,r){return t=t*this.data.stride+this.offset,this.normalized&&(e=ot(e,this.array),s=ot(s,this.array),i=ot(i,this.array),r=ot(r,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=s,this.data.array[t+2]=i,this.data.array[t+3]=r,this}clone(t){if(t===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const e=[];for(let s=0;s<this.count;s++){const i=s*this.data.stride+this.offset;for(let r=0;r<this.itemSize;r++)e.push(this.data.array[i+r])}return new Rs(new this.array.constructor(e),this.itemSize,this.normalized)}else return t.interleavedBuffers===void 0&&(t.interleavedBuffers={}),t.interleavedBuffers[this.data.uuid]===void 0&&(t.interleavedBuffers[this.data.uuid]=this.data.clone(t)),new Gd(t.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(t){if(t===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const e=[];for(let s=0;s<this.count;s++){const i=s*this.data.stride+this.offset;for(let r=0;r<this.itemSize;r++)e.push(this.data.array[i+r])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:e,normalized:this.normalized}}else return t.interleavedBuffers===void 0&&(t.interleavedBuffers={}),t.interleavedBuffers[this.data.uuid]===void 0&&(t.interleavedBuffers[this.data.uuid]=this.data.toJSON(t)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class nM extends be{constructor(t){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new mt(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.rotation=t.rotation,this.sizeAttenuation=t.sizeAttenuation,this.fog=t.fog,this}}class sM extends Rs{constructor(t,e,s,i=1){super(t,e,s),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=i}copy(t){return super.copy(t),this.meshPerAttribute=t.meshPerAttribute,this}toJSON(){const t=super.toJSON();return t.meshPerAttribute=this.meshPerAttribute,t.isInstancedBufferAttribute=!0,t}}class yy extends be{constructor(t){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new mt(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this.fog=t.fog,this}}class xy extends be{constructor(t){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new mt(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this.fog=t.fog,this}}class vy extends fn{constructor(t,e){super({width:t,height:e}),this.isFramebufferTexture=!0,this.magFilter=Ls,this.minFilter=Ls,this.generateMipmaps=!1,this.needsUpdate=!0}}class iM extends be{constructor(t){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new mt(0),this.transparent=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.fog=t.fog,this}}class Ny extends be{constructor(t){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new mt(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new mt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Is,this.normalScale=new Q(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Us,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.envMapIntensity=t.envMapIntensity,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}class rM extends Ny{constructor(t){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Q(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return ce(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(e){this.ior=(1+.4*e)/(1-.4*e)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new mt(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new mt(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new mt(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(t)}get anisotropy(){return this._anisotropy}set anisotropy(t){this._anisotropy>0!=t>0&&this.version++,this._anisotropy=t}get clearcoat(){return this._clearcoat}set clearcoat(t){this._clearcoat>0!=t>0&&this.version++,this._clearcoat=t}get iridescence(){return this._iridescence}set iridescence(t){this._iridescence>0!=t>0&&this.version++,this._iridescence=t}get dispersion(){return this._dispersion}set dispersion(t){this._dispersion>0!=t>0&&this.version++,this._dispersion=t}get sheen(){return this._sheen}set sheen(t){this._sheen>0!=t>0&&this.version++,this._sheen=t}get transmission(){return this._transmission}set transmission(t){this._transmission>0!=t>0&&this.version++,this._transmission=t}copy(t){return super.copy(t),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=t.anisotropy,this.anisotropyRotation=t.anisotropyRotation,this.anisotropyMap=t.anisotropyMap,this.clearcoat=t.clearcoat,this.clearcoatMap=t.clearcoatMap,this.clearcoatRoughness=t.clearcoatRoughness,this.clearcoatRoughnessMap=t.clearcoatRoughnessMap,this.clearcoatNormalMap=t.clearcoatNormalMap,this.clearcoatNormalScale.copy(t.clearcoatNormalScale),this.dispersion=t.dispersion,this.ior=t.ior,this.iridescence=t.iridescence,this.iridescenceMap=t.iridescenceMap,this.iridescenceIOR=t.iridescenceIOR,this.iridescenceThicknessRange=[...t.iridescenceThicknessRange],this.iridescenceThicknessMap=t.iridescenceThicknessMap,this.sheen=t.sheen,this.sheenColor.copy(t.sheenColor),this.sheenColorMap=t.sheenColorMap,this.sheenRoughness=t.sheenRoughness,this.sheenRoughnessMap=t.sheenRoughnessMap,this.transmission=t.transmission,this.transmissionMap=t.transmissionMap,this.thickness=t.thickness,this.thicknessMap=t.thicknessMap,this.attenuationDistance=t.attenuationDistance,this.attenuationColor.copy(t.attenuationColor),this.specularIntensity=t.specularIntensity,this.specularIntensityMap=t.specularIntensityMap,this.specularColor.copy(t.specularColor),this.specularColorMap=t.specularColorMap,this}}class oM extends be{constructor(t){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new mt(16777215),this.specular=new mt(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new mt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Is,this.normalScale=new Q(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Us,this.combine=Wd,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}class aM extends be{constructor(t){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new mt(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new mt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Is,this.normalScale=new Q(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.gradientMap=t.gradientMap,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}}class lM extends be{constructor(t){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Is,this.normalScale=new Q(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(t)}copy(t){return super.copy(t),this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.flatShading=t.flatShading,this}}class uM extends be{constructor(t){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new mt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new mt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Is,this.normalScale=new Q(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Us,this.combine=Wd,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}class cM extends be{constructor(t){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new mt(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Is,this.normalScale=new Q(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.defines={MATCAP:""},this.color.copy(t.color),this.matcap=t.matcap,this.map=t.map,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.flatShading=t.flatShading,this.fog=t.fog,this}}class wy extends yy{constructor(t){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(t)}copy(t){return super.copy(t),this.scale=t.scale,this.dashSize=t.dashSize,this.gapSize=t.gapSize,this}}class Zo extends he{constructor(t,e=1){super(),this.isLight=!0,this.type="Light",this.color=new mt(t),this.intensity=e}dispose(){}copy(t,e){return super.copy(t,e),this.color.copy(t.color),this.intensity=t.intensity,this}toJSON(t){const e=super.toJSON(t);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,this.groundColor!==void 0&&(e.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(e.object.distance=this.distance),this.angle!==void 0&&(e.object.angle=this.angle),this.decay!==void 0&&(e.object.decay=this.decay),this.penumbra!==void 0&&(e.object.penumbra=this.penumbra),this.shadow!==void 0&&(e.object.shadow=this.shadow.toJSON()),e}}class hM extends Zo{constructor(t,e,s){super(t,s),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(he.DEFAULT_UP),this.updateMatrix(),this.groundColor=new mt(e)}copy(t,e){return super.copy(t,e),this.groundColor.copy(t.groundColor),this}}const hc=new Pt,im=new z,rm=new z;class qd{constructor(t){this.camera=t,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Q(512,512),this.map=null,this.mapPass=null,this.matrix=new Pt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new tM,this._frameExtents=new Q(1,1),this._viewportCount=1,this._viewports=[new bt(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(t){const e=this.camera,s=this.matrix;im.setFromMatrixPosition(t.matrixWorld),e.position.copy(im),rm.setFromMatrixPosition(t.target.matrixWorld),e.lookAt(rm),e.updateMatrixWorld(),hc.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),this._frustum.setFromProjectionMatrix(hc),s.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),s.multiply(hc)}getViewport(t){return this._viewports[t]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(t){return this.camera=t.camera.clone(),this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const t={};return this.bias!==0&&(t.bias=this.bias),this.normalBias!==0&&(t.normalBias=this.normalBias),this.radius!==1&&(t.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}class dM extends qd{constructor(){super(new fy(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(t){const e=this.camera,s=Po*2*t.angle*this.focus,i=this.mapSize.width/this.mapSize.height,r=t.distance||e.far;(s!==e.fov||i!==e.aspect||r!==e.far)&&(e.fov=s,e.aspect=i,e.far=r,e.updateProjectionMatrix()),super.updateMatrices(t)}copy(t){return super.copy(t),this.focus=t.focus,this}}class My extends Zo{constructor(t,e,s=0,i=Math.PI/3,r=0,o=2){super(t,e),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(he.DEFAULT_UP),this.updateMatrix(),this.target=new he,this.distance=s,this.angle=i,this.penumbra=r,this.decay=o,this.map=null,this.shadow=new dM}get power(){return this.intensity*Math.PI}set power(t){this.intensity=t/Math.PI}dispose(){this.shadow.dispose()}copy(t,e){return super.copy(t,e),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}const om=new Pt,Yr=new z,dc=new z;class pM extends qd{constructor(){super(new fy(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Q(4,2),this._viewportCount=6,this._viewports=[new bt(2,1,1,1),new bt(0,1,1,1),new bt(3,1,1,1),new bt(1,1,1,1),new bt(3,0,1,1),new bt(1,0,1,1)],this._cubeDirections=[new z(1,0,0),new z(-1,0,0),new z(0,0,1),new z(0,0,-1),new z(0,1,0),new z(0,-1,0)],this._cubeUps=[new z(0,1,0),new z(0,1,0),new z(0,1,0),new z(0,1,0),new z(0,0,1),new z(0,0,-1)]}updateMatrices(t,e=0){const s=this.camera,i=this.matrix,r=t.distance||s.far;r!==s.far&&(s.far=r,s.updateProjectionMatrix()),Yr.setFromMatrixPosition(t.matrixWorld),s.position.copy(Yr),dc.copy(s.position),dc.add(this._cubeDirections[e]),s.up.copy(this._cubeUps[e]),s.lookAt(dc),s.updateMatrixWorld(),i.makeTranslation(-Yr.x,-Yr.y,-Yr.z),om.multiplyMatrices(s.projectionMatrix,s.matrixWorldInverse),this._frustum.setFromProjectionMatrix(om)}}class fM extends Zo{constructor(t,e,s=0,i=2){super(t,e),this.isPointLight=!0,this.type="PointLight",this.distance=s,this.decay=i,this.shadow=new pM}get power(){return this.intensity*4*Math.PI}set power(t){this.intensity=t/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(t,e){return super.copy(t,e),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}}class mM extends qd{constructor(){super(new my(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class gM extends Zo{constructor(t,e){super(t,e),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(he.DEFAULT_UP),this.updateMatrix(),this.target=new he,this.shadow=new mM}dispose(){this.shadow.dispose()}copy(t){return super.copy(t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}class yM extends Zo{constructor(t,e){super(t,e),this.isAmbientLight=!0,this.type="AmbientLight"}}class xM extends gy{constructor(t,e,s=1){super(t,e),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=s}copy(t){return super.copy(t),this.meshPerAttribute=t.meshPerAttribute,this}clone(t){const e=super.clone(t);return e.meshPerAttribute=this.meshPerAttribute,e}toJSON(t){const e=super.toJSON(t);return e.isInstancedInterleavedBuffer=!0,e.meshPerAttribute=this.meshPerAttribute,e}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:ty}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=ty);function Sy(n,t=!1){let e="{";n.isNode===!0&&(e+=n.id);for(const{property:s,childNode:i}of zl(n))e+=","+s.slice(0,-4)+":"+i.getCacheKey(t);return e+="}",e}function*zl(n,t=!1){for(const e in n){if(e.startsWith("_")===!0)continue;const s=n[e];if(Array.isArray(s)===!0)for(let i=0;i<s.length;i++){const r=s[i];r&&(r.isNode===!0||t&&typeof r.toJSON=="function")&&(yield{property:e,index:i,childNode:r})}else if(s&&s.isNode===!0)yield{property:e,childNode:s};else if(typeof s=="object")for(const i in s){const r=s[i];r&&(r.isNode===!0||t&&typeof r.toJSON=="function")&&(yield{property:e,index:i,childNode:r})}}}function Ns(n){if(n==null)return null;const t=typeof n;return n.isNode===!0?"node":t==="number"?"float":t==="boolean"?"bool":t==="string"?"string":t==="function"?"shader":n.isVector2===!0?"vec2":n.isVector3===!0?"vec3":n.isVector4===!0?"vec4":n.isMatrix3===!0?"mat3":n.isMatrix4===!0?"mat4":n.isColor===!0?"color":n instanceof ArrayBuffer?"ArrayBuffer":null}function Ty(n,...t){const e=n?n.slice(-4):void 0;return t.length===1&&(e==="vec2"?t=[t[0],t[0]]:e==="vec3"?t=[t[0],t[0],t[0]]:e==="vec4"&&(t=[t[0],t[0],t[0],t[0]])),n==="color"?new mt(...t):e==="vec2"?new Q(...t):e==="vec3"?new z(...t):e==="vec4"?new bt(...t):e==="mat3"?new In(...t):e==="mat4"?new Pt(...t):n==="bool"?t[0]||!1:n==="float"||n==="int"||n==="uint"?t[0]||0:n==="string"?t[0]||"":n==="ArrayBuffer"?Cy(t[0]):null}function _y(n){let t="";const e=new Uint8Array(n);for(let s=0;s<e.length;s++)t+=String.fromCharCode(e[s]);return btoa(t)}function Cy(n){return Uint8Array.from(atob(n),t=>t.charCodeAt(0)).buffer}const am=new Map;let vM=0;class $ extends xi{constructor(t=null){super(),this.nodeType=t,this.updateType=ft.NONE,this.updateBeforeType=ft.NONE,this.uuid=ly.generateUUID(),this.version=0,this._cacheKey=null,this._cacheKeyVersion=0,this.global=!1,this.isNode=!0,Object.defineProperty(this,"id",{value:vM++})}set needsUpdate(t){t===!0&&this.version++}get type(){return this.constructor.type}onUpdate(t,e){return this.updateType=e,this.update=t.bind(this.getSelf()),this}onFrameUpdate(t){return this.onUpdate(t,ft.FRAME)}onRenderUpdate(t){return this.onUpdate(t,ft.RENDER)}onObjectUpdate(t){return this.onUpdate(t,ft.OBJECT)}onReference(t){return this.updateReference=t.bind(this.getSelf()),this}getSelf(){return this.self||this}updateReference(){return this}isGlobal(){return this.global}*getChildren(){for(const{childNode:t}of zl(this))yield t}dispose(){this.dispatchEvent({type:"dispose"})}traverse(t){t(this);for(const e of this.getChildren())e.traverse(t)}getCacheKey(t=!1){return t=t||this.version!==this._cacheKeyVersion,(t===!0||this._cacheKey===null)&&(this._cacheKey=Sy(this,t),this._cacheKeyVersion=this.version),this._cacheKey}getHash(){return this.uuid}getUpdateType(){return this.updateType}getUpdateBeforeType(){return this.updateBeforeType}getElementType(t){const e=this.getNodeType(t);return t.getElementType(e)}getNodeType(t){const e=t.getNodeProperties(this);return e.outputNode?e.outputNode.getNodeType(t):this.nodeType}getShared(t){const e=this.getHash(t);return t.getNodeFromHash(e)||this}setup(t){const e=t.getNodeProperties(this);let s=0;for(const i of this.getChildren())e["node"+s++]=i;return null}construct(t){return console.warn("THREE.Node: construct() is deprecated. Use setup() instead."),this.setup(t)}increaseUsage(t){const e=t.getDataFromNode(this);return e.usageCount=e.usageCount===void 0?1:e.usageCount+1,e.usageCount}analyze(t){if(this.increaseUsage(t)===1){const s=t.getNodeProperties(this);for(const i of Object.values(s))i&&i.isNode===!0&&i.build(t)}}generate(t,e){const{outputNode:s}=t.getNodeProperties(this);if(s&&s.isNode===!0)return s.build(t,e)}updateBefore(){console.warn("Abstract function.")}update(){console.warn("Abstract function.")}build(t,e=null){const s=this.getShared(t);if(this!==s)return s.build(t,e);t.addNode(this),t.addChain(this);let i=null;const r=t.getBuildStage();if(r==="setup"){this.updateReference(t);const o=t.getNodeProperties(this);if(o.initialized!==!0||t.context.tempRead===!1){const a=t.stack.nodes.length;o.initialized=!0,o.outputNode=this.setup(t),o.outputNode!==null&&t.stack.nodes.length!==a&&(o.outputNode=t.stack);for(const l of Object.values(o))l&&l.isNode===!0&&l.build(t)}}else if(r==="analyze")this.analyze(t);else if(r==="generate")if(this.generate.length===1){const a=this.getNodeType(t),l=t.getDataFromNode(this);i=l.snippet,i===void 0&&(i=this.generate(t)||"",l.snippet=i),i=t.format(i,a,e)}else i=this.generate(t,e)||"";return t.removeChain(this),i}getSerializeChildren(){return zl(this)}serialize(t){const e=this.getSerializeChildren(),s={};for(const{property:i,index:r,childNode:o}of e)r!==void 0?(s[i]===void 0&&(s[i]=Number.isInteger(r)?[]:{}),s[i][r]=o.toJSON(t.meta).uuid):s[i]=o.toJSON(t.meta).uuid;Object.keys(s).length>0&&(t.inputNodes=s)}deserialize(t){if(t.inputNodes!==void 0){const e=t.meta.nodes;for(const s in t.inputNodes)if(Array.isArray(t.inputNodes[s])){const i=[];for(const r of t.inputNodes[s])i.push(e[r]);this[s]=i}else if(typeof t.inputNodes[s]=="object"){const i={};for(const r in t.inputNodes[s]){const o=t.inputNodes[s][r];i[r]=e[o]}this[s]=i}else{const i=t.inputNodes[s];this[s]=e[i]}}}toJSON(t){const{uuid:e,type:s}=this,i=t===void 0||typeof t=="string";i&&(t={textures:{},images:{},nodes:{}});let r=t.nodes[e];r===void 0&&(r={uuid:e,type:s,meta:t,metadata:{version:4.6,type:"Node",generator:"Node.toJSON"}},i!==!0&&(t.nodes[r.uuid]=r),this.serialize(r),delete r.meta);function o(a){const l=[];for(const u in a){const c=a[u];delete c.metadata,l.push(c)}return l}if(i){const a=o(t.textures),l=o(t.images),u=o(t.nodes);a.length>0&&(r.textures=a),l.length>0&&(r.images=l),u.length>0&&(r.nodes=u)}return r}}function I(n,t){if(typeof t!="function"||!n)throw new Error(`Node class ${n} is not a class`);if(am.has(n)){console.warn(`Redefinition of node class ${n}`);return}am.set(n,t),t.type=n}class ct extends ${constructor(t){super(t),this.isTempNode=!0}hasDependencies(t){return t.getDataFromNode(this).usageCount>1}build(t,e){if(t.getBuildStage()==="generate"){const i=t.getVectorType(this.getNodeType(t,e)),r=t.getDataFromNode(this);if(t.context.tempRead!==!1&&r.propertyName!==void 0)return t.format(r.propertyName,i,e);if(t.context.tempWrite!==!1&&i!=="void"&&e!=="void"&&this.hasDependencies(t)){const o=super.build(t,i),a=t.getVarFromNode(this,null,i),l=t.getPropertyName(a);return t.addLineFlowCode(`${l} = ${o}`),r.snippet=o,r.propertyName=l,t.format(r.propertyName,i,e)}}return super.build(t,e)}}I("TempNode",ct);class Er extends ${constructor(t,e){super(),this.node=t,this.indexNode=e,this.isArrayElementNode=!0}getNodeType(t){return this.node.getElementType(t)}generate(t){const e=this.node.build(t),s=this.indexNode.build(t,"uint");return`${e}[ ${s} ]`}}I("ArrayElementNode",Er);class Xd extends ${constructor(t,e){super(),this.node=t,this.convertTo=e}getNodeType(t){const e=this.node.getNodeType(t);let s=null;for(const i of this.convertTo.split("|"))(s===null||t.getTypeLength(e)===t.getTypeLength(i))&&(s=i);return s}serialize(t){super.serialize(t),t.convertTo=this.convertTo}deserialize(t){super.deserialize(t),this.convertTo=t.convertTo}generate(t,e){const s=this.node,i=this.getNodeType(t),r=s.build(t,i);return t.format(r,i,e)}}I("ConvertNode",Xd);class Ay extends ct{constructor(t=[],e=null){super(e),this.nodes=t}getNodeType(t){return this.nodeType!==null?t.getVectorType(this.nodeType):t.getTypeFromLength(this.nodes.reduce((e,s)=>e+t.getTypeLength(s.getNodeType(t)),0))}generate(t,e){const s=this.getNodeType(t),i=this.nodes,r=t.getComponentType(s),o=[];for(const l of i){let u=l.build(t);const c=t.getComponentType(l.getNodeType(t));c!==r&&(u=t.format(u,c,r)),o.push(u)}const a=`${t.getType(s)}( ${o.join(", ")} )`;return t.format(a,s,e)}}I("JoinNode",Ay);const NM=su.join("");class Eh extends ${constructor(t,e="x"){super(),this.node=t,this.components=e,this.isSplitNode=!0}getVectorLength(){let t=this.components.length;for(const e of this.components)t=Math.max(su.indexOf(e)+1,t);return t}getComponentType(t){return t.getComponentType(this.node.getNodeType(t))}getNodeType(t){return t.getTypeFromLength(this.components.length,this.getComponentType(t))}generate(t,e){const s=this.node,i=t.getTypeLength(s.getNodeType(t));let r=null;if(i>1){let o=null;this.getVectorLength()>=i&&(o=t.getTypeFromLength(this.getVectorLength(),this.getComponentType(t)));const l=s.build(t,o);this.components.length===i&&this.components===NM.slice(0,this.components.length)?r=t.format(l,o,e):r=t.format(`${l}.${this.components}`,this.getNodeType(t),e)}else r=s.build(t,e);return r}serialize(t){super.serialize(t),t.components=this.components}deserialize(t){super.deserialize(t),this.components=t.components}}I("SplitNode",Eh);class zy extends ct{constructor(t,e,s){super(),this.sourceNode=t,this.components=e,this.targetNode=s}getNodeType(t){return this.sourceNode.getNodeType(t)}generate(t){const{sourceNode:e,components:s,targetNode:i}=this,r=this.getNodeType(t),o=t.getTypeFromLength(s.length),a=i.build(t,o),l=e.build(t,r),u=t.getTypeLength(r),c=[];for(let h=0;h<u;h++){const d=su[h];d===s[0]?(c.push(a),h+=s.length-1):c.push(l+"."+d)}return`${t.getType(r)}( ${c.join(", ")} )`}}I("SetNode",zy);class ou extends ${constructor(t,e=null){super(e),this.isInputNode=!0,this.value=t,this.precision=null}getNodeType(){return this.nodeType===null?Ns(this.value):this.nodeType}getInputType(t){return this.getNodeType(t)}setPrecision(t){return this.precision=t,this}serialize(t){super.serialize(t),t.value=this.value,this.value&&this.value.toArray&&(t.value=this.value.toArray()),t.valueType=Ns(this.value),t.nodeType=this.nodeType,t.valueType==="ArrayBuffer"&&(t.value=_y(t.value)),t.precision=this.precision}deserialize(t){super.deserialize(t),this.nodeType=t.nodeType,this.value=Array.isArray(t.value)?Ty(t.valueType,...t.value):t.value,this.precision=t.precision||null,this.value&&this.value.fromArray&&(this.value=this.value.fromArray(t.value))}generate(){console.warn("Abstract function.")}}I("InputNode",ou);class Fn extends ou{constructor(t,e=null){super(t,e),this.isConstNode=!0}generateConst(t){return t.generateConst(this.getNodeType(t),this.value)}generate(t,e){const s=this.getNodeType(t);return t.format(this.generateConst(t),s,e)}}I("ConstNode",Fn);let Mr=null;const Qi=new Map;function _(n,t){if(Qi.has(n)){console.warn(`Redefinition of node element ${n}`);return}if(typeof t!="function")throw new Error(`Node element ${n} is not a function`);Qi.set(n,t)}const lm=n=>n.replace(/r|s/g,"x").replace(/g|t/g,"y").replace(/b|p/g,"z").replace(/a|q/g,"w"),Ey={setup(n,t){const e=t.shift();return n(uu(e),...t)},get(n,t,e){if(typeof t=="string"&&n[t]===void 0){if(n.isStackNode!==!0&&t==="assign")return(...s)=>(Mr.assign(e,...s),e);if(Qi.has(t)){const s=Qi.get(t);return n.isStackNode?(...i)=>e.add(s(...i)):(...i)=>s(e,...i)}else{if(t==="self")return n;if(t.endsWith("Assign")&&Qi.has(t.slice(0,t.length-6))){const s=Qi.get(t.slice(0,t.length-6));return n.isStackNode?(...i)=>e.assign(i[0],s(...i)):(...i)=>e.assign(s(e,...i))}else{if(/^[xyzwrgbastpq]{1,4}$/.test(t)===!0)return t=lm(t),D(new Eh(e,t));if(/^set[XYZWRGBASTPQ]{1,4}$/.test(t)===!0)return t=lm(t.slice(3).toLowerCase()),t=t.split("").sort().join(""),s=>D(new zy(n,t,s));if(t==="width"||t==="height"||t==="depth")return t==="width"?t="x":t==="height"?t="y":t==="depth"&&(t="z"),D(new Eh(n,t));if(/^\d+$/.test(t)===!0)return D(new Er(e,new Fn(Number(t),"uint")))}}}return Reflect.get(n,t,e)},set(n,t,e,s){return typeof t=="string"&&n[t]===void 0&&(/^[xyzwrgbastpq]{1,4}$/.test(t)===!0||t==="width"||t==="height"||t==="depth"||/^\d+$/.test(t)===!0)?(s[t].assign(e),!0):Reflect.set(n,t,e,s)}},pc=new WeakMap,um=new WeakMap,wM=function(n,t=null){const e=Ns(n);if(e==="node"){let s=pc.get(n);return s===void 0&&(s=new Proxy(n,Ey),pc.set(n,s),pc.set(s,s)),s}else{if(t===null&&(e==="float"||e==="boolean")||e&&e!=="shader"&&e!=="string")return D(Rh(n,t));if(e==="shader")return R(n)}return n},MM=function(n,t=null){for(const e in n)n[e]=D(n[e],t);return n},SM=function(n,t=null){const e=n.length;for(let s=0;s<e;s++)n[s]=D(n[s],t);return n},TM=function(n,t=null,e=null,s=null){const i=r=>D(s!==null?Object.assign(r,s):r);return t===null?(...r)=>i(new n(...lr(r))):e!==null?(e=D(e),(...r)=>i(new n(t,...lr(r),e))):(...r)=>i(new n(t,...lr(r)))},_M=function(n,...t){return D(new n(...lr(t)))};class CM extends ${constructor(t,e){super(),this.shaderNode=t,this.inputNodes=e}getNodeType(t){const e=t.getNodeProperties(this);return e.outputNode===null&&(e.outputNode=this.setupOutput(t)),e.outputNode.getNodeType(t)}call(t){const{shaderNode:e,inputNodes:s}=this;if(e.layout){let o=um.get(t.constructor);o===void 0&&(o=new WeakMap,um.set(t.constructor,o));let a=o.get(e);return a===void 0&&(a=D(t.buildFunctionNode(e)),o.set(e,a)),t.currentFunctionNode!==null&&t.currentFunctionNode.includes.push(a),D(a.call(s))}const i=e.jsFunc,r=s!==null?i(s,t.stack,t):i(t.stack,t);return D(r)}setup(t){const{outputNode:e}=t.getNodeProperties(this);return e||this.setupOutput(t)}setupOutput(t){return t.addStack(),t.stack.outputNode=this.call(t),t.removeStack()}generate(t,e){const{outputNode:s}=t.getNodeProperties(this);return s===null?this.call(t).build(t,e):super.generate(t,e)}}class AM extends ${constructor(t){super(),this.jsFunc=t,this.layout=null}get isArrayInput(){return/^\((\s+)?\[/.test(this.jsFunc.toString())}setLayout(t){return this.layout=t,this}call(t=null){return uu(t),D(new CM(this,t))}setup(){return this.call()}}const zM=[!1,!0],EM=[0,1,2,3],RM=[-1,-2],Ry=[.5,1.5,1/3,1e-6,1e6,Math.PI,Math.PI*2,1/Math.PI,2/Math.PI,1/(Math.PI*2),Math.PI/2],Yd=new Map;for(const n of zM)Yd.set(n,new Fn(n));const Zd=new Map;for(const n of EM)Zd.set(n,new Fn(n,"uint"));const Qd=new Map([...Zd].map(n=>new Fn(n.value,"int")));for(const n of RM)Qd.set(n,new Fn(n,"int"));const au=new Map([...Qd].map(n=>new Fn(n.value)));for(const n of Ry)au.set(n,new Fn(n));for(const n of Ry)au.set(-n,new Fn(-n));const lu={bool:Yd,uint:Zd,ints:Qd,float:au},cm=new Map([...Yd,...au]),Rh=(n,t)=>cm.has(n)?cm.get(n):n.isNode===!0?n:new Fn(n,t),kM=n=>{try{return n.getNodeType()}catch{return}},lt=function(n,t=null){return(...e)=>{if((e.length===0||!["bool","float","int","uint"].includes(n)&&e.every(i=>typeof i!="object"))&&(e=[Ty(n,...e)]),e.length===1&&t!==null&&t.has(e[0]))return D(t.get(e[0]));if(e.length===1){const i=Rh(e[0],n);return kM(i)===n?D(i):D(new Xd(i,n))}const s=e.map(i=>Rh(i));return D(new Ay(s,n))}},hm=n=>n&&n.value,VM=n=>n!=null?n.nodeType||n.convertTo||(typeof n=="string"?n:null):null;function go(n){return new Proxy(new AM(n),Ey)}const D=(n,t=null)=>wM(n,t),uu=(n,t=null)=>new MM(n,t),lr=(n,t=null)=>new SM(n,t),C=(...n)=>new TM(...n),P=(...n)=>new _M(...n),R=n=>{const t=new go(n),e=(...s)=>{let i;return uu(s),s[0]&&s[0].isNode?i=[...s]:i=s[0],t.call(i)};return e.shaderNode=t,e.setLayout=s=>(t.setLayout(s),e),e};I("ShaderNode",go);_("toGlobal",n=>(n.global=!0,n));const dm=n=>{Mr=n},LM=()=>Mr,Z=(...n)=>Mr.if(...n);function IM(n){return Mr&&Mr.add(n),n}_("append",IM);const FM=new lt("color"),v=new lt("float",lu.float),N=new lt("int",lu.ints),O=new lt("uint",lu.uint),pi=new lt("bool",lu.bool),j=new lt("vec2"),ii=new lt("ivec2"),PM=new lt("uvec2"),OM=new lt("bvec2"),w=new lt("vec3"),DM=new lt("ivec3"),Qo=new lt("uvec3"),ky=new lt("bvec3"),U=new lt("vec4"),bM=new lt("ivec4"),BM=new lt("uvec4"),UM=new lt("bvec4"),Jd=new lt("mat2"),jM=new lt("imat2"),WM=new lt("umat2"),HM=new lt("bmat2"),xn=new lt("mat3"),$M=new lt("imat3"),GM=new lt("umat3"),qM=new lt("bmat3"),ur=new lt("mat4"),XM=new lt("imat4"),YM=new lt("umat4"),ZM=new lt("bmat4");_("toColor",FM);_("toFloat",v);_("toInt",N);_("toUint",O);_("toBool",pi);_("toVec2",j);_("toIvec2",ii);_("toUvec2",PM);_("toBvec2",OM);_("toVec3",w);_("toIvec3",DM);_("toUvec3",Qo);_("toBvec3",ky);_("toVec4",U);_("toIvec4",bM);_("toUvec4",BM);_("toBvec4",UM);_("toMat2",Jd);_("toImat2",jM);_("toUmat2",WM);_("toBmat2",HM);_("toMat3",xn);_("toImat3",$M);_("toUmat3",GM);_("toBmat3",qM);_("toMat4",ur);_("toImat4",XM);_("toUmat4",YM);_("toBmat4",ZM);const QM=C(Er),JM=(n,t)=>D(new Xd(D(n),t));_("element",QM);_("convert",JM);class Vy extends ct{constructor(t,e){super(),this.targetNode=t,this.sourceNode=e}hasDependencies(){return!1}getNodeType(t,e){return e!=="void"?this.targetNode.getNodeType(t):"void"}needsSplitAssign(t){const{targetNode:e}=this;if(t.isAvailable("swizzleAssign")===!1&&e.isSplitNode&&e.components.length>1){const s=t.getTypeLength(e.node.getNodeType(t));return su.join("").slice(0,s)!==e.components}return!1}generate(t,e){const{targetNode:s,sourceNode:i}=this,r=this.needsSplitAssign(t),o=s.getNodeType(t),a=s.context({assign:!0}).build(t),l=i.build(t,o),u=i.getNodeType(t),c=t.getDataFromNode(this);let h;if(c.initialized===!0)e!=="void"&&(h=a);else if(r){const d=t.getVarFromNode(this,null,o),p=t.getPropertyName(d);t.addLineFlowCode(`${p} = ${l}`);const f=s.node.context({assign:!0}).build(t);for(let y=0;y<s.components.length;y++){const M=s.components[y];t.addLineFlowCode(`${f}.${M} = ${p}[ ${y} ]`)}e!=="void"&&(h=a)}else h=`${a} = ${l}`,(e==="void"||u==="void")&&(t.addLineFlowCode(h),e!=="void"&&(h=a));return c.initialized=!0,t.format(h,o,e)}}const KM=C(Vy);I("AssignNode",Vy);_("assign",KM);class Ly extends ${constructor(t,e=null){super(),this.node=t,this.name=e,this.isVaryingNode=!0}isGlobal(){return!0}getHash(t){return this.name||super.getHash(t)}getNodeType(t){return this.node.getNodeType(t)}setupVarying(t){const e=t.getNodeProperties(this);let s=e.varying;if(s===void 0){const i=this.name,r=this.getNodeType(t);e.varying=s=t.getVaryingFromNode(this,i,r),e.node=this.node}return s.needsInterpolation||(s.needsInterpolation=t.shaderStage==="fragment"),s}setup(t){this.setupVarying(t)}generate(t){const e=t.getNodeProperties(this),s=this.setupVarying(t);if(e.propertyName===void 0){const i=this.getNodeType(t),r=t.getPropertyName(s,Tf.VERTEX);t.flowNodeFromShaderStage(Tf.VERTEX,this.node,i,r),e.propertyName=r}return t.getPropertyName(s)}}const Ot=C(Ly);_("varying",Ot);I("VaryingNode",Ly);class Kd extends ${constructor(t,e=null,s=null){super(e),this.defaultNode=s,this._attributeName=t}isGlobal(){return!0}getHash(t){return this.getAttributeName(t)}getNodeType(t){let e=super.getNodeType(t);if(e===null){const s=this.getAttributeName(t);if(t.hasGeometryAttribute(s)){const i=t.geometry.getAttribute(s);e=t.getTypeFromAttribute(i)}else e="float"}return e}setAttributeName(t){return this._attributeName=t,this}getAttributeName(){return this._attributeName}generate(t){const e=this.getAttributeName(t),s=this.getNodeType(t);if(t.hasGeometryAttribute(e)===!0){const r=t.geometry.getAttribute(e),o=t.getTypeFromAttribute(r),a=t.getAttribute(e,o);return t.shaderStage==="vertex"?t.format(a.name,o,s):Ot(this).build(t,s)}else{console.warn(`AttributeNode: Vertex attribute "${e}" not found on geometry.`);const{defaultNode:r}=this;return r!==null?r.build(t,s):t.generateConst(s)}}}const Qt=(n,t,e)=>D(new Kd(n,t,D(e)));I("AttributeNode",Kd);class Iy extends ${constructor(t,e){super(),this.isBypassNode=!0,this.outputNode=t,this.callNode=e}getNodeType(t){return this.outputNode.getNodeType(t)}generate(t){const e=this.callNode.build(t,"void");return e!==""&&t.addLineFlowCode(e),this.outputNode.build(t)}}const Fy=C(Iy);_("bypass",Fy);I("BypassNode",Iy);let tS=0;class eS{constructor(){this.id=tS++,this.nodesData=new WeakMap}getNodeData(t){return this.nodesData.get(t)}setNodeData(t,e){this.nodesData.set(t,e)}}class Py extends ${constructor(t,e=new eS){super(),this.isCacheNode=!0,this.node=t,this.cache=e}getNodeType(t){return this.node.getNodeType(t)}build(t,...e){const s=t.getCache(),i=this.cache||t.globalCache;t.setCache(i);const r=this.node.build(t,...e);return t.setCache(s),r}}const El=C(Py),nS=n=>El(n,null);_("cache",El);_("globalCache",nS);I("CacheNode",Py);class tp extends ${constructor(t,e={}){super(),this.isContextNode=!0,this.node=t,this.context=e}getNodeType(t){return this.node.getNodeType(t)}analyze(t){this.node.build(t)}setup(t){const e=t.getContext();t.setContext({...t.context,...this.context});const s=this.node.build(t);return t.setContext(e),s}generate(t,e){const s=t.getContext();t.setContext({...t.context,...this.context});const i=this.node.build(t,e);return t.setContext(s),i}}const Jn=C(tp),sS=(n,t)=>Jn(n,{label:t});_("context",Jn);_("label",sS);I("ContextNode",tp);class kn extends ${constructor(t){super("uint"),this.scope=t,this.isInstanceIndexNode=!0}generate(t){const e=this.getNodeType(t),s=this.scope;let i;if(s===kn.VERTEX)i=t.getVertexIndex();else if(s===kn.INSTANCE)i=t.getInstanceIndex();else throw new Error("THREE.IndexNode: Unknown scope: "+s);let r;return t.shaderStage==="vertex"||t.shaderStage==="compute"?r=i:r=Ot(this).build(t,e),r}}kn.VERTEX="vertex";kn.INSTANCE="instance";const iS=P(kn,kn.VERTEX),Oy=P(kn,kn.INSTANCE);I("IndexNode",kn);class cu{start(){}finish(){}direct(){}indirectDiffuse(){}indirectSpecular(){}ambientOcclusion(){}}class Dy extends ${constructor(t,e=null){super(),this.node=t,this.name=e,this.isVarNode=!0}isGlobal(){return!0}getHash(t){return this.name||super.getHash(t)}getNodeType(t){return this.node.getNodeType(t)}generate(t){const{node:e,name:s}=this,i=t.getVarFromNode(this,s,t.getVectorType(this.getNodeType(t))),r=t.getPropertyName(i),o=e.build(t,i.type);return t.addLineFlowCode(`${r} = ${o}`),r}}const Rl=C(Dy);_("temp",Rl);_("toVar",(...n)=>Rl(...n).append());I("VarNode",Dy);class it extends ${constructor(t,e=null,s=!1){super(t),this.name=e,this.varying=s,this.isPropertyNode=!0}getHash(t){return this.name||super.getHash(t)}isGlobal(){return!0}generate(t){let e;return this.varying===!0?(e=t.getVaryingFromNode(this,this.name),e.needsInterpolation=!0):e=t.getVarFromNode(this,this.name),t.getPropertyName(e)}}const St=(n,t)=>D(new it(n,t)),Sn=(n,t)=>D(new it(n,t,!0)),dt=P(it,"vec4","DiffuseColor"),ws=P(it,"float","Roughness"),kl=P(it,"float","Metalness"),kh=P(it,"float","Clearcoat"),Vl=P(it,"float","ClearcoatRoughness"),Ji=P(it,"vec3","Sheen"),ep=P(it,"float","SheenRoughness"),np=P(it,"float","Iridescence"),by=P(it,"float","IridescenceIOR"),By=P(it,"float","IridescenceThickness"),Vh=P(it,"float","AlphaT"),Ks=P(it,"float","Anisotropy"),tl=P(it,"vec3","AnisotropyT"),cr=P(it,"vec3","AnisotropyB"),ln=P(it,"color","SpecularColor"),Ll=P(it,"float","SpecularF90"),Lh=P(it,"float","Shininess"),rS=P(it,"vec4","Output"),hr=P(it,"float","dashSize"),Il=P(it,"float","gapSize");P(it,"float","pointWidth");const el=P(it,"float","IOR"),Ih=P(it,"float","Transmission"),Uy=P(it,"float","Thickness"),jy=P(it,"float","AttenuationDistance"),Wy=P(it,"color","AttenuationColor"),Hy=P(it,"float","Dispersion");I("PropertyNode",it);class oS extends it{constructor(t,e=null){super(t,e),this.isParameterNode=!0}getHash(){return this.uuid}generate(){return this.name}}I("ParameterNode",oS);class sp extends ${constructor(t="",e=[],s=""){super("code"),this.isCodeNode=!0,this.code=t,this.language=s,this.includes=e}isGlobal(){return!0}setIncludes(t){return this.includes=t,this}getIncludes(){return this.includes}generate(t){const e=this.getIncludes(t);for(const i of e)i.build(t);const s=t.getCodeFromNode(this,this.getNodeType(t));return s.code=this.code,s.code}serialize(t){super.serialize(t),t.code=this.code,t.language=this.language}deserialize(t){super.deserialize(t),this.code=t.code,this.language=t.language}}C(sp);I("CodeNode",sp);class aS extends sp{constructor(t="",e=[],s=""){super(t,e,s),this.keywords={}}getNodeType(t){return this.getNodeFunction(t).type}getInputs(t){return this.getNodeFunction(t).inputs}getNodeFunction(t){const e=t.getDataFromNode(this);let s=e.nodeFunction;return s===void 0&&(s=t.parser.parseFunction(this.code),e.nodeFunction=s),s}generate(t,e){super.generate(t);const s=this.getNodeFunction(t),i=s.name,r=s.type,o=t.getCodeFromNode(this,r);i!==""&&(o.name=i);const a=t.getPropertyName(o);let l=this.getNodeFunction(t).getCode(a);const u=this.keywords,c=Object.keys(u);if(c.length>0)for(const h of c){const d=new RegExp(`\\b${h}\\b`,"g"),p=u[h].build(t,"property");l=l.replace(d,p)}return o.code=l+`
`,e==="property"?a:t.format(`${a}()`,r,e)}}I("FunctionNode",aS);class ip extends ${constructor(t,e=!1){super("string"),this.name=t,this.version=0,this.shared=e,this.isUniformGroup=!0}set needsUpdate(t){t===!0&&this.version++}}const lS=n=>new ip(n),$y=n=>new ip(n,!0);$y("frame");$y("render");const uS=lS("object");I("UniformGroupNode",ip);class vi extends ou{constructor(t,e=null){super(t,e),this.isUniformNode=!0,this.groupNode=uS}setGroup(t){return this.groupNode=t,this}getGroup(){return this.groupNode}getUniformHash(t){return this.getHash(t)}onUpdate(t,e){const s=this.getSelf();return t=t.bind(s),super.onUpdate(i=>{const r=t(i,s);r!==void 0&&(this.value=r)},e)}generate(t,e){const s=this.getNodeType(t),i=this.getUniformHash(t);let r=t.getNodeFromHash(i);r===void 0&&(t.setHashNode(this,i),r=this);const o=r.getInputType(t),a=t.getUniformFromNode(r,o,t.shaderStage,t.context.label),l=t.getPropertyName(a);return t.context.label!==void 0&&delete t.context.label,t.format(l,s,e)}}const tt=(n,t)=>{const e=VM(t||n),s=n&&n.isNode===!0?n.node&&n.node.value||n.value:n;return D(new vi(s,e))};I("UniformNode",vi);const Pn=n=>Qt("uv"+(n>0?n:""),"vec2");class Gy extends ${constructor(t,e=null){super("uvec2"),this.isTextureSizeNode=!0,this.textureNode=t,this.levelNode=e}generate(t,e){const s=this.textureNode.build(t,"property"),i=this.levelNode.build(t,"int");return t.format(`${t.getMethod("textureDimensions")}( ${s}, ${i} )`,this.getNodeType(t),e)}}const rp=C(Gy);_("textureSize",rp);I("TextureSizeNode",Gy);class wt extends ct{constructor(t,e,s,...i){if(super(),this.op=t,i.length>0){let r=s;for(let o=0;o<i.length;o++)r=new wt(t,r,i[o]);s=r}this.aNode=e,this.bNode=s}getNodeType(t,e){const s=this.op,i=this.aNode,r=this.bNode,o=i.getNodeType(t),a=typeof r<"u"?r.getNodeType(t):null;if(o==="void"||a==="void")return"void";if(s==="%")return o;if(s==="~"||s==="&"||s==="|"||s==="^"||s===">>"||s==="<<")return t.getIntegerType(o);if(s==="!"||s==="=="||s==="&&"||s==="||"||s==="^^")return"bool";if(s==="<"||s===">"||s==="<="||s===">="){const l=e?t.getTypeLength(e):Math.max(t.getTypeLength(o),t.getTypeLength(a));return l>1?`bvec${l}`:"bool"}else return o==="float"&&t.isMatrix(a)?a:t.isMatrix(o)&&t.isVector(a)?t.getVectorFromMatrix(o):t.isVector(o)&&t.isMatrix(a)?t.getVectorFromMatrix(a):t.getTypeLength(a)>t.getTypeLength(o)?a:o}generate(t,e){const s=this.op,i=this.aNode,r=this.bNode,o=this.getNodeType(t,e);let a=null,l=null;o!=="void"?(a=i.getNodeType(t),l=typeof r<"u"?r.getNodeType(t):null,s==="<"||s===">"||s==="<="||s===">="||s==="=="?t.isVector(a)?l=a:a=l="float":s===">>"||s==="<<"?(a=o,l=t.changeComponentType(l,"uint")):t.isMatrix(a)&&t.isVector(l)?l=t.getVectorFromMatrix(a):t.isVector(a)&&t.isMatrix(l)?a=t.getVectorFromMatrix(l):a=l=o):a=l=o;const u=i.build(t,a),c=typeof r<"u"?r.build(t,l):null,h=t.getTypeLength(e),d=t.getFunctionOperator(s);if(e!=="void")return s==="<"&&h>1?t.format(`${t.getMethod("lessThan")}( ${u}, ${c} )`,o,e):s==="<="&&h>1?t.format(`${t.getMethod("lessThanEqual")}( ${u}, ${c} )`,o,e):s===">"&&h>1?t.format(`${t.getMethod("greaterThan")}( ${u}, ${c} )`,o,e):s===">="&&h>1?t.format(`${t.getMethod("greaterThanEqual")}( ${u}, ${c} )`,o,e):s==="!"||s==="~"?t.format(`(${s}${u})`,a,e):d?t.format(`${d}( ${u}, ${c} )`,o,e):t.format(`( ${u} ${s} ${c} )`,o,e);if(a!=="void")return d?t.format(`${d}( ${u}, ${c} )`,o,e):t.format(`${u} ${s} ${c}`,o,e)}serialize(t){super.serialize(t),t.op=this.op}deserialize(t){super.deserialize(t),this.op=t.op}}const Be=C(wt,"+"),Vt=C(wt,"-"),K=C(wt,"*"),Fs=C(wt,"/"),cS=C(wt,"%"),hS=C(wt,"=="),dS=C(wt,"!="),pS=C(wt,"<"),qy=C(wt,">"),fS=C(wt,"<="),mS=C(wt,">="),gS=C(wt,"&&"),yS=C(wt,"||"),xS=C(wt,"!"),vS=C(wt,"^^"),NS=C(wt,"&"),wS=C(wt,"~"),MS=C(wt,"|"),SS=C(wt,"^"),TS=C(wt,"<<"),_S=C(wt,">>");_("add",Be);_("sub",Vt);_("mul",K);_("div",Fs);_("remainder",cS);_("equal",hS);_("notEqual",dS);_("lessThan",pS);_("greaterThan",qy);_("lessThanEqual",fS);_("greaterThanEqual",mS);_("and",gS);_("or",yS);_("not",xS);_("xor",vS);_("bitAnd",NS);_("bitNot",wS);_("bitOr",MS);_("bitXor",SS);_("shiftLeft",TS);_("shiftRight",_S);I("OperatorNode",wt);class T extends ct{constructor(t,e,s=null,i=null){super(),this.method=t,this.aNode=e,this.bNode=s,this.cNode=i}getInputType(t){const e=this.aNode.getNodeType(t),s=this.bNode?this.bNode.getNodeType(t):null,i=this.cNode?this.cNode.getNodeType(t):null,r=t.isMatrix(e)?0:t.getTypeLength(e),o=t.isMatrix(s)?0:t.getTypeLength(s),a=t.isMatrix(i)?0:t.getTypeLength(i);return r>o&&r>a?e:o>a?s:a>r?i:e}getNodeType(t){const e=this.method;return e===T.LENGTH||e===T.DISTANCE||e===T.DOT?"float":e===T.CROSS?"vec3":e===T.ALL?"bool":e===T.EQUALS?t.changeComponentType(this.aNode.getNodeType(t),"bool"):e===T.MOD?this.aNode.getNodeType(t):this.getInputType(t)}generate(t,e){const s=this.method,i=this.getNodeType(t),r=this.getInputType(t),o=this.aNode,a=this.bNode,l=this.cNode,u=t.renderer.isWebGLRenderer===!0;if(s===T.TRANSFORM_DIRECTION){let c=o,h=a;t.isMatrix(c.getNodeType(t))?h=U(w(h),0):c=U(w(c),0);const d=K(c,h).xyz;return Oo(d).build(t,e)}else{if(s===T.NEGATE)return t.format("( - "+o.build(t,r)+" )",i,e);if(s===T.ONE_MINUS)return Vt(1,o).build(t,e);if(s===T.RECIPROCAL)return Fs(1,o).build(t,e);if(s===T.DIFFERENCE)return It(Vt(o,a)).build(t,e);{const c=[];return s===T.CROSS||s===T.MOD?c.push(o.build(t,i),a.build(t,i)):s===T.STEP?c.push(o.build(t,t.getTypeLength(o.getNodeType(t))===1?"float":r),a.build(t,r)):u&&(s===T.MIN||s===T.MAX)||s===T.MOD?c.push(o.build(t,r),a.build(t,t.getTypeLength(a.getNodeType(t))===1?"float":r)):s===T.REFRACT?c.push(o.build(t,r),a.build(t,r),l.build(t,"float")):s===T.MIX?c.push(o.build(t,r),a.build(t,r),l.build(t,t.getTypeLength(l.getNodeType(t))===1?"float":r)):(c.push(o.build(t,r)),a!==null&&c.push(a.build(t,r)),l!==null&&c.push(l.build(t,r))),t.format(`${t.getMethod(s,i)}( ${c.join(", ")} )`,i,e)}}}serialize(t){super.serialize(t),t.method=this.method}deserialize(t){super.deserialize(t),this.method=t.method}}T.ALL="all";T.ANY="any";T.EQUALS="equals";T.RADIANS="radians";T.DEGREES="degrees";T.EXP="exp";T.EXP2="exp2";T.LOG="log";T.LOG2="log2";T.SQRT="sqrt";T.INVERSE_SQRT="inversesqrt";T.FLOOR="floor";T.CEIL="ceil";T.NORMALIZE="normalize";T.FRACT="fract";T.SIN="sin";T.COS="cos";T.TAN="tan";T.ASIN="asin";T.ACOS="acos";T.ATAN="atan";T.ABS="abs";T.SIGN="sign";T.LENGTH="length";T.NEGATE="negate";T.ONE_MINUS="oneMinus";T.DFDX="dFdx";T.DFDY="dFdy";T.ROUND="round";T.RECIPROCAL="reciprocal";T.TRUNC="trunc";T.FWIDTH="fwidth";T.BITCAST="bitcast";T.ATAN2="atan2";T.MIN="min";T.MAX="max";T.MOD="mod";T.STEP="step";T.REFLECT="reflect";T.DISTANCE="distance";T.DIFFERENCE="difference";T.DOT="dot";T.CROSS="cross";T.POW="pow";T.TRANSFORM_DIRECTION="transformDirection";T.MIX="mix";T.CLAMP="clamp";T.REFRACT="refract";T.SMOOTHSTEP="smoothstep";T.FACEFORWARD="faceforward";const Xy=v(1e-6);v(1e6);const pm=v(Math.PI);v(Math.PI*2);const Yy=C(T,T.ALL),CS=C(T,T.ANY),AS=C(T,T.EQUALS),zS=C(T,T.RADIANS),ES=C(T,T.DEGREES),Zy=C(T,T.EXP),Fh=C(T,T.EXP2),Qy=C(T,T.LOG),hu=C(T,T.LOG2),Ni=C(T,T.SQRT),RS=C(T,T.INVERSE_SQRT),Rr=C(T,T.FLOOR),Jy=C(T,T.CEIL),Oo=C(T,T.NORMALIZE),du=C(T,T.FRACT),$n=C(T,T.SIN),ms=C(T,T.COS),kS=C(T,T.TAN),VS=C(T,T.ASIN),LS=C(T,T.ACOS),IS=C(T,T.ATAN),It=C(T,T.ABS),op=C(T,T.SIGN),dr=C(T,T.LENGTH),FS=C(T,T.NEGATE),PS=C(T,T.ONE_MINUS),OS=C(T,T.DFDX),DS=C(T,T.DFDY),bS=C(T,T.ROUND),BS=C(T,T.RECIPROCAL),Ky=C(T,T.TRUNC),US=C(T,T.FWIDTH);C(T,T.BITCAST);const jS=C(T,T.ATAN2),hn=C(T,T.MIN),Jt=C(T,T.MAX),WS=C(T,T.MOD),HS=C(T,T.STEP),$S=C(T,T.REFLECT),GS=C(T,T.DISTANCE),qS=C(T,T.DIFFERENCE),kr=C(T,T.DOT),t1=C(T,T.CROSS),zn=C(T,T.POW),e1=C(T,T.POW,2),XS=C(T,T.POW,3),YS=C(T,T.POW,4),ZS=C(T,T.TRANSFORM_DIRECTION),QS=n=>K(op(n),zn(It(n),1/3)),JS=n=>kr(n,n),jt=C(T,T.MIX),Sr=(n,t=0,e=1)=>D(new T(T.CLAMP,D(n),D(t),D(e))),KS=n=>Sr(n),n1=C(T,T.REFRACT),Vn=C(T,T.SMOOTHSTEP),tT=C(T,T.FACEFORWARD),eT=(n,t,e)=>jt(t,e,n),nT=(n,t,e)=>Vn(t,e,n);_("all",Yy);_("any",CS);_("equals",AS);_("radians",zS);_("degrees",ES);_("exp",Zy);_("exp2",Fh);_("log",Qy);_("log2",hu);_("sqrt",Ni);_("inverseSqrt",RS);_("floor",Rr);_("ceil",Jy);_("normalize",Oo);_("fract",du);_("sin",$n);_("cos",ms);_("tan",kS);_("asin",VS);_("acos",LS);_("atan",IS);_("abs",It);_("sign",op);_("length",dr);_("lengthSq",JS);_("negate",FS);_("oneMinus",PS);_("dFdx",OS);_("dFdy",DS);_("round",bS);_("reciprocal",BS);_("trunc",Ky);_("fwidth",US);_("atan2",jS);_("min",hn);_("max",Jt);_("mod",WS);_("step",HS);_("reflect",$S);_("distance",GS);_("dot",kr);_("cross",t1);_("pow",zn);_("pow2",e1);_("pow3",XS);_("pow4",YS);_("transformDirection",ZS);_("mix",eT);_("clamp",Sr);_("refract",n1);_("smoothstep",nT);_("faceForward",tT);_("difference",qS);_("saturate",KS);_("cbrt",QS);I("MathNode",T);const sT=R(n=>{const{value:t}=n,{rgb:e}=t,s=e.mul(.9478672986).add(.0521327014).pow(2.4),i=e.mul(.0773993808),r=e.lessThanEqual(.04045),o=jt(s,i,r);return U(o,t.a)}),iT=R(n=>{const{value:t}=n,{rgb:e}=t,s=e.pow(.41666).mul(1.055).sub(.055),i=e.mul(12.92),r=e.lessThanEqual(.0031308),o=jt(s,i,r);return U(o,t.a)}),fm=n=>{let t=null;return n===zr?t="Linear":n===Wn&&(t="sRGB"),t},s1=(n,t)=>fm(n)+"To"+fm(t);class ze extends ct{constructor(t,e){super("vec4"),this.method=t,this.node=e}setup(){const{method:t,node:e}=this;return t===ze.LINEAR_TO_LINEAR?e:rT[t]({value:e})}}ze.LINEAR_TO_LINEAR="LinearToLinear";ze.LINEAR_TO_sRGB="LinearTosRGB";ze.sRGB_TO_LINEAR="sRGBToLinear";const rT={[ze.LINEAR_TO_sRGB]:iT,[ze.sRGB_TO_LINEAR]:sT},oT=(n,t)=>D(new ze(s1(zr,t),D(n))),i1=(n,t)=>D(new ze(s1(t,zr),D(n))),aT=C(ze,ze.LINEAR_TO_sRGB),lT=C(ze,ze.sRGB_TO_LINEAR);_("linearTosRGB",aT);_("sRGBToLinear",lT);_("linearToColorSpace",oT);_("colorSpaceToLinear",i1);I("ColorSpaceNode",ze);class r1 extends ${constructor(t="",e="void"){super(e),this.snippet=t}generate(t,e){const s=this.getNodeType(t),i=this.snippet;if(s==="void")t.addLineFlowCode(i);else return t.format(`( ${i} )`,s,e)}}const pu=C(r1);I("ExpressionNode",r1);class o1 extends vi{constructor(t){super(0),this.textureNode=t,this.updateType=ft.FRAME}get texture(){return this.textureNode.value}update(){const t=this.texture,e=t.images,s=e&&e.length>0?e[0]&&e[0].image||e[0]:t.image;if(s&&s.width!==void 0){const{width:i,height:r}=s;this.value=Math.log2(Math.max(i,r))}}}const uT=C(o1);I("MaxMipLevelNode",o1);class wi extends vi{constructor(t,e=null,s=null){super(t),this.isTextureNode=!0,this.uvNode=e,this.levelNode=s,this.compareNode=null,this.depthNode=null,this.gradNode=null,this.sampler=!0,this.updateMatrix=!1,this.updateType=ft.NONE,this.referenceNode=null,this._value=t,this.setUpdateMatrix(e===null)}set value(t){this.referenceNode?this.referenceNode.value=t:this._value=t}get value(){return this.referenceNode?this.referenceNode.value:this._value}getUniformHash(){return this.value.uuid}getNodeType(){return this.value.isDepthTexture===!0?"float":"vec4"}getInputType(){return"texture"}getDefaultUV(){return Pn(this.value.channel)}updateReference(){return this.value}getTransformedUV(t){const e=this.value;return tt(e.matrix).mul(w(t,1)).xy}setUpdateMatrix(t){return this.updateMatrix=t,this.updateType=t?ft.FRAME:ft.NONE,this}setupUV(t,e){const s=this.value;return t.isFlipY()&&(s.isRenderTargetTexture===!0||s.isFramebufferTexture===!0||s.isDepthTexture===!0)&&(e=e.setY(e.y.oneMinus())),e}setup(t){const e=t.getNodeProperties(this);let s=this.uvNode;(s===null||t.context.forceUVContext===!0)&&t.context.getUV&&(s=t.context.getUV(this)),s||(s=this.getDefaultUV()),this.updateMatrix===!0&&(s=this.getTransformedUV(s)),s=this.setupUV(t,s);let i=this.levelNode;i===null&&t.context.getTextureLevel&&(i=t.context.getTextureLevel(this)),e.uvNode=s,e.levelNode=i,e.compareNode=this.compareNode,e.gradNode=this.gradNode,e.depthNode=this.depthNode}generateUV(t,e){return e.build(t,this.sampler===!0?"vec2":"ivec2")}generateSnippet(t,e,s,i,r,o,a){const l=this.value;let u;return i?u=t.generateTextureLevel(l,e,s,i,r):a?u=t.generateTextureGrad(l,e,s,a,r):o?u=t.generateTextureCompare(l,e,s,o,r):this.sampler===!1?u=t.generateTextureLoad(l,e,s,r):u=t.generateTexture(l,e,s,r),u}generate(t,e){const s=t.getNodeProperties(this),i=this.value;if(!i||i.isTexture!==!0)throw new Error("TextureNode: Need a three.js texture.");const r=super.generate(t,"property");if(e==="sampler")return r+"_sampler";if(t.isReference(e))return r;{const o=t.getDataFromNode(this);let a=o.propertyName;if(a===void 0){const{uvNode:c,levelNode:h,compareNode:d,depthNode:p,gradNode:f}=s,y=this.generateUV(t,c),M=h?h.build(t,"float"):null,m=p?p.build(t,"int"):null,g=d?d.build(t,"float"):null,x=f?[f[0].build(t,"vec2"),f[1].build(t,"vec2")]:null,S=t.getVarFromNode(this);a=t.getPropertyName(S);const E=this.generateSnippet(t,r,y,M,m,g,x);t.addLineFlowCode(`${a} = ${E}`),t.context.tempWrite!==!1&&(o.snippet=E,o.propertyName=a)}let l=a;const u=this.getNodeType(t);return t.needsColorSpaceToLinear(i)&&(l=i1(pu(l,u),i.colorSpace).setup(t).build(t,u)),t.format(l,u,e)}}setSampler(t){return this.sampler=t,this}getSampler(){return this.sampler}uv(t){const e=this.clone();return e.uvNode=t,e.referenceNode=this,D(e)}blur(t){const e=this.clone();return e.levelNode=t.mul(uT(e)),e.referenceNode=this,D(e)}level(t){const e=this.clone();return e.levelNode=t,e.referenceNode=this,e}size(t){return rp(this,t)}compare(t){const e=this.clone();return e.compareNode=D(t),e.referenceNode=this,D(e)}grad(t,e){const s=this.clone();return s.gradNode=[D(t),D(e)],s.referenceNode=this,D(s)}depth(t){const e=this.clone();return e.depthNode=D(t),e.referenceNode=this,D(e)}serialize(t){super.serialize(t),t.value=this.value.toJSON(t.meta).uuid}deserialize(t){super.deserialize(t),this.value=t.meta.textures[t.value]}update(){const t=this.value;t.matrixAutoUpdate===!0&&t.updateMatrix()}clone(){const t=new this.constructor(this.value,this.uvNode,this.levelNode);return t.sampler=this.sampler,t}}const Oe=C(wi),ti=(...n)=>Oe(...n).setSampler(!1);_("texture",Oe);I("TextureNode",wi);class fu extends vi{constructor(t,e,s=0){super(t,e),this.isBufferNode=!0,this.bufferType=e,this.bufferCount=s}getElementType(t){return this.getNodeType(t)}getInputType(){return"buffer"}}const ap=(n,t,e)=>D(new fu(n,t,e));I("BufferNode",fu);class cT extends Er{constructor(t,e){super(t,e),this.isArrayBufferElementNode=!0}getNodeType(t){return this.node.getElementType(t)}generate(t){const e=super.generate(t),s=this.getNodeType();return t.format(e,"vec4",s)}}class a1 extends fu{constructor(t,e=null){super(null,"vec4"),this.array=t,this.elementType=e,this._elementType=null,this._elementLength=0,this.updateType=ft.RENDER,this.isArrayBufferNode=!0}getElementType(){return this.elementType||this._elementType}getElementLength(){return this._elementLength}update(){const{array:t,value:e}=this,s=this.getElementLength(),i=this.getElementType();if(s===1)for(let r=0;r<t.length;r++){const o=r*4;e[o]=t[r]}else if(i==="color")for(let r=0;r<t.length;r++){const o=r*4,a=t[r];e[o]=a.r,e[o+1]=a.g,e[o+2]=a.b||0}else for(let r=0;r<t.length;r++){const o=r*4,a=t[r];e[o]=a.x,e[o+1]=a.y,e[o+2]=a.z||0,e[o+3]=a.w||0}}setup(t){const e=this.array.length;return this._elementType=this.elementType===null?Ns(this.array[0]):this.elementType,this._elementLength=t.getTypeLength(this._elementType),this.value=new Float32Array(e*4),this.bufferCount=e,super.setup(t)}element(t){return D(new cT(this,D(t)))}}const Ph=(n,t)=>D(new a1(n,t));I("UniformsNode",a1);class hT extends Er{constructor(t,e){super(t,e),this.referenceNode=t,this.isReferenceElementNode=!0}getNodeType(){return this.referenceNode.uniformType}generate(t){const e=super.generate(t),s=this.referenceNode.getNodeType(),i=this.getNodeType();return t.format(e,s,i)}}class Vr extends ${constructor(t,e,s=null,i=null){super(),this.property=t,this.uniformType=e,this.object=s,this.count=i,this.properties=t.split("."),this.reference=null,this.node=null,this.updateType=ft.OBJECT}element(t){return D(new hT(this,D(t)))}setNodeType(t){let e=null;this.count!==null?e=ap(null,t,this.count):Array.isArray(this.getValueFromReference())?e=Ph(null,t):t==="texture"?e=Oe(null):e=tt(null,t),this.node=e}getNodeType(t){return this.node===null&&this.updateValue(),this.node.getNodeType(t)}getValueFromReference(t=this.reference){const{properties:e}=this;let s=t[e[0]];for(let i=1;i<e.length;i++)s=s[e[i]];return s}updateReference(t){return this.reference=this.object!==null?this.object:t.object,this.reference}setup(){return this.updateValue(),this.node}update(){this.updateValue()}updateValue(){this.node===null&&this.setNodeType(this.uniformType);const t=this.getValueFromReference();Array.isArray(t)?this.node.array=t:this.node.value=t}}const vn=(n,t,e)=>D(new Vr(n,t,e)),dT=(n,t,e,s)=>D(new Vr(n,t,s,e));I("ReferenceNode",Vr);class l1 extends Vr{constructor(t,e,s=null){super(t,e,s),this.material=s}updateReference(t){return this.reference=this.material!==null?this.material:t.material,this.reference}}const Yn=(n,t,e)=>D(new l1(n,t,e));I("MaterialReferenceNode",l1);const fc=tt("float").onRenderUpdate(({camera:n})=>n.near),mc=tt("float").onRenderUpdate(({camera:n})=>n.far),pT=tt("float").onRenderUpdate(({camera:n})=>2/(Math.log(n.far+1)/Math.LN2)),Tn=tt("mat4").onRenderUpdate(({camera:n})=>n.projectionMatrix),Lr=tt("mat4").onRenderUpdate(({camera:n})=>n.matrixWorldInverse),u1=tt(new z).onRenderUpdate(({camera:n},t)=>t.value.setFromMatrixPosition(n.matrixWorld));class q extends ${constructor(t=q.VIEW_MATRIX,e=null){super(),this.scope=t,this.object3d=e,this.updateType=ft.OBJECT,this._uniformNode=new vi(null)}getNodeType(){const t=this.scope;if(t===q.WORLD_MATRIX||t===q.VIEW_MATRIX)return"mat4";if(t===q.NORMAL_MATRIX)return"mat3";if(t===q.POSITION||t===q.VIEW_POSITION||t===q.DIRECTION||t===q.SCALE)return"vec3"}update(t){const e=this.object3d,s=this._uniformNode,i=this.scope;if(i===q.VIEW_MATRIX)s.value=e.modelViewMatrix;else if(i===q.NORMAL_MATRIX)s.value=e.normalMatrix;else if(i===q.WORLD_MATRIX)s.value=e.matrixWorld;else if(i===q.POSITION)s.value=s.value||new z,s.value.setFromMatrixPosition(e.matrixWorld);else if(i===q.SCALE)s.value=s.value||new z,s.value.setFromMatrixScale(e.matrixWorld);else if(i===q.DIRECTION)s.value=s.value||new z,e.getWorldDirection(s.value);else if(i===q.VIEW_POSITION){const r=t.camera;s.value=s.value||new z,s.value.setFromMatrixPosition(e.matrixWorld),s.value.applyMatrix4(r.matrixWorldInverse)}}generate(t){const e=this.scope;return e===q.WORLD_MATRIX||e===q.VIEW_MATRIX?this._uniformNode.nodeType="mat4":e===q.NORMAL_MATRIX?this._uniformNode.nodeType="mat3":(e===q.POSITION||e===q.VIEW_POSITION||e===q.DIRECTION||e===q.SCALE)&&(this._uniformNode.nodeType="vec3"),this._uniformNode.build(t)}serialize(t){super.serialize(t),t.scope=this.scope}deserialize(t){super.deserialize(t),this.scope=t.scope}}q.VIEW_MATRIX="viewMatrix";q.NORMAL_MATRIX="normalMatrix";q.WORLD_MATRIX="worldMatrix";q.POSITION="position";q.SCALE="scale";q.VIEW_POSITION="viewPosition";q.DIRECTION="direction";C(q,q.DIRECTION);C(q,q.VIEW_MATRIX);C(q,q.NORMAL_MATRIX);C(q,q.WORLD_MATRIX);const Oh=C(q,q.POSITION);C(q,q.SCALE);const c1=C(q,q.VIEW_POSITION);I("Object3DNode",q);class ie extends q{constructor(t=ie.VIEW_MATRIX){super(t)}update(t){this.object3d=t.object,super.update(t)}}P(ie,ie.DIRECTION);const fi=P(ie,ie.VIEW_MATRIX).label("modelViewMatrix").temp("ModelViewMatrix"),h1=P(ie,ie.NORMAL_MATRIX),Do=P(ie,ie.WORLD_MATRIX);P(ie,ie.POSITION);P(ie,ie.SCALE);P(ie,ie.VIEW_POSITION);const fT=tt(new Pt).onObjectUpdate(({object:n},t)=>t.value.copy(n.matrixWorld).invert());I("ModelNode",ie);const Fl=Qt("normal","vec3",w(0,1,0)),Nn=Fl.toVar("normalLocal"),Ps=Ot(h1.mul(Nn),"v_normalView").normalize().toVar("normalView"),mT=Ot(Ps.transformDirection(Lr),"v_normalWorld").normalize().toVar("transformedNormalWorld"),kt=St("vec3","transformedNormalView"),d1=kt.transformDirection(Lr).normalize().toVar("transformedNormalWorld"),Ki=St("vec3","transformedClearcoatNormalView"),mm=new Map;class k extends ${constructor(t){super(),this.scope=t}getCache(t,e){let s=mm.get(t);return s===void 0&&(s=Yn(t,e),mm.set(t,s)),s}getFloat(t){return this.getCache(t,"float")}getColor(t){return this.getCache(t,"color")}getTexture(t){return this.getCache(t==="map"?"map":t+"Map","texture")}setup(t){const e=t.context.material,s=this.scope;let i=null;if(s===k.COLOR){const r=this.getColor(s);e.map&&e.map.isTexture===!0?i=r.mul(this.getTexture("map")):i=r}else if(s===k.OPACITY){const r=this.getFloat(s);e.alphaMap&&e.alphaMap.isTexture===!0?i=r.mul(this.getTexture("alpha")):i=r}else if(s===k.SPECULAR_STRENGTH)e.specularMap&&e.specularMap.isTexture===!0?i=this.getTexture("specular").r:i=v(1);else if(s===k.SPECULAR_INTENSITY){const r=this.getFloat(s);e.specularMap?i=r.mul(this.getTexture(s).a):i=r}else if(s===k.SPECULAR_COLOR){const r=this.getColor(s);e.specularColorMap&&e.specularColorMap.isTexture===!0?i=r.mul(this.getTexture(s).rgb):i=r}else if(s===k.ROUGHNESS){const r=this.getFloat(s);e.roughnessMap&&e.roughnessMap.isTexture===!0?i=r.mul(this.getTexture(s).g):i=r}else if(s===k.METALNESS){const r=this.getFloat(s);e.metalnessMap&&e.metalnessMap.isTexture===!0?i=r.mul(this.getTexture(s).b):i=r}else if(s===k.EMISSIVE){const r=this.getColor(s);e.emissiveMap&&e.emissiveMap.isTexture===!0?i=r.mul(this.getTexture(s)):i=r}else if(s===k.NORMAL)e.normalMap?i=this.getTexture("normal").normalMap(this.getCache("normalScale","vec2")):e.bumpMap?i=this.getTexture("bump").r.bumpMap(this.getFloat("bumpScale")):i=Ps;else if(s===k.CLEARCOAT){const r=this.getFloat(s);e.clearcoatMap&&e.clearcoatMap.isTexture===!0?i=r.mul(this.getTexture(s).r):i=r}else if(s===k.CLEARCOAT_ROUGHNESS){const r=this.getFloat(s);e.clearcoatRoughnessMap&&e.clearcoatRoughnessMap.isTexture===!0?i=r.mul(this.getTexture(s).r):i=r}else if(s===k.CLEARCOAT_NORMAL)e.clearcoatNormalMap?i=this.getTexture(s).normalMap(this.getCache(s+"Scale","vec2")):i=Ps;else if(s===k.SHEEN){const r=this.getColor("sheenColor").mul(this.getFloat("sheen"));e.sheenColorMap&&e.sheenColorMap.isTexture===!0?i=r.mul(this.getTexture("sheenColor").rgb):i=r}else if(s===k.SHEEN_ROUGHNESS){const r=this.getFloat(s);e.sheenRoughnessMap&&e.sheenRoughnessMap.isTexture===!0?i=r.mul(this.getTexture(s).a):i=r,i=i.clamp(.07,1)}else if(s===k.ANISOTROPY)if(e.anisotropyMap&&e.anisotropyMap.isTexture===!0){const r=this.getTexture(s);i=Jd(Zr.x,Zr.y,Zr.y.negate(),Zr.x).mul(r.rg.mul(2).sub(j(1)).normalize().mul(r.b))}else i=Zr;else if(s===k.IRIDESCENCE_THICKNESS){const r=vn("1","float",e.iridescenceThicknessRange);if(e.iridescenceThicknessMap){const o=vn("0","float",e.iridescenceThicknessRange);i=r.sub(o).mul(this.getTexture(s).g).add(o)}else i=r}else if(s===k.TRANSMISSION){const r=this.getFloat(s);e.transmissionMap?i=r.mul(this.getTexture(s).r):i=r}else if(s===k.THICKNESS){const r=this.getFloat(s);e.thicknessMap?i=r.mul(this.getTexture(s).g):i=r}else if(s===k.IOR)i=this.getFloat(s);else{const r=this.getNodeType(t);i=this.getCache(s,r)}return i}}k.ALPHA_TEST="alphaTest";k.COLOR="color";k.OPACITY="opacity";k.SHININESS="shininess";k.SPECULAR="specular";k.SPECULAR_STRENGTH="specularStrength";k.SPECULAR_INTENSITY="specularIntensity";k.SPECULAR_COLOR="specularColor";k.REFLECTIVITY="reflectivity";k.ROUGHNESS="roughness";k.METALNESS="metalness";k.NORMAL="normal";k.CLEARCOAT="clearcoat";k.CLEARCOAT_ROUGHNESS="clearcoatRoughness";k.CLEARCOAT_NORMAL="clearcoatNormal";k.EMISSIVE="emissive";k.ROTATION="rotation";k.SHEEN="sheen";k.SHEEN_ROUGHNESS="sheenRoughness";k.ANISOTROPY="anisotropy";k.IRIDESCENCE="iridescence";k.IRIDESCENCE_IOR="iridescenceIOR";k.IRIDESCENCE_THICKNESS="iridescenceThickness";k.IOR="ior";k.TRANSMISSION="transmission";k.THICKNESS="thickness";k.ATTENUATION_DISTANCE="attenuationDistance";k.ATTENUATION_COLOR="attenuationColor";k.LINE_SCALE="scale";k.LINE_DASH_SIZE="dashSize";k.LINE_GAP_SIZE="gapSize";k.LINE_WIDTH="linewidth";k.LINE_DASH_OFFSET="dashOffset";k.POINT_WIDTH="pointWidth";k.DISPERSION="dispersion";const gT=P(k,k.ALPHA_TEST),bo=P(k,k.COLOR),yT=P(k,k.SHININESS),xT=P(k,k.EMISSIVE),p1=P(k,k.OPACITY),vT=P(k,k.SPECULAR),gm=P(k,k.SPECULAR_INTENSITY),NT=P(k,k.SPECULAR_COLOR),wT=P(k,k.SPECULAR_STRENGTH);P(k,k.REFLECTIVITY);const MT=P(k,k.ROUGHNESS),ST=P(k,k.METALNESS),TT=P(k,k.NORMAL),_T=P(k,k.CLEARCOAT),CT=P(k,k.CLEARCOAT_ROUGHNESS),AT=P(k,k.CLEARCOAT_NORMAL),zT=P(k,k.ROTATION),ET=P(k,k.SHEEN),RT=P(k,k.SHEEN_ROUGHNESS),kT=P(k,k.ANISOTROPY),VT=P(k,k.IRIDESCENCE),LT=P(k,k.IRIDESCENCE_IOR),IT=P(k,k.IRIDESCENCE_THICKNESS),FT=P(k,k.TRANSMISSION),PT=P(k,k.THICKNESS),OT=P(k,k.IOR),DT=P(k,k.ATTENUATION_DISTANCE),bT=P(k,k.ATTENUATION_COLOR),Dh=P(k,k.LINE_SCALE),f1=P(k,k.LINE_DASH_SIZE),m1=P(k,k.LINE_GAP_SIZE),gc=P(k,k.LINE_WIDTH),ym=P(k,k.LINE_DASH_OFFSET),BT=P(k,k.POINT_WIDTH),UT=P(k,k.DISPERSION),Zr=tt(new Q).onReference(function(n){return n.material}).onRenderUpdate(function({material:n}){this.value.set(n.anisotropy*Math.cos(n.anisotropyRotation),n.anisotropy*Math.sin(n.anisotropyRotation))});I("MaterialNode",k);const me=Qt("position","vec3"),ee=me.toVar("positionLocal"),bh=Ot(Do.mul(ee).xyz,"v_positionWorld"),jT=Ot(ee.transformDirection(Do),"v_positionWorldDirection").normalize().toVar("positionWorldDirection"),Ie=Ot(fi.mul(ee).xyz,"v_positionView"),Tt=Ot(Ie.negate(),"v_positionViewDirection").normalize().toVar("positionViewDirection");class g1 extends ct{constructor(t=null){super("vec4"),this.positionNode=t}setup(t){if(t.shaderStage==="fragment")return Ot(t.context.mvp);const e=this.positionNode||ee;return Tn.mul(fi).mul(e)}}const xm=C(g1);I("ModelViewProjectionNode",g1);class y1 extends ou{constructor(t,e=null,s=0,i=0){super(t,e),this.isBufferNode=!0,this.bufferType=e,this.bufferStride=s,this.bufferOffset=i,this.usage=Al,this.instanced=!1,this.attribute=null,t&&t.isBufferAttribute===!0&&(this.attribute=t,this.usage=t.usage,this.instanced=t.isInstancedBufferAttribute)}getNodeType(t){return this.bufferType===null&&(this.bufferType=t.getTypeFromAttribute(this.attribute)),this.bufferType}setup(t){if(this.attribute!==null)return;const e=this.getNodeType(t),s=this.value,i=t.getTypeLength(e),r=this.bufferStride||i,o=this.bufferOffset,a=s.isInterleavedBuffer===!0?s:new gy(s,r),l=new Gd(a,i,o);a.setUsage(this.usage),this.attribute=l,this.attribute.isInstancedBufferAttribute=this.instanced}generate(t){const e=this.getNodeType(t),s=t.getBufferAttributeFromNode(this,e),i=t.getPropertyName(s);let r=null;return t.shaderStage==="vertex"||t.shaderStage==="compute"?(this.name=i,r=i):r=Ot(this).build(t,e),r}getInputType(){return"bufferAttribute"}setUsage(t){return this.usage=t,this}setInstanced(t){return this.instanced=t,this}}const mu=(n,t,e,s)=>D(new y1(n,t,e,s)),WT=(n,t,e,s)=>mu(n,t,e,s).setUsage(Ah),vm=(n,t,e,s)=>mu(n,t,e,s).setInstanced(!0),Nm=(n,t,e,s)=>WT(n,t,e,s).setInstanced(!0);_("toAttribute",n=>mu(n.value));I("BufferAttributeNode",y1);class x1 extends ${constructor(t){super("void"),this.instanceMesh=t,this.instanceMatrixNode=null,this.instanceColorNode=null}setup(){let t=this.instanceMatrixNode;const e=this.instanceMesh;if(t===null){const l=e.instanceMatrix,u=new xM(l.array,16,1),c=l.usage===Ah?Nm:vm,h=[c(u,"vec4",16,0),c(u,"vec4",16,4),c(u,"vec4",16,8),c(u,"vec4",16,12)];t=ur(...h),this.instanceMatrixNode=t}const s=e.instanceColor;if(s&&this.instanceColorNode===null){const l=new sM(s.array,3),u=s.usage===Ah?Nm:vm;this.instanceColorNode=w(u(l,"vec3",3,0))}const i=t.mul(ee).xyz,r=xn(t[0].xyz,t[1].xyz,t[2].xyz),o=Nn.div(w(r[0].dot(r[0]),r[1].dot(r[1]),r[2].dot(r[2]))),a=r.mul(o).xyz;ee.assign(i),Nn.assign(a),this.instanceColorNode!==null&&Sn("vec3","vInstanceColor").assign(this.instanceColorNode)}}const HT=C(x1);I("InstanceNode",x1);const v1=R((n,t)=>(t.geometry.hasAttribute("tangent")===!1&&t.geometry.computeTangents(),Qt("tangent","vec4")))(),lp=v1.xyz.toVar("tangentLocal"),N1=Ot(fi.mul(U(lp,0)).xyz,"v_tangentView").normalize().toVar("tangentView");class w1 extends ${constructor(t){super("void"),this.batchMesh=t,this.instanceColorNode=null,this.batchingIdNode=null}setup(t){this.batchingIdNode===null&&(this.batchingIdNode=Qt("batchId"));const e=this.batchMesh._matricesTexture,s=rp(ti(e),0),i=v(N(this.batchingIdNode)).mul(4).toVar(),r=N(i.mod(s)),o=N(i).div(N(s)),a=ur(ti(e,ii(r,o)),ti(e,ii(r.add(1),o)),ti(e,ii(r.add(2),o)),ti(e,ii(r.add(3),o))),l=xn(a[0].xyz,a[1].xyz,a[2].xyz);ee.assign(a.mul(ee));const u=Nn.div(w(l[0].dot(l[0]),l[1].dot(l[1]),l[2].dot(l[2]))),c=l.mul(u).xyz;Nn.assign(c),t.hasGeometryAttribute("tangent")&&lp.mulAssign(l)}}const $T=C(w1);I("batch",w1);class M1 extends ${constructor(t,e=!1){super("void"),this.skinnedMesh=t,this.useReference=e,this.updateType=ft.OBJECT,this.skinIndexNode=Qt("skinIndex","uvec4"),this.skinWeightNode=Qt("skinWeight","vec4");let s,i,r;e?(s=vn("bindMatrix","mat4"),i=vn("bindMatrixInverse","mat4"),r=dT("skeleton.boneMatrices","mat4",t.skeleton.bones.length)):(s=tt(t.bindMatrix,"mat4"),i=tt(t.bindMatrixInverse,"mat4"),r=ap(t.skeleton.boneMatrices,"mat4",t.skeleton.bones.length)),this.bindMatrixNode=s,this.bindMatrixInverseNode=i,this.boneMatricesNode=r}setup(t){const{skinIndexNode:e,skinWeightNode:s,bindMatrixNode:i,bindMatrixInverseNode:r,boneMatricesNode:o}=this,a=o.element(e.x),l=o.element(e.y),u=o.element(e.z),c=o.element(e.w),h=i.mul(ee),d=Be(a.mul(s.x).mul(h),l.mul(s.y).mul(h),u.mul(s.z).mul(h),c.mul(s.w).mul(h)),p=r.mul(d).xyz;let f=Be(s.x.mul(a),s.y.mul(l),s.z.mul(u),s.w.mul(c));f=r.mul(f).mul(i);const y=f.transformDirection(Nn).xyz;ee.assign(p),Nn.assign(y),t.hasGeometryAttribute("tangent")&&lp.assign(y)}generate(t,e){if(e!=="void")return ee.build(t,e)}update(t){(this.useReference?t.object:this.skinnedMesh).skeleton.update()}}const GT=n=>D(new M1(n,!0));I("SkinningNode",M1);class S1 extends ${constructor(t=[]){super(),this.params=t}getVarName(t){return String.fromCharCode(105+t)}getProperties(t){const e=t.getNodeProperties(this);if(e.stackNode!==void 0)return e;const s={};for(let i=0,r=this.params.length-1;i<r;i++){const o=this.params[i],a=o.isNode!==!0&&o.name||this.getVarName(i),l=o.isNode!==!0&&o.type||"int";s[a]=pu(a,l)}return e.returnsNode=this.params[this.params.length-1](s,t.addStack(),t),e.stackNode=t.removeStack(),e}getNodeType(t){const{returnsNode:e}=this.getProperties(t);return e?e.getNodeType(t):"void"}setup(t){this.getProperties(t)}generate(t){const e=this.getProperties(t),s={tempWrite:!1},i=this.params,r=e.stackNode;for(let l=0,u=i.length-1;l<u;l++){const c=i[l];let h=null,d=null,p=null,f=null,y=null,M=null;c.isNode?(f="int",p=this.getVarName(l),h="0",d=c.build(t,f),y="<"):(f=c.type||"int",p=c.name||this.getVarName(l),h=c.start,d=c.end,y=c.condition,M=c.update,typeof h=="number"?h=h.toString():h&&h.isNode&&(h=h.build(t,f)),typeof d=="number"?d=d.toString():d&&d.isNode&&(d=d.build(t,f)),h!==void 0&&d===void 0?(h=h+" - 1",d="0",y=">="):d!==void 0&&h===void 0&&(h="0",y="<"),y===void 0&&(Number(h)>Number(d)?y=">=":y="<"));const m={start:h,end:d,condition:y},g=m.start,x=m.end;let S="",E="",L="";M||(f==="int"||f==="uint"?y.includes("<")?M="++":M="--":y.includes("<")?M="+= 1.":M="-= 1."),S+=t.getVar(f,p)+" = "+g,E+=p+" "+y+" "+x,L+=p+" "+M;const A=`for ( ${S}; ${E}; ${L} )`;t.addFlowCode((l===0?`
`:"")+t.tab+A+` {

`).addFlowTab()}const o=Jn(r,s).build(t,"void"),a=e.returnsNode?e.returnsNode.build(t):"";t.removeFlowTab().addFlowCode(`
`+t.tab+o);for(let l=0,u=this.params.length-1;l<u;l++)t.addFlowCode((l===0?"":t.tab)+`}

`).removeFlowTab();return t.addFlowTab(),a}}const ut=(...n)=>D(new S1(lr(n,"int"))).append(),T1=()=>pu("break").append();_("loop",(n,...t)=>Fy(n,ut(...t)));I("LoopNode",S1);const yc=new WeakMap,ke=new bt,wm=R(({bufferMap:n,influence:t,stride:e,width:s,depth:i,offset:r})=>{const o=N(iS).mul(e).add(r),a=o.div(s),l=o.sub(a.mul(s));return ti(n,ii(l,a)).depth(i).mul(t)});function qT(n){const t=n.morphAttributes.position!==void 0,e=n.morphAttributes.normal!==void 0,s=n.morphAttributes.color!==void 0,i=n.morphAttributes.position||n.morphAttributes.normal||n.morphAttributes.color,r=i!==void 0?i.length:0;let o=yc.get(n);if(o===void 0||o.count!==r){let g=function(){M.dispose(),yc.delete(n),n.removeEventListener("dispose",g)};var a=g;o!==void 0&&o.texture.dispose();const l=n.morphAttributes.position||[],u=n.morphAttributes.normal||[],c=n.morphAttributes.color||[];let h=0;t===!0&&(h=1),e===!0&&(h=2),s===!0&&(h=3);let d=n.attributes.position.count*h,p=1;const f=4096;d>f&&(p=Math.ceil(d/f),d=f);const y=new Float32Array(d*p*4*r),M=new Pw(y,d,p,r);M.type=ry,M.needsUpdate=!0;const m=h*4;for(let x=0;x<r;x++){const S=l[x],E=u[x],L=c[x],A=d*p*4*x;for(let V=0;V<S.count;V++){const W=V*m;t===!0&&(ke.fromBufferAttribute(S,V),y[A+W+0]=ke.x,y[A+W+1]=ke.y,y[A+W+2]=ke.z,y[A+W+3]=0),e===!0&&(ke.fromBufferAttribute(E,V),y[A+W+4]=ke.x,y[A+W+5]=ke.y,y[A+W+6]=ke.z,y[A+W+7]=0),s===!0&&(ke.fromBufferAttribute(L,V),y[A+W+8]=ke.x,y[A+W+9]=ke.y,y[A+W+10]=ke.z,y[A+W+11]=L.itemSize===4?ke.w:1)}}o={count:r,texture:M,stride:h,size:new Q(d,p)},yc.set(n,o),n.addEventListener("dispose",g)}return o}class _1 extends ${constructor(t){super("void"),this.mesh=t,this.morphBaseInfluence=tt(1),this.updateType=ft.OBJECT}setup(t){const{geometry:e}=t,s=e.morphAttributes.position!==void 0,i=e.morphAttributes.normal!==void 0,r=e.morphAttributes.position||e.morphAttributes.normal||e.morphAttributes.color,o=r!==void 0?r.length:0,{texture:a,stride:l,size:u}=qT(e);s===!0&&ee.mulAssign(this.morphBaseInfluence),i===!0&&Nn.mulAssign(this.morphBaseInfluence);const c=N(u.width);ut(o,({i:h})=>{const d=v(0).toVar();this.mesh.isInstancedMesh===!0&&this.mesh.morphTexture!==null&&this.mesh.morphTexture!==void 0?d.assign(ti(this.mesh.morphTexture,ii(N(h).add(1),N(Oy))).r):d.assign(vn("morphTargetInfluences","float").element(h).toVar()),s===!0&&ee.addAssign(wm({bufferMap:a,influence:d,stride:l,width:c,depth:h,offset:N(0)})),i===!0&&Nn.addAssign(wm({bufferMap:a,influence:d,stride:l,width:c,depth:h,offset:N(1)}))})}update(){const t=this.morphBaseInfluence;this.mesh.geometry.morphTargetsRelative?t.value=1:t.value=1-this.mesh.morphTargetInfluences.reduce((e,s)=>e+s,0)}}const XT=C(_1);I("MorphNode",_1);const YT=Tt.negate().reflect(kt),ZT=YT.transformDirection(Lr).toVar("reflectVector");class C1 extends wi{constructor(t,e=null,s=null){super(t,e,s),this.isCubeTextureNode=!0}getInputType(){return"cubeTexture"}getDefaultUV(){return ZT}setUpdateMatrix(){}setupUV(t,e){const s=this.value;return t.renderer.coordinateSystem===Fo||!s.isRenderTargetTexture?w(e.x.negate(),e.yz):e}generateUV(t,e){return e.build(t,"vec3")}}const A1=C(C1);_("cubeTexture",A1);I("CubeTextureNode",C1);class Jo extends ${constructor(){super("vec3")}generate(){console.warn("Abstract function.")}}I("LightingNode",Jo);let Qr=null;class Mi extends Jo{constructor(t=null){super(),this.updateType=ft.FRAME,this.light=t,this.rtt=null,this.shadowNode=null,this.shadowMaskNode=null,this.color=new mt,this._defaultColorNode=tt(this.color),this.colorNode=this._defaultColorNode,this.isAnalyticLightNode=!0}getCacheKey(){return super.getCacheKey()+"-"+(this.light.id+"-"+(this.light.castShadow?"1":"0"))}getHash(){return this.light.uuid}setupShadow(t){const{object:e}=t;if(e.receiveShadow===!1)return;let s=this.shadowNode;if(s===null){Qr===null&&(Qr=t.createNodeMaterial(),Qr.fragmentNode=U(0,0,0,1),Qr.isShadowNodeMaterial=!0);const i=this.light.shadow,r=t.createRenderTarget(i.mapSize.width,i.mapSize.height),o=new ru;o.minFilter=Ls,o.magFilter=Ls,o.image.width=i.mapSize.width,o.image.height=i.mapSize.height,o.compareFunction=pw,r.depthTexture=o,i.camera.updateProjectionMatrix();const a=vn("bias","float",i),l=vn("normalBias","float",i),u=e.material.shadowPositionNode||bh;let c=tt(i.matrix).mul(u.add(mT.mul(l)));c=c.xyz.div(c.w);const h=c.x.greaterThanEqual(0).and(c.x.lessThanEqual(1)).and(c.y.greaterThanEqual(0)).and(c.y.lessThanEqual(1)).and(c.z.lessThanEqual(1));let d=c.z.add(a);t.renderer.coordinateSystem===Fo&&(d=d.mul(2).sub(1)),c=w(c.x,c.y.oneMinus(),d),s=((M,m,g)=>Oe(M,m).compare(g))(o,c.xy,c.z);const f=Oe(r.texture,c),y=h.mix(1,s.mix(f.a.mix(1,f),1));this.rtt=r,this.colorNode=this.colorNode.mul(y),this.shadowNode=s,this.shadowMaskNode=y,this.updateBeforeType=ft.RENDER}}setup(t){this.light.castShadow?this.setupShadow(t):this.shadowNode!==null&&this.disposeShadow()}updateShadow(t){const{rtt:e,light:s}=this,{renderer:i,scene:r,camera:o}=t,a=r.overrideMaterial;r.overrideMaterial=Qr,e.setSize(s.shadow.mapSize.width,s.shadow.mapSize.height),s.shadow.updateMatrices(s),s.shadow.camera.layers.mask=o.layers.mask;const l=i.toneMapping,u=i.getRenderTarget(),c=i.getRenderObjectFunction();i.setRenderObjectFunction((h,...d)=>{h.castShadow===!0&&i.renderObject(h,...d)}),i.setRenderTarget(e),i.toneMapping=Io,i.render(r,s.shadow.camera),i.setRenderTarget(u),i.setRenderObjectFunction(c),i.toneMapping=l,r.overrideMaterial=a}disposeShadow(){this.rtt.dispose(),this.shadowNode=null,this.shadowMaskNode=null,this.rtt=null,this.colorNode=this._defaultColorNode}updateBefore(t){const{light:e}=this;e.castShadow&&this.updateShadow(t)}update(){const{light:t}=this;this.color.copy(t.color).multiplyScalar(t.intensity)}}I("AnalyticLightNode",Mi);const Pl=new WeakMap,QT=n=>n.sort((t,e)=>t.id-e.id);class JT extends ${constructor(t=[]){super("vec3"),this.totalDiffuseNode=w().temp("totalDiffuse"),this.totalSpecularNode=w().temp("totalSpecular"),this.outgoingLightNode=w().temp("outgoingLight"),this.lightNodes=t,this._hash=null}get hasLight(){return this.lightNodes.length>0}getHash(){if(this._hash===null){const t=[];for(const e of this.lightNodes)t.push(e.getHash());this._hash="lights-"+t.join(",")}return this._hash}analyze(t){const e=t.getDataFromNode(this);for(const s of e.nodes)s.build(t)}setup(t){const e=t.context,s=e.lightingModel;let i=this.outgoingLightNode;if(s){const{lightNodes:r,totalDiffuseNode:o,totalSpecularNode:a}=this;e.outgoingLight=i;const l=t.addStack(),u=t.getDataFromNode(this);u.nodes=l.nodes,s.start(e,l,t);for(const m of r)m.build(t);s.indirectDiffuse(e,l,t),s.indirectSpecular(e,l,t),s.ambientOcclusion(e,l,t);const{backdrop:c,backdropAlpha:h}=e,{directDiffuse:d,directSpecular:p,indirectDiffuse:f,indirectSpecular:y}=e.reflectedLight;let M=d.add(f);c!==null&&(h!==null?M=w(h.mix(M,c)):M=w(c),e.material.transparent=!0),o.assign(M),a.assign(p.add(y)),i.assign(o.add(a)),s.finish(e,l,t),i=i.bypass(t.removeStack())}return i}_getLightNodeById(t){for(const e of this.lightNodes)if(e.isAnalyticLightNode&&e.light.id===t)return e;return null}fromLights(t=[]){const e=[];t=QT(t);for(const s of t){let i=this._getLightNodeById(s.id);if(i===null){const r=s.constructor,o=Pl.has(r)?Pl.get(r):Mi;i=D(new o(s))}e.push(i)}return this.lightNodes=e,this._hash=null,this}}const KT=C(JT);function Ir(n,t){if(Pl.has(n)){console.warn(`Redefinition of light node ${t.type}`);return}if(typeof n!="function")throw new Error(`Light ${n.name} is not a class`);if(typeof t!="function"||!t.type)throw new Error(`Light node ${t.type} is not a class`);Pl.set(n,t)}class z1 extends Jo{constructor(t=null){super(),this.aoNode=t}setup(t){const s=this.aoNode.x.sub(1).mul(1).add(1);t.context.ambientOcclusion.mulAssign(s)}}I("AONode",z1);class E1 extends tp{constructor(t,e=null,s=null,i=null){super(t),this.lightingModel=e,this.backdropNode=s,this.backdropAlphaNode=i,this._context=null}getContext(){const{backdropNode:t,backdropAlphaNode:e}=this,s=w().temp("directDiffuse"),i=w().temp("directSpecular"),r=w().temp("indirectDiffuse"),o=w().temp("indirectSpecular"),a={directDiffuse:s,directSpecular:i,indirectDiffuse:r,indirectSpecular:o};return{radiance:w().temp("radiance"),irradiance:w().temp("irradiance"),iblIrradiance:w().temp("iblIrradiance"),ambientOcclusion:v(1).temp("ambientOcclusion"),reflectedLight:a,backdrop:t,backdropAlpha:e}}setup(t){return this.context=this._context||(this._context=this.getContext()),this.context.lightingModel=this.lightingModel||t.context.lightingModel,super.setup(t)}}const R1=C(E1);_("lightingContext",R1);I("LightingContextNode",E1);const t_=n=>n.mul(v1.w).xyz,e_=Ot(t_(Ps.cross(N1)),"v_bitangentView").normalize().toVar("bitangentView"),tr=xn(N1,e_,Ps);Tt.mul(tr);const n_=(()=>{let n=cr.cross(Tt);return n=n.cross(cr).normalize(),n=jt(n,kt,Ks.mul(ws.oneMinus()).oneMinus().pow2().pow2()).normalize(),n})();class up extends ${constructor(t,e,s=null){super(),this.condNode=t,this.ifNode=e,this.elseNode=s}getNodeType(t){const e=this.ifNode.getNodeType(t);if(this.elseNode!==null){const s=this.elseNode.getNodeType(t);if(t.getTypeLength(s)>t.getTypeLength(e))return s}return e}generate(t,e){const s=this.getNodeType(t),i={tempWrite:!1},r=t.getDataFromNode(this);if(r.nodeProperty!==void 0)return r.nodeProperty;const{ifNode:o,elseNode:a}=this,l=e!=="void",u=l?St(s).build(t):"";r.nodeProperty=u;const c=Jn(this.condNode).build(t,"bool");t.addFlowCode(`
${t.tab}if ( ${c} ) {

`).addFlowTab();let h=Jn(o,i).build(t,s);if(h&&(l?h=u+" = "+h+";":h="return "+h+";"),t.removeFlowTab().addFlowCode(t.tab+"	"+h+`

`+t.tab+"}"),a!==null){t.addFlowCode(` else {

`).addFlowTab();let d=Jn(a,i).build(t,s);d&&(l?d=u+" = "+d+";":d="return "+d+";"),t.removeFlowTab().addFlowCode(t.tab+"	"+d+`

`+t.tab+`}

`)}else t.addFlowCode(`

`);return t.format(u,s,e)}}const Fe=C(up);_("cond",Fe);I("CondNode",up);const Mm=v(1),Bh=v(-2),ba=v(.8),xc=v(-1),Ba=v(.4),vc=v(2),Ua=v(.305),Nc=v(3),Sm=v(.21),s_=v(4),Tm=v(4),i_=v(16),r_=R(([n])=>{const t=w(It(n)).toVar(),e=v(-1).toVar();return Z(t.x.greaterThan(t.z),()=>{Z(t.x.greaterThan(t.y),()=>{e.assign(Fe(n.x.greaterThan(0),0,3))}).else(()=>{e.assign(Fe(n.y.greaterThan(0),1,4))})}).else(()=>{Z(t.z.greaterThan(t.y),()=>{e.assign(Fe(n.z.greaterThan(0),2,5))}).else(()=>{e.assign(Fe(n.y.greaterThan(0),1,4))})}),e}).setLayout({name:"getFace",type:"float",inputs:[{name:"direction",type:"vec3"}]}),o_=R(([n,t])=>{const e=j().toVar();return Z(t.equal(0),()=>{e.assign(j(n.z,n.y).div(It(n.x)))}).elseif(t.equal(1),()=>{e.assign(j(n.x.negate(),n.z.negate()).div(It(n.y)))}).elseif(t.equal(2),()=>{e.assign(j(n.x.negate(),n.y).div(It(n.z)))}).elseif(t.equal(3),()=>{e.assign(j(n.z.negate(),n.y).div(It(n.x)))}).elseif(t.equal(4),()=>{e.assign(j(n.x.negate(),n.z).div(It(n.y)))}).else(()=>{e.assign(j(n.x,n.y).div(It(n.z)))}),K(.5,e.add(1))}).setLayout({name:"getUV",type:"vec2",inputs:[{name:"direction",type:"vec3"},{name:"face",type:"float"}]}),a_=R(([n])=>{const t=v(0).toVar();return Z(n.greaterThanEqual(ba),()=>{t.assign(Mm.sub(n).mul(xc.sub(Bh)).div(Mm.sub(ba)).add(Bh))}).elseif(n.greaterThanEqual(Ba),()=>{t.assign(ba.sub(n).mul(vc.sub(xc)).div(ba.sub(Ba)).add(xc))}).elseif(n.greaterThanEqual(Ua),()=>{t.assign(Ba.sub(n).mul(Nc.sub(vc)).div(Ba.sub(Ua)).add(vc))}).elseif(n.greaterThanEqual(Sm),()=>{t.assign(Ua.sub(n).mul(s_.sub(Nc)).div(Ua.sub(Sm)).add(Nc))}).else(()=>{t.assign(v(-2).mul(hu(K(1.16,n))))}),t}).setLayout({name:"roughnessToMip",type:"float",inputs:[{name:"roughness",type:"float"}]});R(([n,t])=>{const e=n.toVar();e.assign(K(2,e).sub(1));const s=w(e,1).toVar();return Z(t.equal(0),()=>{s.assign(s.zyx)}).elseif(t.equal(1),()=>{s.assign(s.xzy),s.xz.mulAssign(-1)}).elseif(t.equal(2),()=>{s.x.mulAssign(-1)}).elseif(t.equal(3),()=>{s.assign(s.zyx),s.xz.mulAssign(-1)}).elseif(t.equal(4),()=>{s.assign(s.xzy),s.xy.mulAssign(-1)}).elseif(t.equal(5),()=>{s.z.mulAssign(-1)}),s}).setLayout({name:"getDirection",type:"vec3",inputs:[{name:"uv",type:"vec2"},{name:"face",type:"float"}]});const l_=R(([n,t,e,s,i,r])=>{const o=v(e),a=w(t),l=Sr(a_(o),Bh,r),u=du(l),c=Rr(l),h=w(Uh(n,a,c,s,i,r)).toVar();return Z(u.notEqual(0),()=>{const d=w(Uh(n,a,c.add(1),s,i,r)).toVar();h.assign(jt(h,d,u))}),h}),Uh=R(([n,t,e,s,i,r])=>{const o=v(e).toVar(),a=w(t),l=v(r_(a)).toVar(),u=v(Jt(Tm.sub(o),0)).toVar();o.assign(Jt(o,Tm));const c=v(Fh(o)).toVar(),h=j(o_(a,l).mul(c.sub(2)).add(1)).toVar();return Z(l.greaterThan(2),()=>{h.y.addAssign(c),l.subAssign(3)}),h.x.addAssign(l.mul(c)),h.x.addAssign(u.mul(K(3,i_))),h.y.addAssign(K(4,Fh(r).sub(c))),h.x.mulAssign(s),h.y.mulAssign(i),n.uv(h).grad(j(),j())}),wc=R(({envMap:n,mipInt:t,outputDirection:e,theta:s,axis:i,CUBEUV_TEXEL_WIDTH:r,CUBEUV_TEXEL_HEIGHT:o,CUBEUV_MAX_MIP:a})=>{const l=ms(s),u=e.mul(l).add(i.cross(e).mul($n(s))).add(i.mul(i.dot(e).mul(l.oneMinus())));return Uh(n,u,t,r,o,a)});R(({n,latitudinal:t,poleAxis:e,outputDirection:s,weights:i,samples:r,dTheta:o,mipInt:a,envMap:l,CUBEUV_TEXEL_WIDTH:u,CUBEUV_TEXEL_HEIGHT:c,CUBEUV_MAX_MIP:h})=>{const d=w(Fe(t,e,t1(e,s))).toVar();Z(Yy(d.equals(w(0))),()=>{d.assign(w(s.z,0,s.x.negate()))}),d.assign(Oo(d));const p=w().toVar();return p.addAssign(i.element(N(0)).mul(wc({theta:0,axis:d,outputDirection:s,mipInt:a,envMap:l,CUBEUV_TEXEL_WIDTH:u,CUBEUV_TEXEL_HEIGHT:c,CUBEUV_MAX_MIP:h}))),ut({start:N(1),end:n},({i:f})=>{Z(f.greaterThanEqual(r),()=>{T1()});const y=v(o.mul(v(f))).toVar();p.addAssign(i.element(f).mul(wc({theta:y.mul(-1),axis:d,outputDirection:s,mipInt:a,envMap:l,CUBEUV_TEXEL_WIDTH:u,CUBEUV_TEXEL_HEIGHT:c,CUBEUV_MAX_MIP:h}))),p.addAssign(i.element(f).mul(wc({theta:y,axis:d,outputDirection:s,mipInt:a,envMap:l,CUBEUV_TEXEL_WIDTH:u,CUBEUV_TEXEL_HEIGHT:c,CUBEUV_MAX_MIP:h})))}),U(p,1)});let Ol=null;const _m=new WeakMap;function u_(n){const t=Math.log2(n)-2,e=1/n;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:e,maxMip:t}}function c_(n){let t=_m.get(n);if((t!==void 0?t.pmremVersion:-1)!==n.pmremVersion){if(n.isCubeTexture){if(n.source.data.some(s=>s===void 0))throw new Error("PMREMNode: Undefined texture in CubeTexture. Use onLoad callback or async loader");t=Ol.fromCubemap(n,t)}else{if(n.image===void 0)throw new Error("PMREMNode: Undefined image in Texture. Use onLoad callback or async loader");t=Ol.fromEquirectangular(n,t)}t.pmremVersion=n.pmremVersion,_m.set(n,t)}return t.texture}class k1 extends ct{constructor(t,e=null,s=null){super("vec3"),this._value=t,this._pmrem=null,this.uvNode=e,this.levelNode=s,this._generator=null,this._texture=Oe(null),this._width=tt(0),this._height=tt(0),this._maxMip=tt(0),this.updateBeforeType=ft.RENDER}set value(t){this._value=t,this._pmrem=null}get value(){return this._value}updateFromTexture(t){const e=u_(t.image.height);this._texture.value=t,this._width.value=e.texelWidth,this._height.value=e.texelHeight,this._maxMip.value=e.maxMip}updateBefore(){let t=this._pmrem;const e=t?t.pmremVersion:-1,s=this._value;e!==s.pmremVersion&&(s.isPMREMTexture===!0?t=s:t=c_(s),this._pmrem=t,this.updateFromTexture(t))}setup(t){Ol===null&&(Ol=t.createPMREMGenerator()),this.updateBefore(t);let e=this.uvNode;e===null&&t.context.getUV&&(e=t.context.getUV(this));const s=this.value;t.renderer.coordinateSystem===Xn&&s.isPMREMTexture!==!0&&s.isRenderTargetTexture===!0&&(e=w(e.x.negate(),e.yz));let i=this.levelNode;return i===null&&t.context.getTextureLevel&&(i=t.context.getTextureLevel(this)),l_(this._texture,e,i,this._width,this._height,this._maxMip)}}const h_=C(k1);I("PMREMNode",k1);const Cm=new WeakMap;class V1 extends Jo{constructor(t=null){super(),this.envNode=t}setup(t){let e=this.envNode;if(e.isTextureNode){let d=Cm.get(e.value);d===void 0&&(d=h_(e.value),Cm.set(e.value,d)),e=d}const{material:s}=t,r=s.envMap?vn("envMapIntensity","float",t.material):vn("environmentIntensity","float",t.scene),a=s.useAnisotropy===!0||s.anisotropy>0?n_:kt,l=Jn(e,Am(ws,a)).mul(r),u=Jn(e,d_(d1)).mul(Math.PI).mul(r),c=El(l);t.context.radiance.addAssign(c),t.context.iblIrradiance.addAssign(u);const h=t.context.lightingModel.clearcoatRadiance;if(h){const d=Jn(e,Am(Vl,Ki)).mul(r),p=El(d);h.addAssign(p)}}}const Am=(n,t)=>{let e=null;return{getUV:()=>(e===null&&(e=Tt.negate().reflect(t),e=n.mul(n).mix(e,t).normalize(),e=e.transformDirection(Lr)),e),getTextureLevel:()=>n}},d_=n=>({getUV:()=>n,getTextureLevel:()=>v(1)});I("EnvironmentNode",V1);class L1 extends Jo{constructor(t){super(),this.node=t}setup(t){t.context.irradiance.addAssign(this.node)}}I("IrradianceNode",L1);let Mc,Sc;class st extends ${constructor(t){super(),this.scope=t,this.isViewportNode=!0}getNodeType(){return this.scope===st.VIEWPORT?"vec4":this.scope===st.COORDINATE?"vec3":"vec2"}getUpdateType(){let t=ft.NONE;return(this.scope===st.RESOLUTION||this.scope===st.VIEWPORT)&&(t=ft.RENDER),this.updateType=t,t}update({renderer:t}){this.scope===st.VIEWPORT?t.getViewport(Sc):t.getDrawingBufferSize(Mc)}setup(){const t=this.scope;let e=null;if(t===st.RESOLUTION)e=tt(Mc||(Mc=new Q));else if(t===st.VIEWPORT)e=tt(Sc||(Sc=new bt));else{e=p_.div(jh);let s=e.x,i=e.y;/bottom/i.test(t)&&(i=i.oneMinus()),/right/i.test(t)&&(s=s.oneMinus()),e=j(s,i)}return e}generate(t){if(this.scope===st.COORDINATE){let e=t.getFragCoord();if(t.isFlipY()){const s=t.getNodeProperties(jh).outputNode.build(t);e=`${t.getType("vec3")}( ${e}.x, ${s}.y - ${e}.y, ${e}.z )`}return e}return super.generate(t)}}st.COORDINATE="coordinate";st.RESOLUTION="resolution";st.VIEWPORT="viewport";st.TOP_LEFT="topLeft";st.BOTTOM_LEFT="bottomLeft";st.TOP_RIGHT="topRight";st.BOTTOM_RIGHT="bottomRight";const p_=P(st,st.COORDINATE),jh=P(st,st.RESOLUTION),pr=P(st,st.VIEWPORT),Bo=P(st,st.TOP_LEFT);P(st,st.BOTTOM_LEFT);P(st,st.TOP_RIGHT);P(st,st.BOTTOM_RIGHT);I("ViewportNode",st);const Jr=new Q;class Ko extends wi{constructor(t=Bo,e=null,s=null){s===null&&(s=new vy,s.minFilter=iy),super(s,t,e),this.generateMipmaps=!1,this.isOutputTextureNode=!0,this.updateBeforeType=ft.FRAME}updateBefore(t){const e=t.renderer;e.getDrawingBufferSize(Jr);const s=this.value;(s.image.width!==Jr.width||s.image.height!==Jr.height)&&(s.image.width=Jr.width,s.image.height=Jr.height,s.needsUpdate=!0);const i=s.generateMipmaps;s.generateMipmaps=this.generateMipmaps,e.copyFramebufferToTexture(s),s.generateMipmaps=i}clone(){const t=new this.constructor(this.uvNode,this.levelNode,this.value);return t.generateMipmaps=this.generateMipmaps,t}}const f_=C(Ko),I1=C(Ko,null,null,{generateMipmaps:!0});_("viewportTexture",f_);_("viewportMipTexture",I1);I("ViewportTextureNode",Ko);let Tc=null;class F1 extends Ko{constructor(t=Bo,e=null){Tc===null&&(Tc=new ru),super(t,e,Tc)}}const P1=C(F1);_("viewportDepthTexture",P1);I("ViewportDepthTextureNode",F1);class Kt extends ${constructor(t,e=null){super("float"),this.scope=t,this.valueNode=e,this.isViewportDepthNode=!0}generate(t){const{scope:e}=this;return e===Kt.DEPTH_PIXEL?t.getFragDepth():super.generate(t)}setup(){const{scope:t}=this;let e=null;if(t===Kt.DEPTH)e=Wh(Ie.z,fc,mc);else if(t===Kt.DEPTH_TEXTURE){const s=this.valueNode||P1(),i=O1(s,fc,mc);e=Wh(i,fc,mc)}else t===Kt.DEPTH_PIXEL&&this.valueNode!==null&&(e=D1().assign(this.valueNode));return e}}const Wh=(n,t,e)=>n.add(t).div(t.sub(e)),O1=(n,t,e)=>t.mul(e).div(e.sub(t).mul(n).sub(e));Kt.DEPTH="depth";Kt.DEPTH_TEXTURE="depthTexture";Kt.DEPTH_PIXEL="depthPixel";const D1=C(Kt,Kt.DEPTH_PIXEL);P(Kt,Kt.DEPTH);C(Kt,Kt.DEPTH_TEXTURE);const b1=P(Kt,Kt.DEPTH_PIXEL);b1.assign=n=>D1(n);I("ViewportDepthNode",Kt);class Os extends ${constructor(t=Os.DEFAULT){super(),this.scope=t}setup(t){super.setup(t);const e=t.clippingContext,{localClipIntersection:s,localClippingCount:i,globalClippingCount:r}=e,o=r+i,a=s?o-i:o;return this.scope===Os.ALPHA_TO_COVERAGE?this.setupAlphaToCoverage(e.planes,o,a):this.setupDefault(e.planes,o,a)}setupAlphaToCoverage(t,e,s){return R(()=>{const i=Ph(t),r=St("float","distanceToPlane"),o=St("float","distanceToGradient"),a=St("float","clipOpacity");a.assign(1);let l;if(ut(s,({i:u})=>{l=i.element(u),r.assign(Ie.dot(l.xyz).negate().add(l.w)),o.assign(r.fwidth().div(2)),a.mulAssign(Vn(o.negate(),o,r)),a.equal(0).discard()}),s<e){const u=St("float","unionclipOpacity");u.assign(1),ut({start:s,end:e},({i:c})=>{l=i.element(c),r.assign(Ie.dot(l.xyz).negate().add(l.w)),o.assign(r.fwidth().div(2)),u.mulAssign(Vn(o.negate(),o,r).oneMinus())}),a.mulAssign(u.oneMinus())}dt.a.mulAssign(a),dt.a.equal(0).discard()})()}setupDefault(t,e,s){return R(()=>{const i=Ph(t);let r;if(ut(s,({i:o})=>{r=i.element(o),Ie.dot(r.xyz).greaterThan(r.w).discard()}),s<e){const o=St("bool","clipped");o.assign(!0),ut({start:s,end:e},({i:a})=>{r=i.element(a),o.assign(Ie.dot(r.xyz).greaterThan(r.w).and(o))}),o.discard()}})()}}Os.ALPHA_TO_COVERAGE="alphaToCoverage";Os.DEFAULT="default";const m_=()=>D(new Os),g_=()=>D(new Os(Os.ALPHA_TO_COVERAGE));class B1 extends ${constructor(){super("bool"),this.isFrontFacingNode=!0}generate(t){const{renderer:e,material:s}=t;return e.coordinateSystem===Xn&&s.side===ey?"false":t.getFrontFacing()}}const y_=P(B1),Dl=v(y_).mul(2).sub(1);I("FrontFacingNode",B1);const Hh=new Map;class pe extends be{constructor(){super(),this.isNodeMaterial=!0,this.type=this.constructor.type,this.forceSinglePass=!1,this.fog=!0,this.lights=!0,this.normals=!0,this.lightsNode=null,this.envNode=null,this.aoNode=null,this.colorNode=null,this.normalNode=null,this.opacityNode=null,this.backdropNode=null,this.backdropAlphaNode=null,this.alphaTestNode=null,this.positionNode=null,this.depthNode=null,this.shadowNode=null,this.shadowPositionNode=null,this.outputNode=null,this.fragmentNode=null,this.vertexNode=null}customProgramCacheKey(){return this.type+Sy(this)}build(t){this.setup(t)}setup(t){t.addStack(),t.stack.outputNode=this.vertexNode||this.setupPosition(t),t.addFlow("vertex",t.removeStack()),t.addStack();let e;const s=this.setupClipping(t);if(this.depthWrite===!0&&this.setupDepth(t),this.fragmentNode===null){this.normals===!0&&this.setupNormal(t),this.setupDiffuseColor(t),this.setupVariants(t);const i=this.setupLighting(t);s!==null&&t.stack.add(s);const r=U(i,dt.a).max(0);e=this.setupOutput(t,r),rS.assign(e),this.outputNode!==null&&(e=this.outputNode)}else{let i=this.fragmentNode;i.isOutputStructNode!==!0&&(i=U(i)),e=this.setupOutput(t,i)}t.stack.outputNode=e,t.addFlow("fragment",t.removeStack())}setupClipping(t){if(t.clippingContext===null)return null;const{globalClippingCount:e,localClippingCount:s}=t.clippingContext;let i=null;return(e||s)&&(this.alphaToCoverage?i=g_():t.stack.add(m_())),i}setupDepth(t){const{renderer:e}=t;let s=this.depthNode;s===null&&e.logarithmicDepthBuffer===!0&&(s=xm().w.add(1).log2().mul(pT).mul(.5)),s!==null&&b1.assign(s).append()}setupPosition(t){const{object:e}=t,s=e.geometry;if(t.addStack(),(s.morphAttributes.position||s.morphAttributes.normal||s.morphAttributes.color)&&XT(e).append(),e.isSkinnedMesh===!0&&GT(e).append(),this.displacementMap){const r=Yn("displacementMap","texture"),o=Yn("displacementScale","float"),a=Yn("displacementBias","float");ee.addAssign(Nn.normalize().mul(r.x.mul(o).add(a)))}e.isBatchedMesh&&$T(e).append(),e.instanceMatrix&&e.instanceMatrix.isInstancedBufferAttribute===!0&&t.isAvailable("instance")===!0&&HT(e).append(),this.positionNode!==null&&ee.assign(this.positionNode);const i=xm();return t.context.vertex=t.removeStack(),t.context.mvp=i,i}setupDiffuseColor({object:t,geometry:e}){let s=this.colorNode?U(this.colorNode):bo;this.vertexColors===!0&&e.hasAttribute("color")&&(s=U(s.xyz.mul(Qt("color","vec3")),s.a)),t.instanceColor&&(s=Sn("vec3","vInstanceColor").mul(s)),dt.assign(s);const i=this.opacityNode?v(this.opacityNode):p1;if(dt.a.assign(dt.a.mul(i)),this.alphaTestNode!==null||this.alphaTest>0){const r=this.alphaTestNode!==null?v(this.alphaTestNode):gT;dt.a.lessThanEqual(r).discard()}}setupVariants(){}setupNormal(){if(this.flatShading===!0){const t=Ie.dFdx().cross(Ie.dFdy()).normalize();kt.assign(t.mul(Dl))}else{const t=this.normalNode?w(this.normalNode):TT;kt.assign(t.mul(Dl))}}getEnvNode(t){let e=null;return this.envNode?e=this.envNode:this.envMap?e=this.envMap.isCubeTexture?A1(this.envMap):Oe(this.envMap):t.environmentNode&&(e=t.environmentNode),e}setupLights(t){const e=this.getEnvNode(t),s=[];if(e&&s.push(new V1(e)),t.material.lightMap&&s.push(new L1(Yn("lightMap","texture"))),this.aoNode!==null||t.material.aoMap){const r=this.aoNode!==null?this.aoNode:Oe(t.material.aoMap);s.push(new z1(r))}let i=this.lightsNode||t.lightsNode;return s.length>0&&(i=KT([...i.lightNodes,...s])),i}setupLightingModel(){}setupLighting(t){const{material:e}=t,{backdropNode:s,backdropAlphaNode:i,emissiveNode:r}=this,a=this.lights===!0||this.lightsNode!==null?this.setupLights(t):null;let l=dt.rgb;if(a&&a.hasLight!==!1){const u=this.setupLightingModel(t);l=R1(a,u,s,i)}else s!==null&&(l=w(i!==null?jt(l,s,i):s));return(r&&r.isNode===!0||e.emissive&&e.emissive.isColor===!0)&&(l=l.add(w(r||xT))),l}setupOutput(t,e){const s=t.fogNode;return s&&(e=U(s.mix(e.rgb,s.colorNode),e.a)),e}setDefaultValues(t){for(const s in t){const i=t[s];this[s]===void 0&&(this[s]=i,i&&i.clone&&(this[s]=i.clone()))}const e=Object.getOwnPropertyDescriptors(t.constructor.prototype);for(const s in e)Object.getOwnPropertyDescriptor(this.constructor.prototype,s)===void 0&&e[s].get!==void 0&&Object.defineProperty(this.constructor.prototype,s,e[s])}toJSON(t){const e=t===void 0||typeof t=="string";e&&(t={textures:{},images:{},nodes:{}});const s=be.prototype.toJSON.call(this,t),i=zl(this);s.inputNodes={};for(const{property:o,childNode:a}of i)s.inputNodes[o]=a.toJSON(t).uuid;function r(o){const a=[];for(const l in o){const u=o[l];delete u.metadata,a.push(u)}return a}if(e){const o=r(t.textures),a=r(t.images),l=r(t.nodes);o.length>0&&(s.textures=o),a.length>0&&(s.images=a),l.length>0&&(s.nodes=l)}return s}copy(t){return this.lightsNode=t.lightsNode,this.envNode=t.envNode,this.colorNode=t.colorNode,this.normalNode=t.normalNode,this.opacityNode=t.opacityNode,this.backdropNode=t.backdropNode,this.backdropAlphaNode=t.backdropAlphaNode,this.alphaTestNode=t.alphaTestNode,this.positionNode=t.positionNode,this.depthNode=t.depthNode,this.shadowNode=t.shadowNode,this.shadowPositionNode=t.shadowPositionNode,this.outputNode=t.outputNode,this.fragmentNode=t.fragmentNode,this.vertexNode=t.vertexNode,super.copy(t)}static fromMaterial(t){if(t.isNodeMaterial===!0)return t;const e=t.type.replace("Material","NodeMaterial"),s=x_(e);if(s===void 0)throw new Error(`NodeMaterial: Material "${t.type}" is not compatible.`);for(const i in t)s[i]=t[i];return s}}function Yt(n,t){if(typeof t!="function"||!n)throw new Error(`Node material ${n} is not a class`);if(Hh.has(n)){console.warn(`Redefinition of node material ${n}`);return}Hh.set(n,t),t.type=n}function x_(n){const t=Hh.get(n);if(t!==void 0)return new t}Yt("NodeMaterial",pe);class U1 extends ${constructor(t=null){super(),this.nodes=[],this.outputNode=null,this.parent=t,this._currentCond=null,this.isStackNode=!0}getNodeType(t){return this.outputNode?this.outputNode.getNodeType(t):"void"}add(t){return this.nodes.push(t),this}if(t,e){const s=new go(e);return this._currentCond=Fe(t,s),this.add(this._currentCond)}elseif(t,e){const s=new go(e),i=Fe(t,s);return this._currentCond.elseNode=i,this._currentCond=i,this}else(t){return this._currentCond.elseNode=new go(t),this}build(t,...e){const s=LM();dm(this);for(const i of this.nodes)i.build(t,"void");return dm(s),this.outputNode?this.outputNode.build(t,...e):super.build(t,...e)}}C(U1);I("StackNode",U1);class j1 extends ct{constructor(t=jT){super("vec2"),this.dirNode=t}setup(){const t=this.dirNode,e=t.z.atan2(t.x).mul(1/(Math.PI*2)).add(.5),s=t.y.clamp(-1,1).asin().mul(1/Math.PI).add(.5);return j(e,s)}}C(j1);I("EquirectUVNode",j1);class W1 extends ${constructor(t){super(),this.types=t,this.isStructTypeNode=!0}getMemberTypes(){return this.types}}I("StructTypeNode",W1);class H1 extends ${constructor(...t){super(),this.members=t,this.isOutputStructNode=!0}setup(t){super.setup(t);const e=this.members,s=[];for(let i=0;i<e.length;i++)s.push(e[i].getNodeType(t));this.nodeType=t.getStructTypeFromNode(new W1(s)).name}generate(t,e){const s=t.getOutputStructName(),i=this.members,r=s!==""?s+".":"";for(let o=0;o<i.length;o++){const a=i[o].build(t,e);t.addLineFlowCode(`${r}m${o} = ${a}`)}return s}}C(H1);I("OutputStructNode",H1);class $1 extends ${constructor(t){super(),this.seedNode=t}setup(){const t=this.seedNode.toUint().mul(747796405).add(2891336453),e=t.shiftRight(t.shiftRight(28).add(4)).bitXor(t).mul(277803737);return e.shiftRight(22).bitXor(e).toFloat().mul(1/2**32)}}const v_=C($1);_("hash",v_);I("HashNode",$1);const $h=(n,t)=>zn(K(4,n.mul(Vt(1,n))),t),N_=(n,t)=>n.lessThan(.5)?$h(n.mul(2),t).div(2):Vt(1,$h(K(Vt(1,n),2),t).div(2)),w_=(n,t,e)=>zn(Fs(zn(n,t),Be(zn(n,t),zn(Vt(1,n),e))),1/t),M_=(n,t)=>$n(pm.mul(t.mul(n).sub(1))).div(pm.mul(t.mul(n).sub(1)));_("parabola",$h);_("gain",N_);_("pcurve",w_);_("sinc",M_);const _n=R(([n])=>n.fract().sub(.5).abs()),G1=R(([n])=>w(_n(n.z.add(_n(n.y.mul(1)))),_n(n.z.add(_n(n.x.mul(1)))),_n(n.y.add(_n(n.x.mul(1)))))),S_=R(([n,t,e])=>{const s=w(n).toVar(),i=v(1.4).toVar(),r=v(0).toVar(),o=w(s).toVar();return ut({start:v(0),end:v(3),type:"float",condition:"<="},()=>{const a=w(G1(o.mul(2))).toVar();s.addAssign(a.add(e.mul(v(.1).mul(t)))),o.mulAssign(1.8),i.mulAssign(1.5),s.mulAssign(1.2);const l=v(_n(s.z.add(_n(s.x.add(_n(s.y)))))).toVar();r.addAssign(l.div(i)),o.addAssign(.14)}),r});_n.setLayout({name:"tri",type:"float",inputs:[{name:"x",type:"float"}]});G1.setLayout({name:"tri3",type:"vec3",inputs:[{name:"p",type:"vec3"}]});S_.setLayout({name:"triNoise3D",type:"float",inputs:[{name:"p",type:"vec3"},{name:"spd",type:"float"},{name:"time",type:"float"}]});let _c;class q1 extends up{constructor(t){_c=_c||pu("discard"),super(t,_c)}}const T_=C(q1),__=n=>T_(n).append();_("discard",__);I("DiscardNode",q1);class X1 extends ${constructor(t=[],...e){super(),this.functionNodes=t,this.parametersNodes=e,this._candidateFnCall=null}getNodeType(){return this.functionNodes[0].shaderNode.layout.type}setup(t){const e=this.parametersNodes;let s=this._candidateFnCall;if(s===null){let i=null,r=-1;for(const o of this.functionNodes){const l=o.shaderNode.layout;if(l===null)throw new Error("FunctionOverloadingNode: FunctionNode must be a layout.");const u=l.inputs;if(e.length===u.length){let c=0;for(let h=0;h<e.length;h++){const d=e[h],p=u[h];d.getNodeType(t)===p.type?c++:c=0}c>r&&(i=o,r=c)}}this._candidateFnCall=s=i(...e)}return s}}const C_=C(X1),Je=n=>(...t)=>C_(n,...t);I("FunctionOverloadingNode",X1);class Y1 extends ct{constructor(){super("vec2")}setup(){const t=w(Tt.z,0,Tt.x.negate()).normalize(),e=Tt.cross(t);return j(t.dot(kt),e.dot(kt)).mul(.495).add(.5)}}const A_=P(Y1);I("MatcapUVNode",Y1);class Se extends vi{constructor(t=Se.LOCAL,e=1,s=0){super(s),this.scope=t,this.scale=e,this.updateType=ft.FRAME}update(t){const e=this.scope,s=this.scale;e===Se.LOCAL?this.value+=t.deltaTime*s:e===Se.DELTA?this.value=t.deltaTime*s:e===Se.FRAME?this.value=t.frameId:this.value=t.time*s}serialize(t){super.serialize(t),t.scope=this.scope,t.scale=this.scale}deserialize(t){super.deserialize(t),this.scope=t.scope,this.scale=t.scale}}Se.LOCAL="local";Se.GLOBAL="global";Se.DELTA="delta";Se.FRAME="frame";const z_=(n,t=0)=>D(new Se(Se.LOCAL,n,t));P(Se,Se.FRAME).toUint();I("TimerNode",Se);class Bt extends ${constructor(t=Bt.SINE,e=z_()){super(),this.method=t,this.timeNode=e}getNodeType(t){return this.timeNode.getNodeType(t)}setup(){const t=this.method,e=D(this.timeNode);let s=null;return t===Bt.SINE?s=e.add(.75).mul(Math.PI*2).sin().mul(.5).add(.5):t===Bt.SQUARE?s=e.fract().round():t===Bt.TRIANGLE?s=e.add(.5).fract().mul(2).sub(1).abs():t===Bt.SAWTOOTH&&(s=e.fract()),s}serialize(t){super.serialize(t),t.method=this.method}deserialize(t){super.deserialize(t),this.method=t.method}}Bt.SINE="sine";Bt.SQUARE="square";Bt.TRIANGLE="triangle";Bt.SAWTOOTH="sawtooth";C(Bt,Bt.SINE);C(Bt,Bt.SQUARE);C(Bt,Bt.TRIANGLE);C(Bt,Bt.SAWTOOTH);I("OscNode",Bt);class Ln extends ct{constructor(t,e){super(),this.scope=t,this.node=e}getNodeType(t){return this.node.getNodeType(t)}setup(){const{scope:t,node:e}=this;let s=null;return t===Ln.DIRECTION_TO_COLOR?s=e.mul(.5).add(.5):t===Ln.COLOR_TO_DIRECTION&&(s=e.mul(2).sub(1)),s}}Ln.DIRECTION_TO_COLOR="directionToColor";Ln.COLOR_TO_DIRECTION="colorToDirection";const Z1=C(Ln,Ln.DIRECTION_TO_COLOR),E_=C(Ln,Ln.COLOR_TO_DIRECTION);_("directionToColor",Z1);_("colorToDirection",E_);I("PackingNode",Ln);class cp extends ${constructor(t,e,s,i=v(0),r=v(1)){super(),this.node=t,this.inLowNode=e,this.inHighNode=s,this.outLowNode=i,this.outHighNode=r,this.doClamp=!0}setup(){const{node:t,inLowNode:e,inHighNode:s,outLowNode:i,outHighNode:r,doClamp:o}=this;let a=t.sub(e).div(s.sub(e));return o===!0&&(a=a.clamp()),a.mul(r.sub(i)).add(i)}}const R_=C(cp,null,null,{doClamp:!1}),k_=C(cp);_("remap",R_);_("remapClamp",k_);I("RemapNode",cp);class Q1 extends ct{constructor(t,e,s=j(.5)){super("vec2"),this.uvNode=t,this.rotationNode=e,this.centerNode=s}setup(){const{uvNode:t,rotationNode:e,centerNode:s}=this;return t.sub(s).rotate(e).add(s)}}const V_=C(Q1);_("rotateUV",V_);I("RotateUVNode",Q1);class J1 extends ct{constructor(t,e){super(),this.positionNode=t,this.rotationNode=e}getNodeType(t){return this.positionNode.getNodeType(t)}setup(t){const{rotationNode:e,positionNode:s}=this;if(this.getNodeType(t)==="vec2"){const r=e.cos(),o=e.sin();return Jd(r,o,o.negate(),r).mul(s)}else{const r=e,o=ur(U(1,0,0,0),U(0,ms(r.x),$n(r.x).negate(),0),U(0,$n(r.x),ms(r.x),0),U(0,0,0,1)),a=ur(U(ms(r.y),0,$n(r.y),0),U(0,1,0,0),U($n(r.y).negate(),0,ms(r.y),0),U(0,0,0,1)),l=ur(U(ms(r.z),$n(r.z).negate(),0,0),U($n(r.z),ms(r.z),0,0),U(0,0,1,0),U(0,0,0,1));return o.mul(a).mul(l).mul(U(s,1)).xyz}}}const L_=C(J1);_("rotate",L_);I("RotateNode",J1);class K1 extends ${constructor(t,e=Pn(),s=v(0)){super("vec2"),this.countNode=t,this.uvNode=e,this.frameNode=s}setup(){const{frameNode:t,uvNode:e,countNode:s}=this,{width:i,height:r}=s,o=t.mod(i.mul(r)).floor(),a=o.mod(i),l=r.sub(o.add(1).div(i).ceil()),u=s.reciprocal(),c=j(a,l);return e.add(c).mul(u)}}C(K1);I("SpriteSheetUVNode",K1);class tx extends Er{constructor(t,e){super(t,e),this.isStorageArrayElementNode=!0}set storageBufferNode(t){this.node=t}get storageBufferNode(){return this.node}setup(t){return t.isAvailable("storageBuffer")===!1&&!this.node.instanceIndex&&this.node.bufferObject===!0&&t.setupPBO(this.node),super.setup(t)}generate(t,e){let s;const i=t.context.assign;if(t.isAvailable("storageBuffer")===!1){const{node:r}=this;!r.instanceIndex&&this.node.bufferObject===!0&&i!==!0?s=t.generatePBO(this):s=r.build(t)}else s=super.generate(t);if(i!==!0){const r=this.getNodeType(t);s=t.format(s,r,e)}return s}}const ex=C(tx);_("storageElement",ex);I("StorageArrayElementNode",tx);class nx extends ${constructor(t,e=null,s=null,i=v(1),r=ee,o=Nn){super("vec4"),this.textureXNode=t,this.textureYNode=e,this.textureZNode=s,this.scaleNode=i,this.positionNode=r,this.normalNode=o}setup(){const{textureXNode:t,textureYNode:e,textureZNode:s,scaleNode:i,positionNode:r,normalNode:o}=this;let a=o.abs().normalize();a=a.div(a.dot(w(1)));const l=r.yz.mul(i),u=r.zx.mul(i),c=r.xy.mul(i),h=t.value,d=e!==null?e.value:h,p=s!==null?s.value:h,f=Oe(h,l).mul(a.x),y=Oe(d,u).mul(a.y),M=Oe(p,c).mul(a.z);return Be(f,y,M)}}const I_=C(nx),F_=(...n)=>I_(...n);_("triplanarTexture",F_);I("TriplanarTexturesNode",nx);new Js;new z;new z;new z;new Pt;new z(0,0,-1);new bt;new z;new z;new bt;new Q;new di;j(Bo.x.oneMinus(),Bo.y);class P_ extends Kd{constructor(t=0){super(null,"vec4"),this.isVertexColorNode=!0,this.index=t}getAttributeName(){const t=this.index;return"color"+(t>0?t:"")}generate(t){const e=this.getAttributeName(t),s=t.hasGeometryAttribute(e);let i;return s===!0?i=super.generate(t):i=t.generateConst(this.nodeType,new bt(1,1,1,1)),i}serialize(t){super.serialize(t),t.index=this.index}deserialize(t){super.deserialize(t),this.index=t.index}}I("VertexColorNode",P_);class sx extends Vr{constructor(t,e,s=null){super(t,e,s),this.renderer=s}updateReference(t){return this.reference=this.renderer!==null?this.renderer:t.renderer,this.reference}}const O_=(n,t,e)=>D(new sx(n,t,e));I("RendererReferenceNode",sx);const gu=1/6,ix=n=>K(gu,K(n,K(n,n.negate().add(3)).sub(3)).add(1)),Gh=n=>K(gu,K(n,K(n,K(3,n).sub(6))).add(4)),rx=n=>K(gu,K(n,K(n,K(-3,n).add(3)).add(3)).add(1)),qh=n=>K(gu,zn(n,3)),zm=n=>ix(n).add(Gh(n)),Em=n=>rx(n).add(qh(n)),Rm=n=>Be(-1,Gh(n).div(ix(n).add(Gh(n)))),km=n=>Be(1,qh(n).div(rx(n).add(qh(n)))),Vm=(n,t,e)=>{const s=n.uvNode,i=K(s,t.zw).add(.5),r=Rr(i),o=du(i),a=zm(o.x),l=Em(o.x),u=Rm(o.x),c=km(o.x),h=Rm(o.y),d=km(o.y),p=j(r.x.add(u),r.y.add(h)).sub(.5).mul(t.xy),f=j(r.x.add(c),r.y.add(h)).sub(.5).mul(t.xy),y=j(r.x.add(u),r.y.add(d)).sub(.5).mul(t.xy),M=j(r.x.add(c),r.y.add(d)).sub(.5).mul(t.xy),m=zm(o.y).mul(Be(a.mul(n.uv(p).level(e)),l.mul(n.uv(f).level(e)))),g=Em(o.y).mul(Be(a.mul(n.uv(y).level(e)),l.mul(n.uv(M).level(e))));return m.add(g)},D_=(n,t)=>{const e=j(n.size(N(t))),s=j(n.size(N(t.add(1)))),i=Fs(1,e),r=Fs(1,s),o=Vm(n,U(i,e),Rr(t)),a=Vm(n,U(r,s),Jy(t));return du(t).mix(o,a)};class ox extends ct{constructor(t,e=v(3)){super("vec4"),this.textureNode=t,this.blurNode=e}setup(){return D_(this.textureNode,this.blurNode)}}const b_=C(ox);_("bicubic",b_);I("TextureBicubicNode",ox);class ax extends ${constructor(){super("vec2"),this.isPointUVNode=!0}generate(){return"vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y )"}}P(ax);I("PointUVNode",ax);class mn extends ${constructor(t=mn.BACKGROUND_BLURRINESS,e=null){super(),this.scope=t,this.scene=e}setup(t){const e=this.scope,s=this.scene!==null?this.scene:t.scene;let i;return e===mn.BACKGROUND_BLURRINESS?i=vn("backgroundBlurriness","float",s):e===mn.BACKGROUND_INTENSITY?i=vn("backgroundIntensity","float",s):console.error("THREE.SceneNode: Unknown scope:",e),i}}mn.BACKGROUND_BLURRINESS="backgroundBlurriness";mn.BACKGROUND_INTENSITY="backgroundIntensity";P(mn,mn.BACKGROUND_BLURRINESS);P(mn,mn.BACKGROUND_INTENSITY);I("SceneNode",mn);class B_ extends fu{constructor(t,e,s=0){super(t,e,s),this.isStorageBufferNode=!0,this.bufferObject=!1,this._attribute=null,this._varying=null,t.isStorageBufferAttribute!==!0&&t.isStorageInstancedBufferAttribute!==!0&&(t.isInstancedBufferAttribute?t.isStorageInstancedBufferAttribute=!0:t.isStorageBufferAttribute=!0)}getInputType(){return"storageBuffer"}element(t){return ex(this,t)}setBufferObject(t){return this.bufferObject=t,this}generate(t){if(t.isAvailable("storageBuffer"))return super.generate(t);const e=this.getNodeType(t);this._attribute===null&&(this._attribute=mu(this.value),this._varying=Ot(this._attribute));const s=this._varying.build(t,e);return t.registerTransform(s,this._attribute),s}}I("StorageBufferNode",B_);const U_={WriteOnly:"write-only",ReadOnly:"read-only",ReadWrite:"read-write"};class lx extends wi{constructor(t,e,s=null){super(t,e),this.storeNode=s,this.isStorageTextureNode=!0,this.access=U_.WriteOnly}getInputType(){return"storageTexture"}setup(t){super.setup(t);const e=t.getNodeProperties(this);e.storeNode=this.storeNode}setAccess(t){return this.access=t,this}generate(t,e){let s;return this.storeNode!==null?s=this.generateStore(t):s=super.generate(t,e),s}generateStore(t){const e=t.getNodeProperties(this),{uvNode:s,storeNode:i}=e,r=super.generate(t,"property"),o=s.build(t,"uvec2"),a=i.build(t,"vec4"),l=t.generateTextureStore(t,r,o,a);t.addLineFlowCode(l)}}C(lx);I("StorageTextureNode",lx);const j_=R(({texture:n,uv:t})=>{const s=w().temp();return Z(t.x.lessThan(1e-4),()=>{s.assign(w(1,0,0))}).elseif(t.y.lessThan(1e-4),()=>{s.assign(w(0,1,0))}).elseif(t.z.lessThan(1e-4),()=>{s.assign(w(0,0,1))}).elseif(t.x.greaterThan(1-1e-4),()=>{s.assign(w(-1,0,0))}).elseif(t.y.greaterThan(1-1e-4),()=>{s.assign(w(0,-1,0))}).elseif(t.z.greaterThan(1-1e-4),()=>{s.assign(w(0,0,-1))}).else(()=>{const r=n.uv(t.add(w(-.01,0,0))).r.sub(n.uv(t.add(w(.01,0,0))).r),o=n.uv(t.add(w(0,-.01,0))).r.sub(n.uv(t.add(w(0,.01,0))).r),a=n.uv(t.add(w(0,0,-.01))).r.sub(n.uv(t.add(w(0,0,.01))).r);s.assign(w(r,o,a))}),s.normalize()});class ux extends wi{constructor(t,e=null,s=null){super(t,e,s),this.isTexture3DNode=!0}getInputType(){return"texture3D"}getDefaultUV(){return w(.5,.5,.5)}setUpdateMatrix(){}setupUV(t,e){return e}generateUV(t,e){return e.build(t,"vec3")}normal(t){return j_({texture:this,uv:t})}}const W_=C(ux);I("Texture3DNode",ux);class H_ extends Vr{constructor(t,e,s=null){super(t,e,s),this.userData=s}update(t){this.reference=this.userData!==null?this.userData:t.object.userData,super.update(t)}}I("UserDataNode",H_);const $_=R(({base:n,blend:t})=>{const e=s=>t[s].lessThan(Xy).cond(t[s],n[s].oneMinus().div(t[s]).oneMinus().max(0));return w(e("x"),e("y"),e("z"))}).setLayout({name:"burnColor",type:"vec3",inputs:[{name:"base",type:"vec3"},{name:"blend",type:"vec3"}]}),G_=R(({base:n,blend:t})=>{const e=s=>t[s].equal(1).cond(t[s],n[s].div(t[s].oneMinus()).max(0));return w(e("x"),e("y"),e("z"))}).setLayout({name:"dodgeColor",type:"vec3",inputs:[{name:"base",type:"vec3"},{name:"blend",type:"vec3"}]}),q_=R(({base:n,blend:t})=>{const e=s=>n[s].oneMinus().mul(t[s].oneMinus()).oneMinus();return w(e("x"),e("y"),e("z"))}).setLayout({name:"screenColor",type:"vec3",inputs:[{name:"base",type:"vec3"},{name:"blend",type:"vec3"}]}),X_=R(({base:n,blend:t})=>{const e=s=>n[s].lessThan(.5).cond(n[s].mul(t[s],2),n[s].oneMinus().mul(t[s].oneMinus()).oneMinus());return w(e("x"),e("y"),e("z"))}).setLayout({name:"overlayColor",type:"vec3",inputs:[{name:"base",type:"vec3"},{name:"blend",type:"vec3"}]});class qt extends ct{constructor(t,e,s){super(),this.blendMode=t,this.baseNode=e,this.blendNode=s}setup(){const{blendMode:t,baseNode:e,blendNode:s}=this,i={base:e,blend:s};let r=null;return t===qt.BURN?r=$_(i):t===qt.DODGE?r=G_(i):t===qt.SCREEN?r=q_(i):t===qt.OVERLAY&&(r=X_(i)),r}}qt.BURN="burn";qt.DODGE="dodge";qt.SCREEN="screen";qt.OVERLAY="overlay";const Y_=C(qt,qt.BURN),Z_=C(qt,qt.DODGE),Q_=C(qt,qt.OVERLAY),J_=C(qt,qt.SCREEN);_("burn",Y_);_("dodge",Z_);_("overlay",Q_);_("screen",J_);I("BlendModeNode",qt);const K_=R(({textureNode:n,bumpScale:t})=>{const e=i=>n.cache().context({getUV:r=>i(r.uvNode||Pn()),forceUVContext:!0}),s=v(e(i=>i));return j(v(e(i=>i.add(i.dFdx()))).sub(s),v(e(i=>i.add(i.dFdy()))).sub(s)).mul(t)}),t3=R(n=>{const{surf_pos:t,surf_norm:e,dHdxy:s}=n,i=t.dFdx().normalize(),r=t.dFdy().normalize(),o=e,a=r.cross(o),l=o.cross(i),u=i.dot(a).mul(Dl),c=u.sign().mul(s.x.mul(a).add(s.y.mul(l)));return u.abs().mul(e).sub(c).normalize()});class cx extends ct{constructor(t,e=null){super("vec3"),this.textureNode=t,this.scaleNode=e}setup(){const t=this.scaleNode!==null?this.scaleNode:1,e=K_({textureNode:this.textureNode,bumpScale:t});return t3({surf_pos:Ie,surf_norm:Ps,dHdxy:e})}}const e3=C(cx);_("bumpMap",e3);I("BumpMapNode",cx);const n3=R(({color:n,adjustment:t})=>t.mix(hx(n.rgb),n.rgb)),s3=R(({color:n,adjustment:t})=>{const e=Be(n.r,n.g,n.b).div(3),s=n.r.max(n.g.max(n.b)),i=s.sub(e).mul(t).mul(-3);return jt(n.rgb,s,i)}),i3=R(({color:n,adjustment:t})=>{const e=w(.57735,.57735,.57735),s=t.cos();return w(n.rgb.mul(s).add(e.cross(n.rgb).mul(t.sin()).add(e.mul(kr(e,n.rgb).mul(s.oneMinus())))))});class Ae extends ct{constructor(t,e,s=v(1)){super("vec3"),this.method=t,this.colorNode=e,this.adjustmentNode=s}setup(){const{method:t,colorNode:e,adjustmentNode:s}=this,i={color:e,adjustment:s};let r=null;return t===Ae.SATURATION?r=n3(i):t===Ae.VIBRANCE?r=s3(i):t===Ae.HUE?r=i3(i):console.error(`${this.type}: Method "${this.method}" not supported!`),r}}Ae.SATURATION="saturation";Ae.VIBRANCE="vibrance";Ae.HUE="hue";const r3=C(Ae,Ae.SATURATION),o3=C(Ae,Ae.VIBRANCE),a3=C(Ae,Ae.HUE),l3=w(.2125,.7154,.0721),hx=(n,t=l3)=>kr(n,t),dx=(n,t)=>jt(w(0),n,hx(n).sub(t).max(0));_("saturation",r3);_("vibrance",o3);_("hue",a3);_("threshold",dx);I("ColorAdjustmentNode",Ae);const u3=R(n=>{const{eye_pos:t,surf_norm:e,mapN:s,uv:i}=n,r=t.dFdx(),o=t.dFdy(),a=i.dFdx(),l=i.dFdy(),u=e,c=o.cross(u),h=u.cross(r),d=c.mul(a.x).add(h.mul(l.x)),p=c.mul(a.y).add(h.mul(l.y)),f=d.dot(d).max(p.dot(p)),y=Dl.mul(f.inverseSqrt());return Be(d.mul(s.x,y),p.mul(s.y,y),u.mul(s.z)).normalize()});class px extends ct{constructor(t,e=null){super("vec3"),this.node=t,this.scaleNode=e,this.normalMapType=Is}setup(t){const{normalMapType:e,scaleNode:s}=this;let i=this.node.mul(2).sub(1);s!==null&&(i=w(i.xy.mul(s),i.z));let r=null;return e===hw?r=h1.mul(i).normalize():e===Is&&(t.hasGeometryAttribute("tangent")===!0?r=tr.mul(i).normalize():r=u3({eye_pos:Ie,surf_norm:Ps,mapN:i,uv:Pn()})),r}}const c3=C(px);_("normalMap",c3);I("NormalMapNode",px);class fx extends ct{constructor(t,e){super(),this.sourceNode=t,this.stepsNode=e}setup(){const{sourceNode:t,stepsNode:e}=this;return t.mul(e).floor().div(e)}}const h3=C(fx);_("posterize",h3);I("PosterizeNode",fx);const d3=R(({color:n,exposure:t})=>n.mul(t).clamp()),p3=R(({color:n,exposure:t})=>(n=n.mul(t),n.div(n.add(1)).clamp())),f3=R(({color:n,exposure:t})=>{n=n.mul(t),n=n.sub(.004).max(0);const e=n.mul(n.mul(6.2).add(.5)),s=n.mul(n.mul(6.2).add(1.7)).add(.06);return e.div(s).pow(2.2)}),m3=R(({color:n})=>{const t=n.mul(n.add(.0245786)).sub(90537e-9),e=n.mul(n.add(.432951).mul(.983729)).add(.238081);return t.div(e)}),g3=R(({color:n,exposure:t})=>{const e=xn(.59719,.35458,.04823,.076,.90834,.01566,.0284,.13383,.83777),s=xn(1.60475,-.53108,-.07367,-.10208,1.10813,-.00605,-.00327,-.07276,1.07602);return n=n.mul(t).div(.6),n=e.mul(n),n=m3({color:n}),n=s.mul(n),n.clamp()}),y3=xn(w(1.6605,-.1246,-.0182),w(-.5876,1.1329,-.1006),w(-.0728,-.0083,1.1187)),x3=xn(w(.6274,.0691,.0164),w(.3293,.9195,.088),w(.0433,.0113,.8956)),v3=R(([n])=>{const t=w(n).toVar(),e=w(t.mul(t)).toVar(),s=w(e.mul(e)).toVar();return v(15.5).mul(s.mul(e)).sub(K(40.14,s.mul(t))).add(K(31.96,s).sub(K(6.868,e.mul(t))).add(K(.4298,e).add(K(.1191,t).sub(.00232))))}),N3=R(({color:n,exposure:t})=>{const e=w(n).toVar(),s=xn(w(.856627153315983,.137318972929847,.11189821299995),w(.0951212405381588,.761241990602591,.0767994186031903),w(.0482516061458583,.101439036467562,.811302368396859)),i=xn(w(1.1271005818144368,-.1413297634984383,-.14132976349843826),w(-.11060664309660323,1.157823702216272,-.11060664309660294),w(-.016493938717834573,-.016493938717834257,1.2519364065950405)),r=v(-12.47393),o=v(4.026069);return e.mulAssign(t),e.assign(x3.mul(e)),e.assign(s.mul(e)),e.assign(Jt(e,1e-10)),e.assign(hu(e)),e.assign(e.sub(r).div(o.sub(r))),e.assign(Sr(e,0,1)),e.assign(v3(e)),e.assign(i.mul(e)),e.assign(zn(Jt(w(0),e),w(2.2))),e.assign(y3.mul(e)),e.assign(Sr(e,0,1)),e}),w3={[ew]:d3,[nw]:p3,[sw]:f3,[iw]:g3,[rw]:N3};class mx extends ct{constructor(t=Io,e=S3,s=null){super("vec3"),this.toneMapping=t,this.exposureNode=e,this.colorNode=s}getCacheKey(){let t=super.getCacheKey();return t="{toneMapping:"+this.toneMapping+",nodes:"+t+"}",t}setup(t){const e=this.colorNode||t.context.color,s=this.toneMapping;if(s===Io)return e;const i={exposure:this.exposureNode,color:e},r=w3[s];let o=null;return r?o=r(i):(console.error("ToneMappingNode: Unsupported Tone Mapping configuration.",s),o=e),o}}const M3=(n,t,e)=>D(new mx(n,D(t),D(e))),S3=O_("toneMappingExposure","float");_("toneMapping",(n,t,e)=>M3(t,e,n));I("ToneMappingNode",mx);let Cc=null;class gx extends Ko{constructor(t=Bo,e=null){Cc===null&&(Cc=new vy),super(t,e,Cc)}updateReference(){return this}}const T3=C(gx);_("viewportSharedTexture",T3);I("ViewportSharedTextureNode",gx);const _3=new Q;class Xh extends wi{constructor(t,e){super(e),this.passNode=t,this.setUpdateMatrix(!1)}setup(t){return this.passNode.build(t),super.setup(t)}clone(){return new this.constructor(this.passNode,this.value)}}class ta extends ct{constructor(t,e,s){super("vec4"),this.scope=t,this.scene=e,this.camera=s,this._pixelRatio=1,this._width=1,this._height=1;const i=new ru;i.isRenderTargetTexture=!0,i.name="PostProcessingDepth";const r=new di(this._width*this._pixelRatio,this._height*this._pixelRatio,{type:lw});r.texture.name="PostProcessing",r.depthTexture=i,this.renderTarget=r,this.updateBeforeType=ft.FRAME,this._textureNode=D(new Xh(this,r.texture)),this._depthTextureNode=D(new Xh(this,i)),this._depthNode=null,this._viewZNode=null,this._cameraNear=tt(0),this._cameraFar=tt(0),this.isPassNode=!0}isGlobal(){return!0}getTextureNode(){return this._textureNode}getTextureDepthNode(){return this._depthTextureNode}getViewZNode(){if(this._viewZNode===null){const t=this._cameraNear,e=this._cameraFar;this._viewZNode=O1(this._depthTextureNode,t,e)}return this._viewZNode}getDepthNode(){if(this._depthNode===null){const t=this._cameraNear,e=this._cameraFar;this._depthNode=Wh(this.getViewZNode(),t,e)}return this._depthNode}setup(){return this.scope===ta.COLOR?this.getTextureNode():this.getDepthNode()}updateBefore(t){const{renderer:e}=t,{scene:s,camera:i}=this;this._pixelRatio=e.getPixelRatio();const r=e.getSize(_3);this.setSize(r.width,r.height);const o=e.toneMapping,a=e.toneMappingNode,l=e.getRenderTarget();this._cameraNear.value=i.near,this._cameraFar.value=i.far,e.toneMapping=Io,e.toneMappingNode=null,e.setRenderTarget(this.renderTarget),e.render(s,i),e.toneMapping=o,e.toneMappingNode=a,e.setRenderTarget(l)}setSize(t,e){this._width=t,this._height=e;const s=this._width*this._pixelRatio,i=this._height*this._pixelRatio;this.renderTarget.setSize(s,i)}setPixelRatio(t){this._pixelRatio=t,this.setSize(this._width,this._height)}dispose(){this.renderTarget.dispose()}}ta.COLOR="color";ta.DEPTH="depth";const hp=(n,t)=>D(new Xh(n,t));I("PassNode",ta);const Ac=new my(-1,1,1,-1,0,1);class C3 extends iu{constructor(t=!1){super();const e=t===!1?[0,-1,0,1,2,1]:[0,2,0,0,2,0];this.setAttribute("position",new zh([-1,3,0,-1,-1,0,3,-1,0],3)),this.setAttribute("uv",new zh(e,2))}}const A3=new C3;class yu extends Zw{constructor(t=null){super(A3,t),this.camera=Ac}renderAsync(t){return t.renderAsync(this,Ac)}render(t){t.render(this,Ac)}}const Lm=new yu,Im=new yu;class z3 extends ct{constructor(t,e=2){super("vec4"),this.textureNode=t,this.sigma=e,this.directionNode=j(1),this._invSize=tt(new Q),this._passDirection=tt(new Q),this._horizontalRT=new di,this._horizontalRT.texture.name="GaussianBlurNode.horizontal",this._verticalRT=new di,this._verticalRT.texture.name="GaussianBlurNode.vertical",this._textureNode=hp(this,this._verticalRT.texture),this.updateBeforeType=ft.RENDER,this.resolution=new Q(1,1)}setSize(t,e){t=Math.max(Math.round(t*this.resolution.x),1),e=Math.max(Math.round(e*this.resolution.y),1),this._invSize.value.set(1/t,1/e),this._horizontalRT.setSize(t,e),this._verticalRT.setSize(t,e)}updateBefore(t){const{renderer:e}=t,s=this.textureNode,i=s.value,r=e.getRenderTarget(),o=s.value;Lm.material=this._material,Im.material=this._material,this.setSize(i.image.width,i.image.height);const a=i.type;this._horizontalRT.texture.type=a,this._verticalRT.texture.type=a,e.setRenderTarget(this._horizontalRT),this._passDirection.value.set(1,0),Lm.render(e),s.value=this._horizontalRT.texture,e.setRenderTarget(this._verticalRT),this._passDirection.value.set(0,1),Im.render(e),e.setRenderTarget(r),s.value=o}getTextureNode(){return this._textureNode}setup(t){const e=this.textureNode;if(e.isTextureNode!==!0)return console.error("GaussianBlurNode requires a TextureNode."),U();const s=e.uvNode||Pn(),i=l=>e.cache().context({getUV:()=>l,forceUVContext:!0}),r=R(()=>{const l=3+2*this.sigma,u=this._getCoefficients(l),c=this._invSize,h=j(this.directionNode).mul(this._passDirection),d=v(u[0]).toVar(),p=U(i(s).mul(d)).toVar();for(let f=1;f<l;f++){const y=v(f),M=v(u[f]),m=j(h.mul(c.mul(y))).toVar(),g=U(i(s.add(m))),x=U(i(s.sub(m)));p.addAssign(g.add(x).mul(M)),d.addAssign(K(2,M))}return p.div(d)}),o=this._material||(this._material=t.createNodeMaterial());o.fragmentNode=r();const a=t.getNodeProperties(this);return a.textureNode=e,this._textureNode}_getCoefficients(t){const e=[];for(let s=0;s<t;s++)e.push(.39894*Math.exp(-.5*s*s/(t*t))/t);return e}}const E3=(n,t)=>D(new z3(D(n),t));_("gaussianBlur",E3);const zc=new Q,Fm=new yu;class R3 extends ct{constructor(t,e=.96){super(t),this.textureNode=t,this.textureNodeOld=Oe(),this.damp=tt(e),this._compRT=new di,this._compRT.texture.name="AfterImageNode.comp",this._oldRT=new di,this._oldRT.texture.name="AfterImageNode.old",this._textureNode=hp(this,this._compRT.texture),this.updateBeforeType=ft.RENDER}getTextureNode(){return this._textureNode}setSize(t,e){this._compRT.setSize(t,e),this._oldRT.setSize(t,e)}updateBefore(t){const{renderer:e}=t,s=this.textureNode,r=s.value.type;this._compRT.texture.type=r,this._oldRT.texture.type=r,e.getDrawingBufferSize(zc),this.setSize(zc.x,zc.y);const o=e.toneMapping,a=e.toneMappingNode,l=e.getRenderTarget(),u=s.value;this.textureNodeOld.value=this._oldRT.texture,e.toneMapping=Io,e.toneMappingNode=null,e.setRenderTarget(this._compRT),Fm.render(e);const c=this._oldRT;this._oldRT=this._compRT,this._compRT=c,e.toneMapping=o,e.toneMappingNode=a,e.setRenderTarget(l),s.value=u}setup(t){const e=this.textureNode,s=this.textureNodeOld;if(e.isTextureNode!==!0)return console.error("AfterImageNode requires a TextureNode."),U();const i=e.uvNode||Pn();s.uvNode=i;const r=c=>e.cache().context({getUV:()=>c,forceUVContext:!0}),o=R(([c,h])=>{const d=v(h).toVar(),p=U(c).toVar();return Jt(op(p.sub(d)),0)}),a=R(()=>{const c=U(s),h=U(r(i));return c.mulAssign(this.damp.mul(o(c,.1))),Jt(h,c)}),l=this._materialComposed||(this._materialComposed=t.createNodeMaterial());l.fragmentNode=a(),Fm.material=l;const u=t.getNodeProperties(this);return u.textureNode=e,this._textureNode}}const k3=(n,t)=>D(new R3(D(n),t));_("afterImage",k3);const Pm=new yu;class V3 extends ct{constructor(t,e,s,i){super("vec4"),this.textureNode=t,this.tresholdNode=e,this.scaleNode=s,this.colorNode=w(.1,0,1),this.samples=i,this.resolution=new Q(1,1),this._renderTarget=new di,this._renderTarget.texture.name="anamorphic",this._invSize=tt(new Q),this._textureNode=hp(this,this._renderTarget.texture),this.updateBeforeType=ft.RENDER}getTextureNode(){return this._textureNode}setSize(t,e){this._invSize.value.set(1/t,1/e),t=Math.max(Math.round(t*this.resolution.x),1),e=Math.max(Math.round(e*this.resolution.y),1),this._renderTarget.setSize(t,e)}updateBefore(t){const{renderer:e}=t,s=this.textureNode,i=s.value;this._renderTarget.texture.type=i.type;const r=e.getRenderTarget(),o=s.value;Pm.material=this._material,this.setSize(i.image.width,i.image.height),e.setRenderTarget(this._renderTarget),Pm.render(e),e.setRenderTarget(r),s.value=o}setup(t){const e=this.textureNode;if(e.isTextureNode!==!0)return console.error("AnamorphNode requires a TextureNode."),U();const s=e.uvNode||Pn(),i=l=>e.cache().context({getUV:()=>l,forceUVContext:!0}),r=R(()=>{const l=this.samples,u=Math.floor(l/2),c=w(0).toVar();return ut({start:-u,end:u},({i:h})=>{const d=v(h).abs().div(u).oneMinus(),p=j(s.x.add(this._invSize.x.mul(h).mul(this.scaleNode)),s.y),f=i(p),y=dx(f,this.tresholdNode).mul(d);c.addAssign(y)}),c.mul(this.colorNode)}),o=this._material||(this._material=t.createNodeMaterial());o.fragmentNode=r();const a=t.getNodeProperties(this);return a.textureNode=e,this._textureNode}}const L3=(n,t=.9,e=3,s=32)=>D(new V3(D(n),D(t),D(e),s));_("anamorphic",L3);class yx extends ct{constructor(t=null,e={}){super(),this.functionNode=t,this.parameters=e}setParameters(t){return this.parameters=t,this}getParameters(){return this.parameters}getNodeType(t){return this.functionNode.getNodeType(t)}generate(t){const e=[],s=this.functionNode,i=s.getInputs(t),r=this.parameters;if(Array.isArray(r))for(let a=0;a<r.length;a++){const l=i[a],u=r[a];e.push(u.build(t,l.type))}else for(const a of i){const l=r[a.name];if(l!==void 0)e.push(l.build(t,a.type));else throw new Error(`FunctionCallNode: Input '${a.name}' not found in FunctionNode.`)}return`${s.build(t,"property")}( ${e.join(", ")} )`}}const I3=(n,...t)=>(t=t.length>1||t[0]&&t[0].isNode===!0?lr(t):uu(t[0]),D(new yx(D(n),t)));_("call",I3);I("FunctionCallNode",yx);class xx extends ${constructor(t=null){super(),this._value=t,this._cache=null,this.inputType=null,this.outpuType=null,this.events=new xi,this.isScriptableValueNode=!0}get isScriptableOutputNode(){return this.outputType!==null}set value(t){this._value!==t&&(this._cache&&this.inputType==="URL"&&this.value.value instanceof ArrayBuffer&&(URL.revokeObjectURL(this._cache),this._cache=null),this._value=t,this.events.dispatchEvent({type:"change"}),this.refresh())}get value(){return this._value}refresh(){this.events.dispatchEvent({type:"refresh"})}getValue(){const t=this.value;if(t&&this._cache===null&&this.inputType==="URL"&&t.value instanceof ArrayBuffer)this._cache=URL.createObjectURL(new Blob([t.value]));else if(t&&t.value!==null&&t.value!==void 0&&((this.inputType==="URL"||this.inputType==="String")&&typeof t.value=="string"||this.inputType==="Number"&&typeof t.value=="number"||this.inputType==="Vector2"&&t.value.isVector2||this.inputType==="Vector3"&&t.value.isVector3||this.inputType==="Vector4"&&t.value.isVector4||this.inputType==="Color"&&t.value.isColor||this.inputType==="Matrix3"&&t.value.isMatrix3||this.inputType==="Matrix4"&&t.value.isMatrix4))return t.value;return this._cache||t}getNodeType(t){return this.value&&this.value.isNode?this.value.getNodeType(t):"float"}setup(){return this.value&&this.value.isNode?this.value:v()}serialize(t){super.serialize(t),this.value!==null?this.inputType==="ArrayBuffer"?t.value=_y(this.value):t.value=this.value?this.value.toJSON(t.meta).uuid:null:t.value=null,t.inputType=this.inputType,t.outputType=this.outputType}deserialize(t){super.deserialize(t);let e=null;t.value!==null&&(t.inputType==="ArrayBuffer"?e=Cy(t.value):t.inputType==="Texture"?e=t.meta.textures[t.value]:e=t.meta.nodes[t.value]||null),this.value=e,this.inputType=t.inputType,this.outputType=t.outputType}}const nl=C(xx);_("scriptableValue",nl);I("ScriptableValueNode",xx);class vx extends Map{get(t,e=null,...s){if(this.has(t))return super.get(t);if(e!==null){const i=e(...s);return this.set(t,i),i}}}class F3{constructor(t){this.scriptableNode=t}get parameters(){return this.scriptableNode.parameters}get layout(){return this.scriptableNode.getLayout()}getInputLayout(t){return this.scriptableNode.getInputLayout(t)}get(t){const e=this.parameters[t];return e?e.getValue():null}}const Ec=new vx;class Nx extends ${constructor(t=null,e={}){super(),this.codeNode=t,this.parameters=e,this._local=new vx,this._output=nl(),this._outputs={},this._source=this.source,this._method=null,this._object=null,this._value=null,this._needsOutputUpdate=!0,this.onRefresh=this.onRefresh.bind(this),this.isScriptableNode=!0}get source(){return this.codeNode?this.codeNode.code:""}setLocal(t,e){return this._local.set(t,e)}getLocal(t){return this._local.get(t)}onRefresh(){this._refresh()}getInputLayout(t){for(const e of this.getLayout())if(e.inputType&&(e.id===t||e.name===t))return e}getOutputLayout(t){for(const e of this.getLayout())if(e.outputType&&(e.id===t||e.name===t))return e}setOutput(t,e){const s=this._outputs;return s[t]===void 0?s[t]=nl(e):s[t].value=e,this}getOutput(t){return this._outputs[t]}getParameter(t){return this.parameters[t]}setParameter(t,e){const s=this.parameters;return e&&e.isScriptableNode?(this.deleteParameter(t),s[t]=e,s[t].getDefaultOutput().events.addEventListener("refresh",this.onRefresh)):e&&e.isScriptableValueNode?(this.deleteParameter(t),s[t]=e,s[t].events.addEventListener("refresh",this.onRefresh)):s[t]===void 0?(s[t]=nl(e),s[t].events.addEventListener("refresh",this.onRefresh)):s[t].value=e,this}getValue(){return this.getDefaultOutput().getValue()}deleteParameter(t){let e=this.parameters[t];return e&&(e.isScriptableNode&&(e=e.getDefaultOutput()),e.events.removeEventListener("refresh",this.onRefresh)),this}clearParameters(){for(const t of Object.keys(this.parameters))this.deleteParameter(t);return this.needsUpdate=!0,this}call(t,...e){const i=this.getObject()[t];if(typeof i=="function")return i(...e)}async callAsync(t,...e){const i=this.getObject()[t];if(typeof i=="function")return i.constructor.name==="AsyncFunction"?await i(...e):i(...e)}getNodeType(t){return this.getDefaultOutputNode().getNodeType(t)}refresh(t=null){t!==null?this.getOutput(t).refresh():this._refresh()}getObject(){if(this.needsUpdate&&this.dispose(),this._object!==null)return this._object;const t=()=>this.refresh(),e=(u,c)=>this.setOutput(u,c),s=new F3(this),i=Ec.get("THREE"),r=Ec.get("TSL"),o=this.getMethod(this.codeNode),a=[s,this._local,Ec,t,e,i,r];this._object=o(...a);const l=this._object.layout;if(l&&(l.cache===!1&&this._local.clear(),this._output.outputType=l.outputType||null,Array.isArray(l.elements)))for(const u of l.elements){const c=u.id||u.name;u.inputType&&(this.getParameter(c)===void 0&&this.setParameter(c,null),this.getParameter(c).inputType=u.inputType),u.outputType&&(this.getOutput(c)===void 0&&this.setOutput(c,null),this.getOutput(c).outputType=u.outputType)}return this._object}deserialize(t){super.deserialize(t);for(const e in this.parameters){let s=this.parameters[e];s.isScriptableNode&&(s=s.getDefaultOutput()),s.events.addEventListener("refresh",this.onRefresh)}}getLayout(){return this.getObject().layout}getDefaultOutputNode(){const t=this.getDefaultOutput().value;return t&&t.isNode?t:v()}getDefaultOutput(){return this._exec()._output}getMethod(){if(this.needsUpdate&&this.dispose(),this._method!==null)return this._method;const t=["parameters","local","global","refresh","setOutput","THREE","TSL"],s=["layout","init","main","dispose"].join(", "),i="var "+s+`; var output = {};
`,r=`
return { ...output, `+s+" };",o=i+this.codeNode.code+r;return this._method=new Function(...t,o),this._method}dispose(){this._method!==null&&(this._object&&typeof this._object.dispose=="function"&&this._object.dispose(),this._method=null,this._object=null,this._source=null,this._value=null,this._needsOutputUpdate=!0,this._output.value=null,this._outputs={})}setup(){return this.getDefaultOutputNode()}set needsUpdate(t){t===!0&&this.dispose()}get needsUpdate(){return this.source!==this._source}_exec(){return this.codeNode===null?this:(this._needsOutputUpdate===!0&&(this._value=this.call("main"),this._needsOutputUpdate=!1),this._output.value=this._value,this)}_refresh(){this.needsUpdate=!0,this._exec(),this._output.refresh()}}const P3=C(Nx);_("scriptable",P3);I("ScriptableNode",Nx);class xu extends ${constructor(t,e){super("float"),this.isFogNode=!0,this.colorNode=t,this.factorNode=e}getViewZNode(t){let e;const s=t.context.getViewZ;return s!==void 0&&(e=s(this)),(e||Ie.z).negate()}setup(){return this.factorNode}}const O3=C(xu);_("fog",O3);I("FogNode",xu);class wx extends xu{constructor(t,e,s){super(t),this.isFogRangeNode=!0,this.nearNode=e,this.farNode=s}setup(t){const e=this.getViewZNode(t);return Vn(this.nearNode,this.farNode,e)}}const D3=C(wx);_("rangeFog",D3);I("FogRangeNode",wx);class Mx extends xu{constructor(t,e){super(t),this.isFogExp2Node=!0,this.densityNode=e}setup(t){const e=this.getViewZNode(t),s=this.densityNode;return s.mul(s,e,e).negate().exp().oneMinus()}}const b3=C(Mx);_("densityFog",b3);I("FogExp2Node",Mx);let Xs=null,Ys=null;class Sx extends ${constructor(t=v(),e=v()){super(),this.minNode=t,this.maxNode=e}getVectorLength(t){const e=t.getTypeLength(Ns(this.minNode.value)),s=t.getTypeLength(Ns(this.maxNode.value));return e>s?e:s}getNodeType(t){return t.object.isInstancedMesh===!0?t.getTypeFromLength(this.getVectorLength(t)):"float"}setup(t){const e=t.object;let s=null;if(e.isInstancedMesh===!0){const i=this.minNode.value,r=this.maxNode.value,o=t.getTypeLength(Ns(i)),a=t.getTypeLength(Ns(r));Xs=Xs||new bt,Ys=Ys||new bt,Xs.setScalar(0),Ys.setScalar(0),o===1?Xs.setScalar(i):i.isColor?Xs.set(i.r,i.g,i.b):Xs.set(i.x,i.y,i.z||0,i.w||0),a===1?Ys.setScalar(r):r.isColor?Ys.set(r.r,r.g,r.b):Ys.set(r.x,r.y,r.z||0,r.w||0);const l=4,u=l*e.count,c=new Float32Array(u);for(let d=0;d<u;d++){const p=d%l,f=Xs.getComponent(p),y=Ys.getComponent(p);c[d]=ly.lerp(f,y,Math.random())}const h=this.getNodeType(t);s=ap(c,"vec4",e.count).element(Oy).convert(h)}else s=v(0);return s}}C(Sx);I("RangeNode",Sx);class Tx extends ${constructor(t,e,s=[64]){super("void"),this.isComputeNode=!0,this.computeNode=t,this.count=e,this.workgroupSize=s,this.dispatchCount=0,this.version=1,this.updateBeforeType=ft.OBJECT,this.updateDispatchCount()}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(t){t===!0&&this.version++}updateDispatchCount(){const{count:t,workgroupSize:e}=this;let s=e[0];for(let i=1;i<e.length;i++)s*=e[i];this.dispatchCount=Math.ceil(t/s)}onInit(){}updateBefore({renderer:t}){t.compute(this)}generate(t){const{shaderStage:e}=t;if(e==="compute"){const s=this.computeNode.build(t,"void");s!==""&&t.addLineFlowCode(s)}}}const B3=(n,t,e)=>D(new Tx(D(n),t,e));_("compute",B3);I("ComputeNode",Tx);class mi extends ${constructor(t=mi.TARGET_DIRECTION,e=null){super(),this.scope=t,this.light=e}setup(){const{scope:t,light:e}=this;let s=null;return t===mi.TARGET_DIRECTION&&(s=Lr.transformDirection(Oh(e).sub(Oh(e.target)))),s}serialize(t){super.serialize(t),t.scope=this.scope}deserialize(t){super.deserialize(t),this.scope=t.scope}}mi.TARGET_DIRECTION="targetDirection";const _x=C(mi,mi.TARGET_DIRECTION);I("LightNode",mi);const Cx=R(n=>{const{lightDistance:t,cutoffDistance:e,decayExponent:s}=n,i=t.pow(s).max(.01).reciprocal();return e.greaterThan(0).cond(i.mul(t.div(e).pow4().oneMinus().clamp().pow2()),i)});class Ax extends Mi{constructor(t=null){super(t),this.cutoffDistanceNode=tt(0),this.decayExponentNode=tt(0)}update(t){const{light:e}=this;super.update(t),this.cutoffDistanceNode.value=e.distance,this.decayExponentNode.value=e.decay}setup(t){const{colorNode:e,cutoffDistanceNode:s,decayExponentNode:i,light:r}=this,o=t.context.lightingModel,a=c1(r).sub(Ie),l=a.normalize(),u=a.length(),c=Cx({lightDistance:u,cutoffDistance:s,decayExponent:i}),h=e.mul(c),d=t.context.reflectedLight;o.direct({lightDirection:l,lightColor:h,reflectedLight:d,shadowMask:this.shadowMaskNode},t.stack,t)}}I("PointLightNode",Ax);Ir(fM,Ax);class zx extends Mi{constructor(t=null){super(t)}setup(t){super.setup(t);const e=t.context.lightingModel,s=this.colorNode,i=_x(this.light),r=t.context.reflectedLight;e.direct({lightDirection:i,lightColor:s,reflectedLight:r,shadowMask:this.shadowMaskNode},t.stack,t)}}I("DirectionalLightNode",zx);Ir(gM,zx);class dp extends Mi{constructor(t=null){super(t),this.coneCosNode=tt(0),this.penumbraCosNode=tt(0),this.cutoffDistanceNode=tt(0),this.decayExponentNode=tt(0)}update(t){super.update(t);const{light:e}=this;this.coneCosNode.value=Math.cos(e.angle),this.penumbraCosNode.value=Math.cos(e.angle*(1-e.penumbra)),this.cutoffDistanceNode.value=e.distance,this.decayExponentNode.value=e.decay}getSpotAttenuation(t){const{coneCosNode:e,penumbraCosNode:s}=this;return Vn(e,s,t)}setup(t){super.setup(t);const e=t.context.lightingModel,{colorNode:s,cutoffDistanceNode:i,decayExponentNode:r,light:o}=this,a=c1(o).sub(Ie),l=a.normalize(),u=l.dot(_x(o)),c=this.getSpotAttenuation(u),h=a.length(),d=Cx({lightDistance:h,cutoffDistance:i,decayExponent:r}),p=s.mul(c).mul(d),f=t.context.reflectedLight;e.direct({lightDirection:l,lightColor:p,reflectedLight:f,shadowMask:this.shadowMaskNode},t.stack,t)}}I("SpotLightNode",dp);Ir(My,dp);class U3 extends My{constructor(t,e,s,i,r,o){super(t,e,s,i,r,o),this.iesMap=null}copy(t,e){return super.copy(t,e),this.iesMap=t.iesMap,this}}class Ex extends dp{getSpotAttenuation(t){const e=this.light.iesMap;let s=null;if(e&&e.isTexture===!0){const i=t.acos().mul(1/Math.PI);s=Oe(e,j(i,0),0).r}else s=super.getSpotAttenuation(t);return s}}I("IESSpotLightNode",Ex);Ir(U3,Ex);class Rx extends Mi{constructor(t=null){super(t)}setup({context:t}){t.irradiance.addAssign(this.colorNode)}}I("AmbientLightNode",Rx);Ir(yM,Rx);class kx extends Mi{constructor(t=null){super(t),this.lightPositionNode=Oh(t),this.lightDirectionNode=this.lightPositionNode.normalize(),this.groundColorNode=tt(new mt)}update(t){const{light:e}=this;super.update(t),this.lightPositionNode.object3d=e,this.groundColorNode.value.copy(e.groundColor).multiplyScalar(e.intensity)}setup(t){const{colorNode:e,groundColorNode:s,lightDirectionNode:i}=this,o=Ps.dot(i).mul(.5).add(.5),a=jt(s,e,o);t.context.irradiance.addAssign(a)}}I("HemisphereLightNode",kx);Ir(hM,kx);const j3=R(n=>{const t=n.uv.mul(2),e=t.x.floor(),s=t.y.floor();return e.add(s).mod(2).sign()});class Vx extends ct{constructor(t=Pn()){super("float"),this.uvNode=t}setup(){return j3({uv:this.uvNode})}}const W3=C(Vx);_("checker",W3);I("CheckerNode",Vx);const H3=new xy;class $3 extends pe{constructor(t={}){super(),this.normals=!1,this.lights=!1,this.useAlphaToCoverage=!0,this.useColor=t.vertexColors,this.pointWidth=1,this.pointColorNode=null,this.setDefaultValues(H3),this.setupShaders(),this.setValues(t)}setupShaders(){const t=this.alphaToCoverage,e=this.useColor;this.vertexNode=R(()=>{Ot(j(),"vUv").assign(Pn());const s=Qt("instancePosition"),i=St("vec4","mvPos");i.assign(fi.mul(U(s,1)));const r=pr.z.div(pr.w),o=Tn.mul(i),a=St("vec2","offset");return a.assign(me.xy),a.assign(a.mul(BT)),a.assign(a.div(pr.z)),a.y.assign(a.y.mul(r)),a.assign(a.mul(o.w)),o.assign(o.add(U(a,0,0))),o})(),this.fragmentNode=R(()=>{const s=Ot(j(),"vUv"),i=St("float","alpha");i.assign(1);const r=s.x,o=s.y,a=r.mul(r).add(o.mul(o));if(t){const u=St("float","dlen");u.assign(a.fwidth()),i.assign(Vn(u.oneMinus(),u.add(1),a).oneMinus())}else a.greaterThan(1).discard();let l;return this.pointColorNode?l=this.pointColorNode:e?l=Qt("instanceColor").mul(bo):l=bo,U(l,i)})(),this.needsUpdate=!0}get alphaToCoverage(){return this.useAlphaToCoverage}set alphaToCoverage(t){this.useAlphaToCoverage!==t&&(this.useAlphaToCoverage=t,this.setupShaders())}}Yt("InstancedPointsNodeMaterial",$3);const G3=new yy;class q3 extends pe{constructor(t){super(),this.isLineBasicNodeMaterial=!0,this.lights=!1,this.normals=!1,this.setDefaultValues(G3),this.setValues(t)}}Yt("LineBasicNodeMaterial",q3);const X3=new wy;class Y3 extends pe{constructor(t){super(),this.isLineDashedNodeMaterial=!0,this.lights=!1,this.normals=!1,this.setDefaultValues(X3),this.offsetNode=null,this.dashScaleNode=null,this.dashSizeNode=null,this.gapSizeNode=null,this.setValues(t)}setupVariants(){const t=this.offsetNode,e=this.dashScaleNode?v(this.dashScaleNode):Dh,s=this.dashSizeNode?v(this.dashSizeNode):f1,i=this.dashSizeNode?v(this.dashGapNode):m1;hr.assign(s),Il.assign(i);const r=Ot(Qt("lineDistance").mul(e));(t?r.add(t):r).mod(hr.add(Il)).greaterThan(hr).discard()}}Yt("LineDashedNodeMaterial",Y3);const Z3=new wy;class Q3 extends pe{constructor(t={}){super(),this.normals=!1,this.lights=!1,this.setDefaultValues(Z3),this.useAlphaToCoverage=!0,this.useColor=t.vertexColors,this.useDash=t.dashed,this.useWorldUnits=!1,this.dashOffset=0,this.lineWidth=1,this.lineColorNode=null,this.offsetNode=null,this.dashScaleNode=null,this.dashSizeNode=null,this.gapSizeNode=null,this.setValues(t)}setup(t){this.setupShaders(),super.setup(t)}setupShaders(){const t=this.alphaToCoverage,e=this.useColor,s=this.dashed,i=this.worldUnits,r=R(({start:a,end:l})=>{const u=Tn.element(2).element(2),d=Tn.element(3).element(2).mul(-.5).div(u).sub(a.z).div(l.z.sub(a.z));return U(jt(a.xyz,l.xyz,d),l.w)});this.vertexNode=R(()=>{Sn("vec2","vUv").assign(Pn());const a=Qt("instanceStart"),l=Qt("instanceEnd"),u=St("vec4","start"),c=St("vec4","end");u.assign(fi.mul(U(a,1))),c.assign(fi.mul(U(l,1))),i&&(Sn("vec3","worldStart").assign(u.xyz),Sn("vec3","worldEnd").assign(c.xyz));const h=pr.z.div(pr.w),d=Tn.element(2).element(3).equal(-1);Z(d,()=>{Z(u.z.lessThan(0).and(c.z.greaterThan(0)),()=>{c.assign(r({start:u,end:c}))}).elseif(c.z.lessThan(0).and(u.z.greaterThanEqual(0)),()=>{u.assign(r({start:c,end:u}))})});const p=Tn.mul(u),f=Tn.mul(c),y=p.xyz.div(p.w),M=f.xyz.div(f.w),m=M.xy.sub(y.xy).temp();m.x.assign(m.x.mul(h)),m.assign(m.normalize());const g=Rl(U());if(i){const x=c.xyz.sub(u.xyz).normalize(),S=jt(u.xyz,c.xyz,.5).normalize(),E=x.cross(S).normalize(),L=x.cross(E),A=Sn("vec4","worldPos");A.assign(me.y.lessThan(.5).cond(u,c));const V=gc.mul(.5);A.addAssign(U(me.x.lessThan(0).cond(E.mul(V),E.mul(V).negate()),0)),s||(A.addAssign(U(me.y.lessThan(.5).cond(x.mul(V).negate(),x.mul(V)),0)),A.addAssign(U(L.mul(V),0)),Z(me.y.greaterThan(1).or(me.y.lessThan(0)),()=>{A.subAssign(U(L.mul(2).mul(V),0))})),g.assign(Tn.mul(A));const W=Rl(w());W.assign(me.y.lessThan(.5).cond(y,M)),g.z.assign(W.z.mul(g.w))}else{const x=St("vec2","offset");x.assign(j(m.y,m.x.negate())),m.x.assign(m.x.div(h)),x.x.assign(x.x.div(h)),x.assign(me.x.lessThan(0).cond(x.negate(),x)),Z(me.y.lessThan(0),()=>{x.assign(x.sub(m))}).elseif(me.y.greaterThan(1),()=>{x.assign(x.add(m))}),x.assign(x.mul(gc)),x.assign(x.div(pr.w)),g.assign(me.y.lessThan(.5).cond(p,f)),x.assign(x.mul(g.w)),g.assign(g.add(U(x,0,0)))}return g})();const o=R(({p1:a,p2:l,p3:u,p4:c})=>{const h=a.sub(u),d=c.sub(u),p=l.sub(a),f=h.dot(d),y=d.dot(p),M=h.dot(p),m=d.dot(d),x=p.dot(p).mul(m).sub(y.mul(y)),E=f.mul(y).sub(M.mul(m)).div(x).clamp(),L=f.add(y.mul(E)).div(m).clamp();return j(E,L)});this.fragmentNode=R(()=>{const a=Sn("vec2","vUv");if(s){const c=this.offsetNode?v(this.offsetNodeNode):ym,h=this.dashScaleNode?v(this.dashScaleNode):Dh,d=this.dashSizeNode?v(this.dashSizeNode):f1,p=this.dashSizeNode?v(this.dashGapNode):m1;hr.assign(d),Il.assign(p);const f=Qt("instanceDistanceStart"),y=Qt("instanceDistanceEnd"),M=me.y.lessThan(.5).cond(h.mul(f),Dh.mul(y)),m=Ot(M.add(ym)),g=c?m.add(c):m;a.y.lessThan(-1).or(a.y.greaterThan(1)).discard(),g.mod(hr.add(Il)).greaterThan(hr).discard()}const l=St("float","alpha");if(l.assign(1),i){const c=Sn("vec3","worldStart"),h=Sn("vec3","worldEnd"),d=Sn("vec4","worldPos").xyz.normalize().mul(1e5),p=h.sub(c),f=o({p1:c,p2:h,p3:w(0,0,0),p4:d}),y=c.add(p.mul(f.x)),M=d.mul(f.y),x=y.sub(M).length().div(gc);if(!s)if(t){const S=x.fwidth();l.assign(Vn(S.negate().add(.5),S.add(.5),x).oneMinus())}else x.greaterThan(.5).discard()}else if(t){const c=a.x,h=a.y.greaterThan(0).cond(a.y.sub(1),a.y.add(1)),d=c.mul(c).add(h.mul(h)),p=St("float","dlen");p.assign(d.fwidth()),Z(a.y.abs().greaterThan(1),()=>{l.assign(Vn(p.oneMinus(),p.add(1),d).oneMinus())})}else Z(a.y.abs().greaterThan(1),()=>{const c=a.x,h=a.y.greaterThan(0).cond(a.y.sub(1),a.y.add(1));c.mul(c).add(h.mul(h)).greaterThan(1).discard()});let u;if(this.lineColorNode)u=this.lineColorNode;else if(e){const c=Qt("instanceColorStart"),h=Qt("instanceColorEnd");u=me.y.lessThan(.5).cond(c,h).mul(bo)}else u=bo;return U(u,l)})()}get worldUnits(){return this.useWorldUnits}set worldUnits(t){this.useWorldUnits!==t&&(this.useWorldUnits=t,this.needsUpdate=!0)}get dashed(){return this.useDash}set dashed(t){this.useDash!==t&&(this.useDash=t,this.needsUpdate=!0)}get alphaToCoverage(){return this.useAlphaToCoverage}set alphaToCoverage(t){this.useAlphaToCoverage!==t&&(this.useAlphaToCoverage=t,this.needsUpdate=!0)}}Yt("Line2NodeMaterial",Q3);const J3=new lM;class K3 extends pe{constructor(t){super(),this.isMeshNormalNodeMaterial=!0,this.setDefaultValues(J3),this.setValues(t)}setupDiffuseColor(){const t=this.opacityNode?v(this.opacityNode):p1;dt.assign(U(Z1(kt),t))}}Yt("MeshNormalNodeMaterial",K3);const tC=new dy;class eC extends pe{constructor(t){super(),this.isMeshBasicNodeMaterial=!0,this.lights=!1,this.setDefaultValues(tC),this.setValues(t)}}Yt("MeshBasicNodeMaterial",eC);const Uo=R(({f0:n,f90:t,dotVH:e})=>{const s=e.mul(-5.55473).sub(6.98316).mul(e).exp2();return n.mul(s.oneMinus()).add(t.mul(s))}),Tr=R(n=>n.diffuseColor.mul(1/Math.PI)),nC=()=>v(.25),sC=R(({dotNH:n})=>Lh.mul(v(.5)).add(1).mul(v(1/Math.PI)).mul(n.pow(Lh))),iC=R(({lightDirection:n})=>{const t=n.add(Tt).normalize(),e=kt.dot(t).clamp(),s=Tt.dot(t).clamp(),i=Uo({f0:ln,f90:1,dotVH:s}),r=nC(),o=sC({dotNH:e});return i.mul(r).mul(o)});class Lx extends cu{constructor(t=!0){super(),this.specular=t}direct({lightDirection:t,lightColor:e,reflectedLight:s}){const r=kt.dot(t).clamp().mul(e);s.directDiffuse.addAssign(r.mul(Tr({diffuseColor:dt.rgb}))),this.specular===!0&&s.directSpecular.addAssign(r.mul(iC({lightDirection:t})).mul(wT))}indirectDiffuse({irradiance:t,reflectedLight:e}){e.indirectDiffuse.addAssign(t.mul(Tr({diffuseColor:dt})))}}const rC=new uM;class oC extends pe{constructor(t){super(),this.isMeshLambertNodeMaterial=!0,this.lights=!0,this.setDefaultValues(rC),this.setValues(t)}setupLightingModel(){return new Lx(!1)}}Yt("MeshLambertNodeMaterial",oC);const aC=new oM;class lC extends pe{constructor(t){super(),this.isMeshPhongNodeMaterial=!0,this.lights=!0,this.shininessNode=null,this.specularNode=null,this.setDefaultValues(aC),this.setValues(t)}setupLightingModel(){return new Lx}setupVariants(){const t=(this.shininessNode?v(this.shininessNode):yT).max(1e-4);Lh.assign(t);const e=this.specularNode||vT;ln.assign(e)}copy(t){return this.shininessNode=t.shininessNode,this.specularNode=t.specularNode,super.copy(t)}}Yt("MeshPhongNodeMaterial",lC);const uC=R(()=>{const n=Fl.dFdx().abs().max(Fl.dFdy().abs());return n.x.max(n.y).max(n.z)}),Ix=R(n=>{const{roughness:t}=n,e=uC();let s=t.max(.0525);return s=s.add(e),s=s.min(1),s}),cC=R(({alpha:n,dotNL:t,dotNV:e})=>{const s=n.pow2(),i=t.mul(s.add(s.oneMinus().mul(e.pow2())).sqrt()),r=e.mul(s.add(s.oneMinus().mul(t.pow2())).sqrt());return Fs(.5,i.add(r).max(Xy))}).setLayout({name:"V_GGX_SmithCorrelated",type:"float",inputs:[{name:"alpha",type:"float"},{name:"dotNL",type:"float"},{name:"dotNV",type:"float"}]}),hC=R(({alphaT:n,alphaB:t,dotTV:e,dotBV:s,dotTL:i,dotBL:r,dotNV:o,dotNL:a})=>{const l=a.mul(w(n.mul(e),t.mul(s),o).length()),u=o.mul(w(n.mul(i),t.mul(r),a).length());return Fs(.5,l.add(u)).saturate()}).setLayout({name:"V_GGX_SmithCorrelated_Anisotropic",type:"float",inputs:[{name:"alphaT",type:"float",qualifier:"in"},{name:"alphaB",type:"float",qualifier:"in"},{name:"dotTV",type:"float",qualifier:"in"},{name:"dotBV",type:"float",qualifier:"in"},{name:"dotTL",type:"float",qualifier:"in"},{name:"dotBL",type:"float",qualifier:"in"},{name:"dotNV",type:"float",qualifier:"in"},{name:"dotNL",type:"float",qualifier:"in"}]}),dC=R(({alpha:n,dotNH:t})=>{const e=n.pow2(),s=t.pow2().mul(e.oneMinus()).oneMinus();return e.div(s.pow2()).mul(1/Math.PI)}).setLayout({name:"D_GGX",type:"float",inputs:[{name:"alpha",type:"float"},{name:"dotNH",type:"float"}]}),pC=v(1/Math.PI),fC=R(({alphaT:n,alphaB:t,dotNH:e,dotTH:s,dotBH:i})=>{const r=n.mul(t),o=w(t.mul(s),n.mul(i),r.mul(e)),a=o.dot(o),l=r.div(a);return pC.mul(r.mul(l.pow2()))}).setLayout({name:"D_GGX_Anisotropic",type:"float",inputs:[{name:"alphaT",type:"float",qualifier:"in"},{name:"alphaB",type:"float",qualifier:"in"},{name:"dotNH",type:"float",qualifier:"in"},{name:"dotTH",type:"float",qualifier:"in"},{name:"dotBH",type:"float",qualifier:"in"}]}),Om=R(n=>{const{lightDirection:t,f0:e,f90:s,roughness:i,f:r,USE_IRIDESCENCE:o,USE_ANISOTROPY:a}=n,l=n.normalView||kt,u=i.pow2(),c=t.add(Tt).normalize(),h=l.dot(t).clamp(),d=l.dot(Tt).clamp(),p=l.dot(c).clamp(),f=Tt.dot(c).clamp();let y=Uo({f0:e,f90:s,dotVH:f}),M,m;if(hm(o)&&(y=np.mix(y,r)),hm(a)){const g=tl.dot(t),x=tl.dot(Tt),S=tl.dot(c),E=cr.dot(t),L=cr.dot(Tt),A=cr.dot(c);M=hC({alphaT:Vh,alphaB:u,dotTV:x,dotBV:L,dotTL:g,dotBL:E,dotNV:d,dotNL:h}),m=fC({alphaT:Vh,alphaB:u,dotNH:p,dotTH:S,dotBH:A})}else M=cC({alpha:u,dotNL:h,dotNV:d}),m=dC({alpha:u,dotNH:p});return y.mul(M).mul(m)}),Fx=R(({roughness:n,dotNV:t})=>{const e=U(-1,-.0275,-.572,.022),s=U(1,.0425,1.04,-.04),i=n.mul(e).add(s),r=i.x.mul(i.x).min(t.mul(-9.28).exp2()).mul(i.x).add(i.y);return j(-1.04,1.04).mul(r).add(i.zw)}).setLayout({name:"DFGApprox",type:"vec2",inputs:[{name:"roughness",type:"float"},{name:"dotNV",type:"vec3"}]}),Px=R(n=>{const{dotNV:t,specularColor:e,specularF90:s,roughness:i}=n,r=Fx({dotNV:t,roughness:i});return e.mul(r.x).add(s.mul(r.y))}),mC=R(({f:n,f90:t,dotVH:e})=>{const s=e.oneMinus().saturate(),i=s.mul(s),r=s.mul(i,i).clamp(0,.9999);return n.sub(w(t).mul(r)).div(r.oneMinus())}).setLayout({name:"Schlick_to_F0",type:"vec3",inputs:[{name:"f",type:"vec3"},{name:"f90",type:"float"},{name:"dotVH",type:"float"}]}),gC=R(({roughness:n,dotNH:t})=>{const e=n.pow2(),s=v(1).div(e),r=t.pow2().oneMinus().max(.0078125);return v(2).add(s).mul(r.pow(s.mul(.5))).div(2*Math.PI)}).setLayout({name:"D_Charlie",type:"float",inputs:[{name:"roughness",type:"float"},{name:"dotNH",type:"float"}]}),yC=R(({dotNV:n,dotNL:t})=>v(1).div(v(4).mul(t.add(n).sub(t.mul(n))))).setLayout({name:"V_Neubelt",type:"float",inputs:[{name:"dotNV",type:"float"},{name:"dotNL",type:"float"}]}),xC=R(({lightDirection:n})=>{const t=n.add(Tt).normalize(),e=kt.dot(n).clamp(),s=kt.dot(Tt).clamp(),i=kt.dot(t).clamp(),r=gC({roughness:ep,dotNH:i}),o=yC({dotNV:s,dotNL:e});return Ji.mul(r).mul(o)}),Dm=R(([n,t,e,s,i])=>{const r=w(n1(t.negate(),Oo(n),Fs(1,s))),o=w(dr(i[0].xyz),dr(i[1].xyz),dr(i[2].xyz));return Oo(r).mul(e.mul(o))}).setLayout({name:"getVolumeTransmissionRay",type:"vec3",inputs:[{name:"n",type:"vec3"},{name:"v",type:"vec3"},{name:"thickness",type:"float"},{name:"ior",type:"float"},{name:"modelMatrix",type:"mat4"}]}),vC=R(([n,t])=>n.mul(Sr(t.mul(2).sub(2),0,1))).setLayout({name:"applyIorToRoughness",type:"float",inputs:[{name:"roughness",type:"float"},{name:"ior",type:"float"}]}),NC=I1(),bm=R(([n,t,e])=>{const s=NC.uv(n),i=hu(v(jh.x)).mul(vC(t,e));return s.bicubic(i)}),Bm=R(([n,t,e])=>(Z(e.notEqual(0),()=>{const s=Qy(t).negate().div(e);return Zy(s.negate().mul(n))}),w(1))).setLayout({name:"volumeAttenuation",type:"vec3",inputs:[{name:"transmissionDistance",type:"float"},{name:"attenuationColor",type:"vec3"},{name:"attenuationDistance",type:"float"}]}),wC=R(([n,t,e,s,i,r,o,a,l,u,c,h,d,p,f])=>{let y,M;if(f){y=U().toVar(),M=w().toVar();const E=c.sub(1).mul(f.mul(.025)),L=w(c.sub(E),c,c.add(E));ut({start:0,end:3},({i:A})=>{const V=L.element(A),W=Dm(n,t,h,V,a),H=o.add(W),et=u.mul(l.mul(U(H,1))),Et=j(et.xy.div(et.w)).toVar();Et.addAssign(1),Et.divAssign(2),Et.assign(j(Et.x,Et.y.oneMinus()));const gt=bm(Et,e,V);y.element(A).assign(gt.element(A)),y.a.addAssign(gt.a),M.element(A).assign(s.element(A).mul(Bm(dr(W),d,p).element(A)))}),y.a.divAssign(3)}else{const E=Dm(n,t,h,c,a),L=o.add(E),A=u.mul(l.mul(U(L,1))),V=j(A.xy.div(A.w)).toVar();V.addAssign(1),V.divAssign(2),V.assign(j(V.x,V.y.oneMinus())),y=bm(V,e,c),M=s.mul(Bm(dr(E),d,p))}const m=M.rgb.mul(y.rgb),g=n.dot(t).clamp(),x=w(Px({dotNV:g,specularColor:i,specularF90:r,roughness:e})),S=M.r.add(M.g,M.b).div(3);return U(x.oneMinus().mul(m),y.a.oneMinus().mul(S).oneMinus())}),MC=xn(3.2404542,-.969266,.0556434,-1.5371385,1.8760108,-.2040259,-.4985314,.041556,1.0572252),SC=n=>{const t=n.sqrt();return w(1).add(t).div(w(1).sub(t))},Um=(n,t)=>n.sub(t).div(n.add(t)).pow2(),TC=(n,t)=>{const e=n.mul(2*Math.PI*1e-9),s=w(54856e-17,44201e-17,52481e-17),i=w(1681e3,1795300,2208400),r=w(43278e5,93046e5,66121e5),o=v(9747e-17*Math.sqrt(2*Math.PI*45282e5)).mul(e.mul(2239900).add(t.x).cos()).mul(e.pow2().mul(-45282e5).exp());let a=s.mul(r.mul(2*Math.PI).sqrt()).mul(i.mul(e).add(t).cos()).mul(e.pow2().negate().mul(r).exp());return a=w(a.x.add(o),a.y,a.z).div(10685e-11),MC.mul(a)},_C=R(({outsideIOR:n,eta2:t,cosTheta1:e,thinFilmThickness:s,baseF0:i})=>{const r=jt(n,t,Vn(0,.03,s)),o=n.div(r).pow2().mul(v(1).sub(e.pow2())),l=v(1).sub(o).sqrt(),u=Um(r,n),c=Uo({f0:u,f90:1,dotVH:e}),h=c.oneMinus(),d=r.lessThan(n).cond(Math.PI,0),p=v(Math.PI).sub(d),f=SC(i.clamp(0,.9999)),y=Um(f,r.toVec3()),M=Uo({f0:y,f90:1,dotVH:l}),m=w(f.x.lessThan(r).cond(Math.PI,0),f.y.lessThan(r).cond(Math.PI,0),f.z.lessThan(r).cond(Math.PI,0)),g=r.mul(s,l,2),x=w(p).add(m),S=c.mul(M).clamp(1e-5,.9999),E=S.sqrt(),L=h.pow2().mul(M).div(w(1).sub(S));let V=c.add(L),W=L.sub(h);for(let H=1;H<=2;++H){W=W.mul(E);const et=TC(v(H).mul(g),v(H).mul(x)).mul(2);V=V.add(W.mul(et))}return V.max(w(0))}).setLayout({name:"evalIridescence",type:"vec3",inputs:[{name:"outsideIOR",type:"float"},{name:"eta2",type:"float"},{name:"cosTheta1",type:"float"},{name:"thinFilmThickness",type:"float"},{name:"baseF0",type:"vec3"}]}),CC=R(({normal:n,viewDir:t,roughness:e})=>{const s=n.dot(t).saturate(),i=e.pow2(),r=Fe(e.lessThan(.25),v(-339.2).mul(i).add(v(161.4).mul(e)).sub(25.9),v(-8.48).mul(i).add(v(14.3).mul(e)).sub(9.95)),o=Fe(e.lessThan(.25),v(44).mul(i).sub(v(23.7).mul(e)).add(3.26),v(1.97).mul(i).sub(v(3.27).mul(e)).add(.72));return Fe(e.lessThan(.25),0,v(.1).mul(e).sub(.025)).add(r.mul(s).add(o).exp()).mul(1/Math.PI).saturate()}),Rc=w(.04),kc=v(1);class pp extends cu{constructor(t=!1,e=!1,s=!1,i=!1,r=!1,o=!1){super(),this.clearcoat=t,this.sheen=e,this.iridescence=s,this.anisotropy=i,this.transmission=r,this.dispersion=o,this.clearcoatRadiance=null,this.clearcoatSpecularDirect=null,this.clearcoatSpecularIndirect=null,this.sheenSpecularDirect=null,this.sheenSpecularIndirect=null,this.iridescenceFresnel=null,this.iridescenceF0=null}start(t){if(this.clearcoat===!0&&(this.clearcoatRadiance=w().temp("clearcoatRadiance"),this.clearcoatSpecularDirect=w().temp("clearcoatSpecularDirect"),this.clearcoatSpecularIndirect=w().temp("clearcoatSpecularIndirect")),this.sheen===!0&&(this.sheenSpecularDirect=w().temp("sheenSpecularDirect"),this.sheenSpecularIndirect=w().temp("sheenSpecularIndirect")),this.iridescence===!0){const e=kt.dot(Tt).clamp();this.iridescenceFresnel=_C({outsideIOR:v(1),eta2:by,cosTheta1:e,thinFilmThickness:By,baseF0:ln}),this.iridescenceF0=mC({f:this.iridescenceFresnel,f90:1,dotVH:e})}if(this.transmission===!0){const e=bh,s=u1.sub(bh).normalize(),i=d1;t.backdrop=wC(i,s,ws,dt,ln,Ll,e,Do,Lr,Tn,el,Uy,Wy,jy,this.dispersion?Hy:null),t.backdropAlpha=Ih,dt.a.mulAssign(jt(1,t.backdrop.a,Ih))}}computeMultiscattering(t,e,s){const i=kt.dot(Tt).clamp(),r=Fx({roughness:ws,dotNV:i}),a=(this.iridescenceF0?np.mix(ln,this.iridescenceF0):ln).mul(r.x).add(s.mul(r.y)),u=r.x.add(r.y).oneMinus(),c=ln.add(ln.oneMinus().mul(.047619)),h=a.mul(c).div(u.mul(c).oneMinus());t.addAssign(a),e.addAssign(h.mul(u))}direct({lightDirection:t,lightColor:e,reflectedLight:s}){const r=kt.dot(t).clamp().mul(e);if(this.sheen===!0&&this.sheenSpecularDirect.addAssign(r.mul(xC({lightDirection:t}))),this.clearcoat===!0){const a=Ki.dot(t).clamp().mul(e);this.clearcoatSpecularDirect.addAssign(a.mul(Om({lightDirection:t,f0:Rc,f90:kc,roughness:Vl,normalView:Ki})))}s.directDiffuse.addAssign(r.mul(Tr({diffuseColor:dt.rgb}))),s.directSpecular.addAssign(r.mul(Om({lightDirection:t,f0:ln,f90:1,roughness:ws,iridescence:this.iridescence,f:this.iridescenceFresnel,USE_IRIDESCENCE:this.iridescence,USE_ANISOTROPY:this.anisotropy})))}indirectDiffuse({irradiance:t,reflectedLight:e}){e.indirectDiffuse.addAssign(t.mul(Tr({diffuseColor:dt})))}indirectSpecular({radiance:t,iblIrradiance:e,reflectedLight:s}){if(this.sheen===!0&&this.sheenSpecularIndirect.addAssign(e.mul(Ji,CC({normal:kt,viewDir:Tt,roughness:ep}))),this.clearcoat===!0){const u=Ki.dot(Tt).clamp(),c=Px({dotNV:u,specularColor:Rc,specularF90:kc,roughness:Vl});this.clearcoatSpecularIndirect.addAssign(this.clearcoatRadiance.mul(c))}const i=w().temp("singleScattering"),r=w().temp("multiScattering"),o=e.mul(1/Math.PI);this.computeMultiscattering(i,r,Ll);const a=i.add(r),l=dt.mul(a.r.max(a.g).max(a.b).oneMinus());s.indirectSpecular.addAssign(t.mul(i)),s.indirectSpecular.addAssign(r.mul(o)),s.indirectDiffuse.addAssign(l.mul(o))}ambientOcclusion({ambientOcclusion:t,reflectedLight:e}){const i=kt.dot(Tt).clamp().add(t),r=ws.mul(-16).oneMinus().negate().exp2(),o=t.sub(i.pow(r).oneMinus()).clamp();this.clearcoat===!0&&this.clearcoatSpecularIndirect.mulAssign(t),this.sheen===!0&&this.sheenSpecularIndirect.mulAssign(t),e.indirectDiffuse.mulAssign(t),e.indirectSpecular.mulAssign(o)}finish(t){const{outgoingLight:e}=t;if(this.clearcoat===!0){const s=Ki.dot(Tt).clamp(),i=Uo({dotVH:s,f0:Rc,f90:kc}),r=e.mul(kh.mul(i).oneMinus()).add(this.clearcoatSpecularDirect.add(this.clearcoatSpecularIndirect).mul(kh));e.assign(r)}if(this.sheen===!0){const s=Ji.r.max(Ji.g).max(Ji.b).mul(.157).oneMinus(),i=e.mul(s).add(this.sheenSpecularDirect,this.sheenSpecularIndirect);e.assign(i)}}}const AC=new Ny;class Ox extends pe{constructor(t){super(),this.isMeshStandardNodeMaterial=!0,this.emissiveNode=null,this.metalnessNode=null,this.roughnessNode=null,this.setDefaultValues(AC),this.setValues(t)}setupLightingModel(){return new pp}setupSpecular(){const t=jt(w(.04),dt.rgb,kl);ln.assign(t),Ll.assign(1)}setupVariants(){const t=this.metalnessNode?v(this.metalnessNode):ST;kl.assign(t);let e=this.roughnessNode?v(this.roughnessNode):MT;e=Ix({roughness:e}),ws.assign(e),this.setupSpecular(),dt.assign(U(dt.rgb.mul(t.oneMinus()),dt.a))}copy(t){return this.emissiveNode=t.emissiveNode,this.metalnessNode=t.metalnessNode,this.roughnessNode=t.roughnessNode,super.copy(t)}}Yt("MeshStandardNodeMaterial",Ox);const zC=new rM;class Dx extends Ox{constructor(t){super(),this.isMeshPhysicalNodeMaterial=!0,this.clearcoatNode=null,this.clearcoatRoughnessNode=null,this.clearcoatNormalNode=null,this.sheenNode=null,this.sheenRoughnessNode=null,this.iridescenceNode=null,this.iridescenceIORNode=null,this.iridescenceThicknessNode=null,this.specularIntensityNode=null,this.specularColorNode=null,this.iorNode=null,this.transmissionNode=null,this.thicknessNode=null,this.attenuationDistanceNode=null,this.attenuationColorNode=null,this.dispersionNode=null,this.anisotropyNode=null,this.setDefaultValues(zC),this.setValues(t)}get useClearcoat(){return this.clearcoat>0||this.clearcoatNode!==null}get useIridescence(){return this.iridescence>0||this.iridescenceNode!==null}get useSheen(){return this.sheen>0||this.sheenNode!==null}get useAnisotropy(){return this.anisotropy>0||this.anisotropyNode!==null}get useTransmission(){return this.transmission>0||this.transmissionNode!==null}get useDispersion(){return this.dispersion>0||this.dispersionNode!==null}setupSpecular(){const t=this.iorNode?v(this.iorNode):OT;el.assign(t),ln.assign(jt(hn(e1(el.sub(1).div(el.add(1))).mul(NT),w(1)).mul(gm),dt.rgb,kl)),Ll.assign(jt(gm,1,kl))}setupLightingModel(){return new pp(this.useClearcoat,this.useSheen,this.useIridescence,this.useAnisotropy,this.useTransmission,this.useDispersion)}setupVariants(t){if(super.setupVariants(t),this.useClearcoat){const e=this.clearcoatNode?v(this.clearcoatNode):_T,s=this.clearcoatRoughnessNode?v(this.clearcoatRoughnessNode):CT;kh.assign(e),Vl.assign(Ix({roughness:s}))}if(this.useSheen){const e=this.sheenNode?w(this.sheenNode):ET,s=this.sheenRoughnessNode?v(this.sheenRoughnessNode):RT;Ji.assign(e),ep.assign(s)}if(this.useIridescence){const e=this.iridescenceNode?v(this.iridescenceNode):VT,s=this.iridescenceIORNode?v(this.iridescenceIORNode):LT,i=this.iridescenceThicknessNode?v(this.iridescenceThicknessNode):IT;np.assign(e),by.assign(s),By.assign(i)}if(this.useAnisotropy){const e=(this.anisotropyNode?j(this.anisotropyNode):kT).toVar();Ks.assign(e.length()),Z(Ks.equal(0),()=>{e.assign(j(1,0))}).else(()=>{e.divAssign(Ks),Ks.assign(Ks.saturate())}),Vh.assign(Ks.pow2().mix(ws.pow2(),1)),tl.assign(tr[0].mul(e.x).add(tr[1].mul(e.y))),cr.assign(tr[1].mul(e.x).sub(tr[0].mul(e.y)))}if(this.useTransmission){const e=this.transmissionNode?v(this.transmissionNode):FT,s=this.thicknessNode?v(this.thicknessNode):PT,i=this.attenuationDistanceNode?v(this.attenuationDistanceNode):DT,r=this.attenuationColorNode?w(this.attenuationColorNode):bT;if(Ih.assign(e),Uy.assign(s),jy.assign(i),Wy.assign(r),this.useDispersion){const o=this.dispersionNode?v(this.dispersionNode):UT;Hy.assign(o)}}}setupNormal(t){super.setupNormal(t);const e=this.clearcoatNormalNode?w(this.clearcoatNormalNode):AT;Ki.assign(e)}copy(t){return this.clearcoatNode=t.clearcoatNode,this.clearcoatRoughnessNode=t.clearcoatRoughnessNode,this.clearcoatNormalNode=t.clearcoatNormalNode,this.sheenNode=t.sheenNode,this.sheenRoughnessNode=t.sheenRoughnessNode,this.iridescenceNode=t.iridescenceNode,this.iridescenceIORNode=t.iridescenceIORNode,this.iridescenceThicknessNode=t.iridescenceThicknessNode,this.specularIntensityNode=t.specularIntensityNode,this.specularColorNode=t.specularColorNode,this.transmissionNode=t.transmissionNode,this.thicknessNode=t.thicknessNode,this.attenuationDistanceNode=t.attenuationDistanceNode,this.attenuationColorNode=t.attenuationColorNode,this.dispersionNode=t.dispersionNode,this.anisotropyNode=t.anisotropyNode,super.copy(t)}}Yt("MeshPhysicalNodeMaterial",Dx);class EC extends pp{constructor(t,e,s,i){super(t,e,s),this.useSSS=i}direct({lightDirection:t,lightColor:e,reflectedLight:s},i,r){if(this.useSSS===!0){const o=r.material,{thicknessColorNode:a,thicknessDistortionNode:l,thicknessAmbientNode:u,thicknessAttenuationNode:c,thicknessPowerNode:h,thicknessScaleNode:d}=o,p=t.add(kt.mul(l)).normalize(),f=v(Tt.dot(p.negate()).saturate().pow(h).mul(d)),y=w(f.add(u).mul(a));s.directDiffuse.addAssign(y.mul(c.mul(e)))}super.direct({lightDirection:t,lightColor:e,reflectedLight:s},i,r)}}class RC extends Dx{constructor(t){super(t),this.thicknessColorNode=null,this.thicknessDistortionNode=v(.1),this.thicknessAmbientNode=v(0),this.thicknessAttenuationNode=v(.1),this.thicknessPowerNode=v(2),this.thicknessScaleNode=v(10)}get useSSS(){return this.thicknessColorNode!==null}setupLightingModel(){return new EC(this.useClearcoat,this.useSheen,this.useIridescence,this.useSSS)}copy(t){return this.thicknessColorNode=t.thicknessColorNode,this.thicknessDistortionNode=t.thicknessDistortionNode,this.thicknessAmbientNode=t.thicknessAmbientNode,this.thicknessAttenuationNode=t.thicknessAttenuationNode,this.thicknessPowerNode=t.thicknessPowerNode,this.thicknessScaleNode=t.thicknessScaleNode,super.copy(t)}}Yt("MeshSSSNodeMaterial",RC);const kC=R(({normal:n,lightDirection:t,builder:e})=>{const s=n.dot(t),i=j(s.mul(.5).add(.5),0);if(e.material.gradientMap){const r=Yn("gradientMap","texture").context({getUV:()=>i});return w(r.r)}else{const r=i.fwidth().mul(.5);return jt(w(.7),w(1),Vn(v(.7).sub(r.x),v(.7).add(r.x),i.x))}});class VC extends cu{direct({lightDirection:t,lightColor:e,reflectedLight:s},i,r){const o=kC({normal:Fl,lightDirection:t,builder:r}).mul(e);s.directDiffuse.addAssign(o.mul(Tr({diffuseColor:dt.rgb})))}indirectDiffuse({irradiance:t,reflectedLight:e}){e.indirectDiffuse.addAssign(t.mul(Tr({diffuseColor:dt})))}}const LC=new aM;class IC extends pe{constructor(t){super(),this.isMeshToonNodeMaterial=!0,this.lights=!0,this.setDefaultValues(LC),this.setValues(t)}setupLightingModel(){return new VC}}Yt("MeshToonNodeMaterial",IC);const FC=new cM;class PC extends pe{constructor(t){super(),this.isMeshMatcapNodeMaterial=!0,this.lights=!1,this.setDefaultValues(FC),this.setValues(t)}setupVariants(t){const e=A_;let s;t.material.matcap?s=Yn("matcap","texture").context({getUV:()=>e}):s=w(jt(.2,.8,e.y)),dt.rgb.mulAssign(s.rgb)}}Yt("MeshMatcapNodeMaterial",PC);const OC=new xy;class DC extends pe{constructor(t){super(),this.isPointsNodeMaterial=!0,this.lights=!1,this.normals=!1,this.transparent=!0,this.sizeNode=null,this.setDefaultValues(OC),this.setValues(t)}copy(t){return this.sizeNode=t.sizeNode,super.copy(t)}}Yt("PointsNodeMaterial",DC);const bC=new nM;class BC extends pe{constructor(t){super(),this.isSpriteNodeMaterial=!0,this.lights=!1,this.normals=!1,this.positionNode=null,this.rotationNode=null,this.scaleNode=null,this.setDefaultValues(bC),this.setValues(t)}setupPosition({object:t,context:e}){const{positionNode:s,rotationNode:i,scaleNode:r}=this,o=ee;let a=fi.mul(w(s||0)),l=j(Do[0].xyz.length(),Do[1].xyz.length());r!==null&&(l=l.mul(r));let u=o.xy;t.center&&t.center.isVector2===!0&&(u=u.sub(tt(t.center).sub(.5))),u=u.mul(l);const c=v(i||zT),h=u.rotate(c);a=U(a.xy.add(h),a.zw);const d=Tn.mul(a);return e.vertex=o,d}copy(t){return this.positionNode=t.positionNode,this.rotationNode=t.rotationNode,this.scaleNode=t.scaleNode,super.copy(t)}}Yt("SpriteNodeMaterial",BC);class UC extends cu{constructor(){super(),this.shadowNode=v(1).toVar("shadowMask")}direct({shadowMask:t}){this.shadowNode.mulAssign(t)}finish(t){dt.a.mulAssign(this.shadowNode.oneMinus()),t.outgoingLight.rgb.assign(dt.rgb)}}const jC=new iM;class WC extends pe{constructor(t){super(),this.isShadowNodeMaterial=!0,this.lights=!0,this.setDefaultValues(jC),this.setValues(t)}setupLightingModel(){return new UC}}Yt("ShadowNodeMaterial",WC);class HC extends pe{constructor(t={}){super(),this.normals=!1,this.lights=!1,this.isVolumeNodeMaterial=!0,this.testNode=null,this.setValues(t)}setup(t){const e=W_(this.map,null,0),s=R(({orig:i,dir:r})=>{const o=w(-.5),a=w(.5),l=r.reciprocal(),u=o.sub(i).mul(l),c=a.sub(i).mul(l),h=hn(u,c),d=Jt(u,c),p=Jt(h.x,Jt(h.y,h.z)),f=hn(d.x,hn(d.y,d.z));return j(p,f)});this.fragmentNode=R(()=>{const i=Ot(w(fT.mul(U(u1,1)))),o=Ot(me.sub(i)).normalize(),a=St("vec2","bounds").assign(s({orig:i,dir:o}));a.x.greaterThan(a.y).discard(),a.assign(j(Jt(a.x,0),a.y));const l=St("vec3","p").assign(i.add(a.x.mul(o))),u=St("vec3","inc").assign(w(o.abs().reciprocal())),c=St("float","delta").assign(hn(u.x,hn(u.y,u.z)));c.divAssign(Yn("steps","float"));const h=St("vec4","ac").assign(U(Yn("base","color"),0));return ut({type:"float",start:a.x,end:a.y,update:"+= delta"},()=>{const d=St("float","d").assign(e.uv(l.add(.5)).r);this.testNode!==null?this.testNode({map:e,mapValue:d,probe:l,finalColor:h}).append():(h.a.assign(1),T1()),l.addAssign(o.mul(c))}),h.a.equal(0).discard(),U(h)})(),super.setup(t)}}Yt("VolumeNodeMaterial",HC);const fr=R(([n,t,e])=>{const s=v(e).toVar(),i=v(t).toVar(),r=pi(n).toVar();return Fe(r,i,s)}),jo=R(([n,t])=>{const e=pi(t).toVar(),s=v(n).toVar();return Fe(e,s.negate(),s)}),zt=R(([n])=>{const t=v(n).toVar();return N(Rr(t))}),vt=R(([n,t])=>{const e=v(n).toVar();return t.assign(zt(e)),e.sub(v(t))}),bx=R(([n,t,e,s,i,r])=>{const o=v(r).toVar(),a=v(i).toVar(),l=v(s).toVar(),u=v(e).toVar(),c=v(t).toVar(),h=v(n).toVar(),d=v(Vt(1,a)).toVar();return Vt(1,o).mul(h.mul(d).add(c.mul(a))).add(o.mul(u.mul(d).add(l.mul(a))))}),Bx=R(([n,t,e,s,i,r])=>{const o=v(r).toVar(),a=v(i).toVar(),l=w(s).toVar(),u=w(e).toVar(),c=w(t).toVar(),h=w(n).toVar(),d=v(Vt(1,a)).toVar();return Vt(1,o).mul(h.mul(d).add(c.mul(a))).add(o.mul(u.mul(d).add(l.mul(a))))}),Ux=Je([bx,Bx]),jx=R(([n,t,e,s,i,r,o,a,l,u,c])=>{const h=v(c).toVar(),d=v(u).toVar(),p=v(l).toVar(),f=v(a).toVar(),y=v(o).toVar(),M=v(r).toVar(),m=v(i).toVar(),g=v(s).toVar(),x=v(e).toVar(),S=v(t).toVar(),E=v(n).toVar(),L=v(Vt(1,p)).toVar(),A=v(Vt(1,d)).toVar();return v(Vt(1,h)).toVar().mul(A.mul(E.mul(L).add(S.mul(p))).add(d.mul(x.mul(L).add(g.mul(p))))).add(h.mul(A.mul(m.mul(L).add(M.mul(p))).add(d.mul(y.mul(L).add(f.mul(p))))))}),Wx=R(([n,t,e,s,i,r,o,a,l,u,c])=>{const h=v(c).toVar(),d=v(u).toVar(),p=v(l).toVar(),f=w(a).toVar(),y=w(o).toVar(),M=w(r).toVar(),m=w(i).toVar(),g=w(s).toVar(),x=w(e).toVar(),S=w(t).toVar(),E=w(n).toVar(),L=v(Vt(1,p)).toVar(),A=v(Vt(1,d)).toVar();return v(Vt(1,h)).toVar().mul(A.mul(E.mul(L).add(S.mul(p))).add(d.mul(x.mul(L).add(g.mul(p))))).add(h.mul(A.mul(m.mul(L).add(M.mul(p))).add(d.mul(y.mul(L).add(f.mul(p))))))}),Hx=Je([jx,Wx]),$x=R(([n,t,e])=>{const s=v(e).toVar(),i=v(t).toVar(),r=O(n).toVar(),o=O(r.bitAnd(O(7))).toVar(),a=v(fr(o.lessThan(O(4)),i,s)).toVar(),l=v(K(2,fr(o.lessThan(O(4)),s,i))).toVar();return jo(a,pi(o.bitAnd(O(1)))).add(jo(l,pi(o.bitAnd(O(2)))))}),Gx=R(([n,t,e,s])=>{const i=v(s).toVar(),r=v(e).toVar(),o=v(t).toVar(),a=O(n).toVar(),l=O(a.bitAnd(O(15))).toVar(),u=v(fr(l.lessThan(O(8)),o,r)).toVar(),c=v(fr(l.lessThan(O(4)),r,fr(l.equal(O(12)).or(l.equal(O(14))),o,i))).toVar();return jo(u,pi(l.bitAnd(O(1)))).add(jo(c,pi(l.bitAnd(O(2)))))}),Gt=Je([$x,Gx]),qx=R(([n,t,e])=>{const s=v(e).toVar(),i=v(t).toVar(),r=Qo(n).toVar();return w(Gt(r.x,i,s),Gt(r.y,i,s),Gt(r.z,i,s))}),Xx=R(([n,t,e,s])=>{const i=v(s).toVar(),r=v(e).toVar(),o=v(t).toVar(),a=Qo(n).toVar();return w(Gt(a.x,o,r,i),Gt(a.y,o,r,i),Gt(a.z,o,r,i))}),He=Je([qx,Xx]),Yx=R(([n])=>{const t=v(n).toVar();return K(.6616,t)}),Zx=R(([n])=>{const t=v(n).toVar();return K(.982,t)}),Qx=R(([n])=>{const t=w(n).toVar();return K(.6616,t)}),Jx=Je([Yx,Qx]),Kx=R(([n])=>{const t=w(n).toVar();return K(.982,t)}),tv=Je([Zx,Kx]),Ne=R(([n,t])=>{const e=N(t).toVar(),s=O(n).toVar();return s.shiftLeft(e).bitOr(s.shiftRight(N(32).sub(e)))}),ev=R(([n,t,e])=>{n.subAssign(e),n.bitXorAssign(Ne(e,N(4))),e.addAssign(t),t.subAssign(n),t.bitXorAssign(Ne(n,N(6))),n.addAssign(e),e.subAssign(t),e.bitXorAssign(Ne(t,N(8))),t.addAssign(n),n.subAssign(e),n.bitXorAssign(Ne(e,N(16))),e.addAssign(t),t.subAssign(n),t.bitXorAssign(Ne(n,N(19))),n.addAssign(e),e.subAssign(t),e.bitXorAssign(Ne(t,N(4))),t.addAssign(n)}),Fr=R(([n,t,e])=>{const s=O(e).toVar(),i=O(t).toVar(),r=O(n).toVar();return s.bitXorAssign(i),s.subAssign(Ne(i,N(14))),r.bitXorAssign(s),r.subAssign(Ne(s,N(11))),i.bitXorAssign(r),i.subAssign(Ne(r,N(25))),s.bitXorAssign(i),s.subAssign(Ne(i,N(16))),r.bitXorAssign(s),r.subAssign(Ne(s,N(4))),i.bitXorAssign(r),i.subAssign(Ne(r,N(14))),s.bitXorAssign(i),s.subAssign(Ne(i,N(24))),s}),ne=R(([n])=>{const t=O(n).toVar();return v(t).div(v(O(N(4294967295))))}),gn=R(([n])=>{const t=v(n).toVar();return t.mul(t.mul(t.mul(t.mul(t.mul(6).sub(15)).add(10))))}),nv=R(([n])=>{const t=N(n).toVar(),e=O(O(1)).toVar(),s=O(O(N(3735928559)).add(e.shiftLeft(O(2)).add(O(13)))).toVar();return Fr(s.add(O(t)),s,s)}),sv=R(([n,t])=>{const e=N(t).toVar(),s=N(n).toVar(),i=O(O(2)).toVar(),r=O().toVar(),o=O().toVar(),a=O().toVar();return r.assign(o.assign(a.assign(O(N(3735928559)).add(i.shiftLeft(O(2)).add(O(13)))))),r.addAssign(O(s)),o.addAssign(O(e)),Fr(r,o,a)}),iv=R(([n,t,e])=>{const s=N(e).toVar(),i=N(t).toVar(),r=N(n).toVar(),o=O(O(3)).toVar(),a=O().toVar(),l=O().toVar(),u=O().toVar();return a.assign(l.assign(u.assign(O(N(3735928559)).add(o.shiftLeft(O(2)).add(O(13)))))),a.addAssign(O(r)),l.addAssign(O(i)),u.addAssign(O(s)),Fr(a,l,u)}),rv=R(([n,t,e,s])=>{const i=N(s).toVar(),r=N(e).toVar(),o=N(t).toVar(),a=N(n).toVar(),l=O(O(4)).toVar(),u=O().toVar(),c=O().toVar(),h=O().toVar();return u.assign(c.assign(h.assign(O(N(3735928559)).add(l.shiftLeft(O(2)).add(O(13)))))),u.addAssign(O(a)),c.addAssign(O(o)),h.addAssign(O(r)),ev(u,c,h),u.addAssign(O(i)),Fr(u,c,h)}),ov=R(([n,t,e,s,i])=>{const r=N(i).toVar(),o=N(s).toVar(),a=N(e).toVar(),l=N(t).toVar(),u=N(n).toVar(),c=O(O(5)).toVar(),h=O().toVar(),d=O().toVar(),p=O().toVar();return h.assign(d.assign(p.assign(O(N(3735928559)).add(c.shiftLeft(O(2)).add(O(13)))))),h.addAssign(O(u)),d.addAssign(O(l)),p.addAssign(O(a)),ev(h,d,p),h.addAssign(O(o)),d.addAssign(O(r)),Fr(h,d,p)}),rt=Je([nv,sv,iv,rv,ov]),av=R(([n,t])=>{const e=N(t).toVar(),s=N(n).toVar(),i=O(rt(s,e)).toVar(),r=Qo().toVar();return r.x.assign(i.bitAnd(N(255))),r.y.assign(i.shiftRight(N(8)).bitAnd(N(255))),r.z.assign(i.shiftRight(N(16)).bitAnd(N(255))),r}),lv=R(([n,t,e])=>{const s=N(e).toVar(),i=N(t).toVar(),r=N(n).toVar(),o=O(rt(r,i,s)).toVar(),a=Qo().toVar();return a.x.assign(o.bitAnd(N(255))),a.y.assign(o.shiftRight(N(8)).bitAnd(N(255))),a.z.assign(o.shiftRight(N(16)).bitAnd(N(255))),a}),$e=Je([av,lv]),uv=R(([n])=>{const t=j(n).toVar(),e=N().toVar(),s=N().toVar(),i=v(vt(t.x,e)).toVar(),r=v(vt(t.y,s)).toVar(),o=v(gn(i)).toVar(),a=v(gn(r)).toVar(),l=v(Ux(Gt(rt(e,s),i,r),Gt(rt(e.add(N(1)),s),i.sub(1),r),Gt(rt(e,s.add(N(1))),i,r.sub(1)),Gt(rt(e.add(N(1)),s.add(N(1))),i.sub(1),r.sub(1)),o,a)).toVar();return Jx(l)}),cv=R(([n])=>{const t=w(n).toVar(),e=N().toVar(),s=N().toVar(),i=N().toVar(),r=v(vt(t.x,e)).toVar(),o=v(vt(t.y,s)).toVar(),a=v(vt(t.z,i)).toVar(),l=v(gn(r)).toVar(),u=v(gn(o)).toVar(),c=v(gn(a)).toVar(),h=v(Hx(Gt(rt(e,s,i),r,o,a),Gt(rt(e.add(N(1)),s,i),r.sub(1),o,a),Gt(rt(e,s.add(N(1)),i),r,o.sub(1),a),Gt(rt(e.add(N(1)),s.add(N(1)),i),r.sub(1),o.sub(1),a),Gt(rt(e,s,i.add(N(1))),r,o,a.sub(1)),Gt(rt(e.add(N(1)),s,i.add(N(1))),r.sub(1),o,a.sub(1)),Gt(rt(e,s.add(N(1)),i.add(N(1))),r,o.sub(1),a.sub(1)),Gt(rt(e.add(N(1)),s.add(N(1)),i.add(N(1))),r.sub(1),o.sub(1),a.sub(1)),l,u,c)).toVar();return tv(h)}),$C=Je([uv,cv]),hv=R(([n])=>{const t=j(n).toVar(),e=N().toVar(),s=N().toVar(),i=v(vt(t.x,e)).toVar(),r=v(vt(t.y,s)).toVar(),o=v(gn(i)).toVar(),a=v(gn(r)).toVar(),l=w(Ux(He($e(e,s),i,r),He($e(e.add(N(1)),s),i.sub(1),r),He($e(e,s.add(N(1))),i,r.sub(1)),He($e(e.add(N(1)),s.add(N(1))),i.sub(1),r.sub(1)),o,a)).toVar();return Jx(l)}),dv=R(([n])=>{const t=w(n).toVar(),e=N().toVar(),s=N().toVar(),i=N().toVar(),r=v(vt(t.x,e)).toVar(),o=v(vt(t.y,s)).toVar(),a=v(vt(t.z,i)).toVar(),l=v(gn(r)).toVar(),u=v(gn(o)).toVar(),c=v(gn(a)).toVar(),h=w(Hx(He($e(e,s,i),r,o,a),He($e(e.add(N(1)),s,i),r.sub(1),o,a),He($e(e,s.add(N(1)),i),r,o.sub(1),a),He($e(e.add(N(1)),s.add(N(1)),i),r.sub(1),o.sub(1),a),He($e(e,s,i.add(N(1))),r,o,a.sub(1)),He($e(e.add(N(1)),s,i.add(N(1))),r.sub(1),o,a.sub(1)),He($e(e,s.add(N(1)),i.add(N(1))),r,o.sub(1),a.sub(1)),He($e(e.add(N(1)),s.add(N(1)),i.add(N(1))),r.sub(1),o.sub(1),a.sub(1)),l,u,c)).toVar();return tv(h)}),GC=Je([hv,dv]),qC=R(([n])=>{const t=v(n).toVar(),e=N(zt(t)).toVar();return ne(rt(e))}),XC=R(([n])=>{const t=j(n).toVar(),e=N(zt(t.x)).toVar(),s=N(zt(t.y)).toVar();return ne(rt(e,s))}),YC=R(([n])=>{const t=w(n).toVar(),e=N(zt(t.x)).toVar(),s=N(zt(t.y)).toVar(),i=N(zt(t.z)).toVar();return ne(rt(e,s,i))}),ZC=R(([n])=>{const t=U(n).toVar(),e=N(zt(t.x)).toVar(),s=N(zt(t.y)).toVar(),i=N(zt(t.z)).toVar(),r=N(zt(t.w)).toVar();return ne(rt(e,s,i,r))}),pv=R(([n])=>{const t=v(n).toVar(),e=N(zt(t)).toVar();return w(ne(rt(e,N(0))),ne(rt(e,N(1))),ne(rt(e,N(2))))}),fv=R(([n])=>{const t=j(n).toVar(),e=N(zt(t.x)).toVar(),s=N(zt(t.y)).toVar();return w(ne(rt(e,s,N(0))),ne(rt(e,s,N(1))),ne(rt(e,s,N(2))))}),mv=R(([n])=>{const t=w(n).toVar(),e=N(zt(t.x)).toVar(),s=N(zt(t.y)).toVar(),i=N(zt(t.z)).toVar();return w(ne(rt(e,s,i,N(0))),ne(rt(e,s,i,N(1))),ne(rt(e,s,i,N(2))))}),gv=R(([n])=>{const t=U(n).toVar(),e=N(zt(t.x)).toVar(),s=N(zt(t.y)).toVar(),i=N(zt(t.z)).toVar(),r=N(zt(t.w)).toVar();return w(ne(rt(e,s,i,r,N(0))),ne(rt(e,s,i,r,N(1))),ne(rt(e,s,i,r,N(2))))}),yv=Je([pv,fv,mv,gv]),bl=R(([n,t,e,s])=>{const i=v(s).toVar(),r=v(e).toVar(),o=N(t).toVar(),a=w(n).toVar(),l=v(0).toVar(),u=v(1).toVar();return ut({start:N(0),end:o},({i:c})=>{l.addAssign(u.mul($C(a))),u.mulAssign(i),a.mulAssign(r)}),l}),xv=R(([n,t,e,s])=>{const i=v(s).toVar(),r=v(e).toVar(),o=N(t).toVar(),a=w(n).toVar(),l=w(0).toVar(),u=v(1).toVar();return ut({start:N(0),end:o},({i:c})=>{l.addAssign(u.mul(GC(a))),u.mulAssign(i),a.mulAssign(r)}),l}),QC=R(([n,t,e,s])=>{const i=v(s).toVar(),r=v(e).toVar(),o=N(t).toVar(),a=w(n).toVar();return j(bl(a,o,r,i),bl(a.add(w(N(19),N(193),N(17))),o,r,i))}),JC=R(([n,t,e,s])=>{const i=v(s).toVar(),r=v(e).toVar(),o=N(t).toVar(),a=w(n).toVar(),l=w(xv(a,o,r,i)).toVar(),u=v(bl(a.add(w(N(19),N(193),N(17))),o,r,i)).toVar();return U(l,u)}),vv=R(([n,t,e,s,i,r,o])=>{const a=N(o).toVar(),l=v(r).toVar(),u=N(i).toVar(),c=N(s).toVar(),h=N(e).toVar(),d=N(t).toVar(),p=j(n).toVar(),f=w(yv(j(d.add(c),h.add(u)))).toVar(),y=j(f.x,f.y).toVar();y.subAssign(.5),y.mulAssign(l),y.addAssign(.5);const M=j(j(v(d),v(h)).add(y)).toVar(),m=j(M.sub(p)).toVar();return Z(a.equal(N(2)),()=>It(m.x).add(It(m.y))),Z(a.equal(N(3)),()=>Jt(It(m.x),It(m.y))),kr(m,m)}),Nv=R(([n,t,e,s,i,r,o,a,l])=>{const u=N(l).toVar(),c=v(a).toVar(),h=N(o).toVar(),d=N(r).toVar(),p=N(i).toVar(),f=N(s).toVar(),y=N(e).toVar(),M=N(t).toVar(),m=w(n).toVar(),g=w(yv(w(M.add(p),y.add(d),f.add(h)))).toVar();g.subAssign(.5),g.mulAssign(c),g.addAssign(.5);const x=w(w(v(M),v(y),v(f)).add(g)).toVar(),S=w(x.sub(m)).toVar();return Z(u.equal(N(2)),()=>It(S.x).add(It(S.y).add(It(S.z)))),Z(u.equal(N(3)),()=>Jt(Jt(It(S.x),It(S.y)),It(S.z))),kr(S,S)}),Pr=Je([vv,Nv]),KC=R(([n,t,e])=>{const s=N(e).toVar(),i=v(t).toVar(),r=j(n).toVar(),o=N().toVar(),a=N().toVar(),l=j(vt(r.x,o),vt(r.y,a)).toVar(),u=v(1e6).toVar();return ut({start:-1,end:N(1),name:"x",condition:"<="},({x:c})=>{ut({start:-1,end:N(1),name:"y",condition:"<="},({y:h})=>{const d=v(Pr(l,c,h,o,a,i,s)).toVar();u.assign(hn(u,d))})}),Z(s.equal(N(0)),()=>{u.assign(Ni(u))}),u}),tA=R(([n,t,e])=>{const s=N(e).toVar(),i=v(t).toVar(),r=j(n).toVar(),o=N().toVar(),a=N().toVar(),l=j(vt(r.x,o),vt(r.y,a)).toVar(),u=j(1e6,1e6).toVar();return ut({start:-1,end:N(1),name:"x",condition:"<="},({x:c})=>{ut({start:-1,end:N(1),name:"y",condition:"<="},({y:h})=>{const d=v(Pr(l,c,h,o,a,i,s)).toVar();Z(d.lessThan(u.x),()=>{u.y.assign(u.x),u.x.assign(d)}).elseif(d.lessThan(u.y),()=>{u.y.assign(d)})})}),Z(s.equal(N(0)),()=>{u.assign(Ni(u))}),u}),eA=R(([n,t,e])=>{const s=N(e).toVar(),i=v(t).toVar(),r=j(n).toVar(),o=N().toVar(),a=N().toVar(),l=j(vt(r.x,o),vt(r.y,a)).toVar(),u=w(1e6,1e6,1e6).toVar();return ut({start:-1,end:N(1),name:"x",condition:"<="},({x:c})=>{ut({start:-1,end:N(1),name:"y",condition:"<="},({y:h})=>{const d=v(Pr(l,c,h,o,a,i,s)).toVar();Z(d.lessThan(u.x),()=>{u.z.assign(u.y),u.y.assign(u.x),u.x.assign(d)}).elseif(d.lessThan(u.y),()=>{u.z.assign(u.y),u.y.assign(d)}).elseif(d.lessThan(u.z),()=>{u.z.assign(d)})})}),Z(s.equal(N(0)),()=>{u.assign(Ni(u))}),u}),nA=R(([n,t,e])=>{const s=N(e).toVar(),i=v(t).toVar(),r=w(n).toVar(),o=N().toVar(),a=N().toVar(),l=N().toVar(),u=w(vt(r.x,o),vt(r.y,a),vt(r.z,l)).toVar(),c=v(1e6).toVar();return ut({start:-1,end:N(1),name:"x",condition:"<="},({x:h})=>{ut({start:-1,end:N(1),name:"y",condition:"<="},({y:d})=>{ut({start:-1,end:N(1),name:"z",condition:"<="},({z:p})=>{const f=v(Pr(u,h,d,p,o,a,l,i,s)).toVar();c.assign(hn(c,f))})})}),Z(s.equal(N(0)),()=>{c.assign(Ni(c))}),c}),sA=R(([n,t,e])=>{const s=N(e).toVar(),i=v(t).toVar(),r=w(n).toVar(),o=N().toVar(),a=N().toVar(),l=N().toVar(),u=w(vt(r.x,o),vt(r.y,a),vt(r.z,l)).toVar(),c=j(1e6,1e6).toVar();return ut({start:-1,end:N(1),name:"x",condition:"<="},({x:h})=>{ut({start:-1,end:N(1),name:"y",condition:"<="},({y:d})=>{ut({start:-1,end:N(1),name:"z",condition:"<="},({z:p})=>{const f=v(Pr(u,h,d,p,o,a,l,i,s)).toVar();Z(f.lessThan(c.x),()=>{c.y.assign(c.x),c.x.assign(f)}).elseif(f.lessThan(c.y),()=>{c.y.assign(f)})})})}),Z(s.equal(N(0)),()=>{c.assign(Ni(c))}),c}),iA=R(([n,t,e])=>{const s=N(e).toVar(),i=v(t).toVar(),r=w(n).toVar(),o=N().toVar(),a=N().toVar(),l=N().toVar(),u=w(vt(r.x,o),vt(r.y,a),vt(r.z,l)).toVar(),c=w(1e6,1e6,1e6).toVar();return ut({start:-1,end:N(1),name:"x",condition:"<="},({x:h})=>{ut({start:-1,end:N(1),name:"y",condition:"<="},({y:d})=>{ut({start:-1,end:N(1),name:"z",condition:"<="},({z:p})=>{const f=v(Pr(u,h,d,p,o,a,l,i,s)).toVar();Z(f.lessThan(c.x),()=>{c.z.assign(c.y),c.y.assign(c.x),c.x.assign(f)}).elseif(f.lessThan(c.y),()=>{c.z.assign(c.y),c.y.assign(f)}).elseif(f.lessThan(c.z),()=>{c.z.assign(f)})})})}),Z(s.equal(N(0)),()=>{c.assign(Ni(c))}),c});fr.setLayout({name:"mx_select",type:"float",inputs:[{name:"b",type:"bool"},{name:"t",type:"float"},{name:"f",type:"float"}]});jo.setLayout({name:"mx_negate_if",type:"float",inputs:[{name:"val",type:"float"},{name:"b",type:"bool"}]});zt.setLayout({name:"mx_floor",type:"int",inputs:[{name:"x",type:"float"}]});bx.setLayout({name:"mx_bilerp_0",type:"float",inputs:[{name:"v0",type:"float"},{name:"v1",type:"float"},{name:"v2",type:"float"},{name:"v3",type:"float"},{name:"s",type:"float"},{name:"t",type:"float"}]});Bx.setLayout({name:"mx_bilerp_1",type:"vec3",inputs:[{name:"v0",type:"vec3"},{name:"v1",type:"vec3"},{name:"v2",type:"vec3"},{name:"v3",type:"vec3"},{name:"s",type:"float"},{name:"t",type:"float"}]});jx.setLayout({name:"mx_trilerp_0",type:"float",inputs:[{name:"v0",type:"float"},{name:"v1",type:"float"},{name:"v2",type:"float"},{name:"v3",type:"float"},{name:"v4",type:"float"},{name:"v5",type:"float"},{name:"v6",type:"float"},{name:"v7",type:"float"},{name:"s",type:"float"},{name:"t",type:"float"},{name:"r",type:"float"}]});Wx.setLayout({name:"mx_trilerp_1",type:"vec3",inputs:[{name:"v0",type:"vec3"},{name:"v1",type:"vec3"},{name:"v2",type:"vec3"},{name:"v3",type:"vec3"},{name:"v4",type:"vec3"},{name:"v5",type:"vec3"},{name:"v6",type:"vec3"},{name:"v7",type:"vec3"},{name:"s",type:"float"},{name:"t",type:"float"},{name:"r",type:"float"}]});$x.setLayout({name:"mx_gradient_float_0",type:"float",inputs:[{name:"hash",type:"uint"},{name:"x",type:"float"},{name:"y",type:"float"}]});Gx.setLayout({name:"mx_gradient_float_1",type:"float",inputs:[{name:"hash",type:"uint"},{name:"x",type:"float"},{name:"y",type:"float"},{name:"z",type:"float"}]});qx.setLayout({name:"mx_gradient_vec3_0",type:"vec3",inputs:[{name:"hash",type:"uvec3"},{name:"x",type:"float"},{name:"y",type:"float"}]});Xx.setLayout({name:"mx_gradient_vec3_1",type:"vec3",inputs:[{name:"hash",type:"uvec3"},{name:"x",type:"float"},{name:"y",type:"float"},{name:"z",type:"float"}]});Yx.setLayout({name:"mx_gradient_scale2d_0",type:"float",inputs:[{name:"v",type:"float"}]});Zx.setLayout({name:"mx_gradient_scale3d_0",type:"float",inputs:[{name:"v",type:"float"}]});Qx.setLayout({name:"mx_gradient_scale2d_1",type:"vec3",inputs:[{name:"v",type:"vec3"}]});Kx.setLayout({name:"mx_gradient_scale3d_1",type:"vec3",inputs:[{name:"v",type:"vec3"}]});Ne.setLayout({name:"mx_rotl32",type:"uint",inputs:[{name:"x",type:"uint"},{name:"k",type:"int"}]});Fr.setLayout({name:"mx_bjfinal",type:"uint",inputs:[{name:"a",type:"uint"},{name:"b",type:"uint"},{name:"c",type:"uint"}]});ne.setLayout({name:"mx_bits_to_01",type:"float",inputs:[{name:"bits",type:"uint"}]});gn.setLayout({name:"mx_fade",type:"float",inputs:[{name:"t",type:"float"}]});nv.setLayout({name:"mx_hash_int_0",type:"uint",inputs:[{name:"x",type:"int"}]});sv.setLayout({name:"mx_hash_int_1",type:"uint",inputs:[{name:"x",type:"int"},{name:"y",type:"int"}]});iv.setLayout({name:"mx_hash_int_2",type:"uint",inputs:[{name:"x",type:"int"},{name:"y",type:"int"},{name:"z",type:"int"}]});rv.setLayout({name:"mx_hash_int_3",type:"uint",inputs:[{name:"x",type:"int"},{name:"y",type:"int"},{name:"z",type:"int"},{name:"xx",type:"int"}]});ov.setLayout({name:"mx_hash_int_4",type:"uint",inputs:[{name:"x",type:"int"},{name:"y",type:"int"},{name:"z",type:"int"},{name:"xx",type:"int"},{name:"yy",type:"int"}]});av.setLayout({name:"mx_hash_vec3_0",type:"uvec3",inputs:[{name:"x",type:"int"},{name:"y",type:"int"}]});lv.setLayout({name:"mx_hash_vec3_1",type:"uvec3",inputs:[{name:"x",type:"int"},{name:"y",type:"int"},{name:"z",type:"int"}]});uv.setLayout({name:"mx_perlin_noise_float_0",type:"float",inputs:[{name:"p",type:"vec2"}]});cv.setLayout({name:"mx_perlin_noise_float_1",type:"float",inputs:[{name:"p",type:"vec3"}]});hv.setLayout({name:"mx_perlin_noise_vec3_0",type:"vec3",inputs:[{name:"p",type:"vec2"}]});dv.setLayout({name:"mx_perlin_noise_vec3_1",type:"vec3",inputs:[{name:"p",type:"vec3"}]});qC.setLayout({name:"mx_cell_noise_float_0",type:"float",inputs:[{name:"p",type:"float"}]});XC.setLayout({name:"mx_cell_noise_float_1",type:"float",inputs:[{name:"p",type:"vec2"}]});YC.setLayout({name:"mx_cell_noise_float_2",type:"float",inputs:[{name:"p",type:"vec3"}]});ZC.setLayout({name:"mx_cell_noise_float_3",type:"float",inputs:[{name:"p",type:"vec4"}]});pv.setLayout({name:"mx_cell_noise_vec3_0",type:"vec3",inputs:[{name:"p",type:"float"}]});fv.setLayout({name:"mx_cell_noise_vec3_1",type:"vec3",inputs:[{name:"p",type:"vec2"}]});mv.setLayout({name:"mx_cell_noise_vec3_2",type:"vec3",inputs:[{name:"p",type:"vec3"}]});gv.setLayout({name:"mx_cell_noise_vec3_3",type:"vec3",inputs:[{name:"p",type:"vec4"}]});bl.setLayout({name:"mx_fractal_noise_float",type:"float",inputs:[{name:"p",type:"vec3"},{name:"octaves",type:"int"},{name:"lacunarity",type:"float"},{name:"diminish",type:"float"}]});xv.setLayout({name:"mx_fractal_noise_vec3",type:"vec3",inputs:[{name:"p",type:"vec3"},{name:"octaves",type:"int"},{name:"lacunarity",type:"float"},{name:"diminish",type:"float"}]});QC.setLayout({name:"mx_fractal_noise_vec2",type:"vec2",inputs:[{name:"p",type:"vec3"},{name:"octaves",type:"int"},{name:"lacunarity",type:"float"},{name:"diminish",type:"float"}]});JC.setLayout({name:"mx_fractal_noise_vec4",type:"vec4",inputs:[{name:"p",type:"vec3"},{name:"octaves",type:"int"},{name:"lacunarity",type:"float"},{name:"diminish",type:"float"}]});vv.setLayout({name:"mx_worley_distance_0",type:"float",inputs:[{name:"p",type:"vec2"},{name:"x",type:"int"},{name:"y",type:"int"},{name:"xoff",type:"int"},{name:"yoff",type:"int"},{name:"jitter",type:"float"},{name:"metric",type:"int"}]});Nv.setLayout({name:"mx_worley_distance_1",type:"float",inputs:[{name:"p",type:"vec3"},{name:"x",type:"int"},{name:"y",type:"int"},{name:"z",type:"int"},{name:"xoff",type:"int"},{name:"yoff",type:"int"},{name:"zoff",type:"int"},{name:"jitter",type:"float"},{name:"metric",type:"int"}]});KC.setLayout({name:"mx_worley_noise_float_0",type:"float",inputs:[{name:"p",type:"vec2"},{name:"jitter",type:"float"},{name:"metric",type:"int"}]});tA.setLayout({name:"mx_worley_noise_vec2_0",type:"vec2",inputs:[{name:"p",type:"vec2"},{name:"jitter",type:"float"},{name:"metric",type:"int"}]});eA.setLayout({name:"mx_worley_noise_vec3_0",type:"vec3",inputs:[{name:"p",type:"vec2"},{name:"jitter",type:"float"},{name:"metric",type:"int"}]});nA.setLayout({name:"mx_worley_noise_float_1",type:"float",inputs:[{name:"p",type:"vec3"},{name:"jitter",type:"float"},{name:"metric",type:"int"}]});sA.setLayout({name:"mx_worley_noise_vec2_1",type:"vec2",inputs:[{name:"p",type:"vec3"},{name:"jitter",type:"float"},{name:"metric",type:"int"}]});iA.setLayout({name:"mx_worley_noise_vec3_1",type:"vec3",inputs:[{name:"p",type:"vec3"},{name:"jitter",type:"float"},{name:"metric",type:"int"}]});const rA=R(([n])=>{const t=w(n).toVar(),e=v(t.x).toVar(),s=v(t.y).toVar(),i=v(t.z).toVar();Z(s.lessThan(1e-4),()=>w(i,i,i)).else(()=>{e.assign(K(6,e.sub(Rr(e))));const r=N(Ky(e)).toVar(),o=v(e.sub(v(r))).toVar(),a=v(i.mul(Vt(1,s))).toVar(),l=v(i.mul(Vt(1,s.mul(o)))).toVar(),u=v(i.mul(Vt(1,s.mul(Vt(1,o))))).toVar();return Z(r.equal(N(0)),()=>w(i,u,a)).elseif(r.equal(N(1)),()=>w(l,i,a)).elseif(r.equal(N(2)),()=>w(a,i,u)).elseif(r.equal(N(3)),()=>w(a,l,i)).elseif(r.equal(N(4)),()=>w(u,a,i)),w(i,a,l)})}),oA=R(([n])=>{const t=w(n).toVar(),e=v(t.x).toVar(),s=v(t.y).toVar(),i=v(t.z).toVar(),r=v(hn(e,hn(s,i))).toVar(),o=v(Jt(e,Jt(s,i))).toVar(),a=v(o.sub(r)).toVar(),l=v().toVar(),u=v().toVar(),c=v().toVar();return c.assign(o),Z(o.greaterThan(0),()=>{u.assign(a.div(o))}).else(()=>{u.assign(0)}),Z(u.lessThanEqual(0),()=>{l.assign(0)}).else(()=>{Z(e.greaterThanEqual(o),()=>{l.assign(s.sub(i).div(a))}).elseif(s.greaterThanEqual(o),()=>{l.assign(Be(2,i.sub(e).div(a)))}).else(()=>{l.assign(Be(4,e.sub(s).div(a)))}),l.mulAssign(1/6),Z(l.lessThan(0),()=>{l.addAssign(1)})}),w(l,u,c)});rA.setLayout({name:"mx_hsvtorgb",type:"vec3",inputs:[{name:"hsv",type:"vec3"}]});oA.setLayout({name:"mx_rgbtohsv",type:"vec3",inputs:[{name:"c",type:"vec3"}]});const aA=R(([n])=>{const t=w(n).toVar(),e=ky(qy(t,w(.04045))).toVar(),s=w(t.div(12.92)).toVar(),i=w(zn(Jt(t.add(w(.055)),w(0)).div(1.055),w(2.4))).toVar();return jt(s,i,e)});aA.setLayout({name:"mx_srgb_texture_to_lin_rec709",type:"vec3",inputs:[{name:"color",type:"vec3"}]});function lA(){const[n,t]=Ul.useState(!1);return X.jsxs("section",{id:"prof",className:"container",children:[X.jsxs("div",{className:"colorModeContainer",children:[X.jsx("img",{className:"prof",src:Z2,alt:"Picture of Sunny Jeong"}),X.jsx("img",{className:"colorMode",src:Q2,alt:"Color mode icon"})]}),X.jsxs("div",{className:"info",children:[X.jsx("h2",{children:"Hello I'm"}),X.jsxs("h1",{children:["Sunny",X.jsx("br",{}),"Jeong"]}),X.jsx("h2",{children:"Software Engineer"}),X.jsxs("span",{children:[X.jsx("a",{href:"https://www.linkedin.com/in/soeui-sunny-jeong/",children:X.jsx("img",{src:J2,alt:"LinkedIn Icon"})}),X.jsx("a",{href:"https://github.com/sunny-soeui",children:X.jsx("img",{src:K2,alt:"Github Icon"})})]}),X.jsxs("div",{class:"aboutmepopup",children:[X.jsx("button",{onClick:()=>t(!0),className:"hover",children:"About me"}),X.jsxs(Y2,{trigger:n,setTrigger:t,children:[X.jsx("h3",{children:"About me"}),X.jsx("br",{}),X.jsxs("p",{children:["👋🏽 Hi, my name is Sunny in English, Soeui in Korean, and Xiaoyi in Chinese.",X.jsx("br",{})," ",X.jsx("br",{}),"🎓 Graduated with a Bachelor of Computer Engineering. (May 2024)",X.jsx("br",{})," ",X.jsx("br",{}),"🌇 Third culture kid, with a passion for software/hardware development searching for experiences and strategies to further grow my skills.",X.jsx("br",{})," ",X.jsx("br",{}),"📚 Worked as a quality assurance intern in RAON Secure, where I got to create automated testing software for various products using Appium, python, and node.js. Have also experience in project management with a demonstrated history of working in the modeling/entertainment industry. I worked as a general manager/ co-ordinator in the Grin Modeling Agency managing commercials, photoshoots, TV shows, creative content, etc., and negotiations with agencies around the world.",X.jsx("br",{})," ",X.jsx("br",{}),"💻 As for my future, I hope to one day work as a software developer and work with a diverse team of intelligent engineers and develop innovative solutions that will increase efficiency worldwide",X.jsx("br",{})," ",X.jsx("br",{}),"🏔 In my free time, you can find me rock climbing, crocheting or even performing in a band!",X.jsx("br",{})," ",X.jsx("br",{}),"💪🏽 Problem-Solving, Critical Thinking, Research, Leadership, Communication"]})]})]}),X.jsxs("span",{children:[X.jsx("a",{href:tw,download:!0,children:X.jsx("button",{className:"hover",children:"Resume"})}),X.jsx("a",{href:"mailto:sunny.jeong@nyu.edu",children:X.jsx("button",{className:"hover",children:"Contact Info"})})]})]})]})}function uA(){return X.jsx(X.Fragment,{children:X.jsx(lA,{})})}Vc.createRoot(document.getElementById("root")).render(X.jsx(Ov.StrictMode,{children:X.jsx(uA,{})}));
